(function(){var L,r;(function(b){var e={},g=function(m){var n=e[m];if(n==b)throw"Module not defined or loaded: "+m;if(n.compiled)return n.compiled;var f=[];if(n.dependencies&&0<n.dependencies.length)for(var d=0;d<n.dependencies.length;d++)f.push(g(n.dependencies[d]));n.compiled=n.factory.apply(this,f.concat(n.extraArguments));if(!n.compiled)throw"Module defined but not loadable: "+m;return n.compiled};L=function(e,n){var f=e,d=n,l=2;f.splice||(d=f,f=b,l--);for(var l=Array.prototype.slice.call(arguments,
l),a=[],c=0;c<f.length;c++)a.push(g(f[c]));d.apply(this,a.concat(l))};r=function(g,n,f){var d=n,l=f,a=3;d.splice||(l=d,d=b,a--);a=Array.prototype.slice.call(arguments,a);e[g]={dependencies:d,factory:l,extraArguments:a||[]}}})();r("components","component.bookmark component.collapseexpand component.like component.links component.moderate component.page component.rate component.searchresult component.tag component.theater component.webpreview component.tourtip component.viewhtml component.previewhtml component.masonry component.resizedimage component.tip component.select component.poll component.convertcontent component.feature component.forumvotes component.forumqualityvotes component.vote component.squeezetext component.code component.loading component.presentcontent component.presentservice component.userpresence component.agodate component.html component.scheduledfile component.contentpeek".split(" "),
function(){return{}});r("component.agodate",["module.ui"],function(b,e,g,m){function n(l){l=e(l);l.html(d.formatAgoDate(d.parseDate(l.attr("data-dateutc"))))}function f(){e(".ui-agodate").each(function(){n(this)})}var d=e.telligent.evolution;e.telligent.evolution.ui.components.agodate={setup:function(){g.setInterval(f,15E3)},add:function(d,a){n(d)}};return{}},jQuery,window);r("component.bookmark",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.bookmark={setup:function(){},add:function(b,
f){b.empty();var d={contentId:f.contentid,contentTypeId:f.contenttypeid,typeId:f.bookmarktypeid,initialState:"true"==f.value,contentTypeName:f.contenttypename,onBookmark:function(d,a,c,k){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/bookmark.json?ContentId={ContentId}&ContentTypeId={ContentTypeId}"+(c?"&TypeId="+c:""),data:{ContentId:d,ContentTypeId:a},dataType:"json",success:function(a){k()}})},onUnbookmark:function(d,a,c,k){e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/bookmark.json?ContentId={ContentId}"+(c?"&TypeId="+c:""),data:{ContentId:d},dataType:"json",success:function(a){k()}})}};f.configuration.deleteBookmarkText&&(d.deleteBookmarkText=f.configuration.deleteBookmarkText);f.configuration.addBookmarkText&&(d.addBookmarkText=f.configuration.addBookmarkText);f.configuration.processingText&&(d.processingText=f.configuration.processingText);f.configuration.addBookmarkCssClass&&(d.addBookmarkCssClass=f.configuration.addBookmarkCssClass);f.configuration.deleteBookmarkCssClass&&
(d.deleteBookmarkCssClass=f.configuration.deleteBookmarkCssClass);f.configuration.processingCssClass&&(d.processingCssClass=f.configuration.processingCssClass);e(b).evolutionBookmark(d)}};return{}},jQuery,window);r("component.code",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.code={setup:function(){},add:function(b,f){var d={};e(b).data("_code_init")||(e(b).data("_code_init",!0),f.mode&&(d.mode=f.mode),f.theme!==m&&(d.theme=f.theme),f.minlines!==m&&(d.minLines=parseInt(f.minlines,
10)),f.maxlines!==m&&(d.maxLines=parseInt(f.maxlines,10)),f.readonly&&(d.readOnly="true"===f.readonly?!0:!1),f.gutter&&(d.gutter="true"===f.gutter?!0:!1),f.wordwrap&&(d.wordWrap="true"===f.wordwrap?!0:!1),f.enablefullscreen&&(d.enableFullScreen="false"===f.enablefullscreen?!1:!0),f.sourcecomparison&&(d.sourceComparison=sourceComparison),e(b).evolutionCodeEditor(d))}};return{}},jQuery,window);r("component.collapseexpand",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.collapseexpand=
{setup:function(){},add:function(b,f){var d=e("<a></a>").attr({href:"#"}).text(f.collapsetext),l=!1;d.on("click",function(){l?(b.slideUp(),d.text(f.collapsetext)):(b.slideDown(),d.text(f.expandtext));l=!l;return!1});b.removeClass().before(d).hide()}};return{}},jQuery,window);r("component.convertcontent",["module.ui","lib.util"],function(b,e,g,m,n){g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=
g.telligent.evolution.ui.components||{};g.telligent.evolution.ui.components.convertcontent={setup:function(){},add:function(b,d){var l=g('<a href="#">'+d.label+"</a>");g(b).empty().append(l);l.on("click.convertcontent",function(a){a.preventDefault();m.location="#_cptype=panel&_cpcontexttype=Explicit&_cppanelid=63f2015f-0f61-49e0-ac07-598d70cdcbff&sourceContentId="+d.sourcecontentid+"&sourceContentTypeId="+d.sourcecontenttypeid;return!1})}};return{}},jQuery,window);r("component.feature",["module.ui"],
function(b,e,g,m){e.telligent.evolution.ui.components.feature={setup:function(){e.telligent.evolution.messaging.subscribe("ui-feature",function(b){(b.typeId?e('.ui-feature[data-contentid="'+b.contentId+'"][data-contenttypeid="'+b.contentTypeId+'"][data-typeid="'+b.typeId+'"]'):e('.ui-feature[data-contentid="'+b.contentId+'"][data-contenttypeid="'+b.contentTypeId+'"]')).attr("data-value",b.value.toString())},{excludeAutoNameSpaces:!0})},add:function(b,f){b.empty();var d={contentId:f.contentid,contentTypeId:f.contenttypeid,
typeId:f.typeid,panelUrl:f.panelurl,initialState:"true"==f.value,contentTypeName:f.contenttypename};f.configuration.editFeatureText&&(d.editFeatureText=f.configuration.editFeatureText);f.configuration.addFeatureText&&(d.addFeatureText=f.configuration.addFeatureText);f.configuration.processingText&&(d.processingText=f.configuration.processingText);f.configuration.addFeatureCssClass&&(d.addFeatureCssClass=f.configuration.addFeatureCssClass);f.configuration.editFeatureCssClass&&(d.editFeatureCssClass=
f.configuration.editFeatureCssClass);f.configuration.processingCssClass&&(d.processingCssClass=f.configuration.processingCssClass);e(b).evolutionFeature(d)}};return{}},jQuery,window);r("component.forumqualityvotes",["module.ui","module.messaging"],function(b,e,g,m,n){function f(c){var k=g.extend({},a.defaults,c||{}),d=g.telligent.evolution.template.compile(k.votersTemplate),b=g.telligent.evolution.template.compile(k.votersPopupTemplate),q=function(a,c,h){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/forums/threads/{ThreadId}/votes.json",data:{ThreadId:a.id,VoteType:"Quality",PageSize:a.pageSize,PageIndex:c,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:c||0},cache:!1,dataType:"json"}).then(function(a){a.Votes=a.ForumThreadVotes;g.telligent.evolution.batch(function(){g.each(a.Votes,function(a,c){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:c.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){c.userAvatarHtml=
a.Html})})}).then(function(){h({voters:g.map(a.Votes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},h=function(a,c){var h=0,f=g(d(g.extend(a,{noVotesText:l.noVotesText}))),x=g.telligent.evolution.ui.data(g(c).closest(k.delegatedSelector)),e=g(b({voters:f,hasMorePages:a.hasMorePages,showMoreText:k.modalShowMoreText})),n=e.find("ul"),A=e.find(".show-more");n.html(f);A.on("click",
function(a){a.preventDefault();h++;q(x,h,function(a){n.append(d(a));a.hasMorePages?A.show():A.hide();n.scrollTop(n[0].scrollHeight)})});g.glowModal({title:k.modalTitleText,html:e,width:450,height:"100%"})};(function(){g(k.containerSelector).on("click",k.popupSelector,function(a){a.preventDefault();var c=g(this);a=g.telligent.evolution.ui.data(g(c).closest(k.delegatedSelector));q(a,0,function(a){h(a,c)});return!1})})()}function d(a){return g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a,VoteType:"Quality"}}).then(function(a){return null==a.ForumThreadVote?null:a.ForumThreadVote.Value})}var l={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',voteTemplate:' <div class="thread-vote updownvote">  \t  <span class="vote-indicator ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= tipTextThread %></span>      <a href="#" class="vote up ui-tip <% if(voted == "true") { %>selected<% } %>" data-tip="<%= upvoteText %>" data-messagename="ui.forumqualityvotes.vote.message" data-threadid="<%= id %>" data-value="true"><%= upvoteText %></a>      <span class="score ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= scoreformatted %></span>      <a href="#" class="vote down ui-tip <% if(voted == "false") { %>selected<% } %>" data-tip="<%= downvoteText %>" data-messagename="ui.forumqualityvotes.vote.message" data-threadid="<%= id %>" data-value="false"><%= downvoteText %></a>  </div> ',
anonymousVoteTemplate:' <div class="thread-vote updownvote">  \t  <span class="vote-indicator ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= tipTextThread %></span>      <a href="<%= loginurl %>" class="vote up ui-tip" data-tip="<%= logintext %>"><%= logintext %></a>      <span class="score ui-tip voter-popup" data-tip="<%= tipTextThread %>"><%= scoreformatted %></span>      <a href="<%= loginurl %>" class="vote down ui-tip" data-tip="<%= logintext %>"><%= logintext %></a>  </div> ',noVotesText:"No Votes",
modalTitleText:"People who voted on this thread",tipTextThread:"View Voters",modalShowMoreText:"More",containerSelector:".content-fragment",delegatedSelector:".ui-forumqualityvotes",popupSelector:".voter-popup",upVoteText:"Vote Up",downVoteText:"Vote Down",logintext:"Login to vote on this thread",loginurl:""},a={setup:function(){f({})},add:function(c,k){c=g(this);var p=g.extend({},a.defaults,k||{});k.loginurl&&""!=k.loginurl?(anonymousVoteTemplate=g.telligent.evolution.template.compile(p.anonymousVoteTemplate),
c.html(g(anonymousVoteTemplate(g.extend(k,{id:k.id,tipTextThread:l.tipTextThread,score:k.score,scoreformatted:0<k.score?"+"+k.score:k.score,logintext:l.logintext,loginurl:k.loginurl}))))):(voteTemplate=g.telligent.evolution.template.compile(p.voteTemplate),c.html(g(voteTemplate(g.extend(k,{id:k.id,voted:k.voted,tipTextThread:l.tipTextThread,upvoteText:p.upVoteText,score:k.score,scoreformatted:0<k.score?"+"+k.score:k.score,downvoteText:p.downVoteText})))),e.subscribe("ui.forumqualityvotes.vote.message",
function(a){a=g(a.target);g.fn.evolutionTip.hide();a.hasClass("selected")?g.telligent.evolution.del({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a.data("threadid"),VoteType:"Quality"}}):g.telligent.evolution.post({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/vote.json",data:{ThreadId:a.data("threadid"),VoteType:"Quality",Value:a.data("value")}})}));e.subscribe("forumThread.voted",function(a){if(c.data("id")==
a.threadId&&"Quality"==a.voteType){var k=c;if(0<k.length){var h=k.find(".thread-vote .vote.up"),p=k.find(".thread-vote .vote.down"),b=k.find(".thread-vote .score"),l=0<a.count?"+"+a.count:a.count;b.html(l);k.attr("data-score",l).attr("data-scoreformatted",l);d(a.threadId).then(function(a){null==a?(h.removeClass("selected"),p.removeClass("selected"),k.attr("data-value","")):a?(h.addClass("selected"),p.removeClass("selected"),k.attr("data-value",a)):a||(h.removeClass("selected"),p.addClass("selected"),
k.attr("data-value",a))})}}});p=g.map((k.presentservices||"").split(","),function(a){a=a.split("|");var c={};2<=a.length&&(c={ContentId:a[0],ContentTypeId:a[1]},2<a.length&&(c.TypeId=a[2]));return c});g.telligent.evolution.presence.register({node:c.get(0),contents:p})},defaults:l};g.telligent.evolution.ui.components.forumqualityvotes=a;return{}},jQuery,window);r("component.forumvotes",["module.ui","module.messaging"],function(b,e,g,m,n){function f(a){var c=g.extend({},l.defaults,a||{}),k=g.telligent.evolution.template.compile(c.votersTemplate),
p=g.telligent.evolution.template.compile(c.votersPopupTemplate),b=function(a,c,k){("thread"==a.type?g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/{ThreadId}/votes.json",data:{ThreadId:a.id,PageSize:a.pageSize,PageIndex:c,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:c||0},cache:!1,dataType:"json"}):g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/forums/threads/replies/{ReplyId}/votes.json",
data:{ReplyId:a.id,PageSize:a.pageSize,PageIndex:c,SortBy:"Date",SortOrder:"Descending",PageSize:a.pageSize||20,PageIndex:c||0},cache:!1,dataType:"json"})).then(function(a){a.Votes=a.ForumThreadVotes||a.ForumReplyVotes;g.telligent.evolution.batch(function(){g.each(a.Votes,function(a,c){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:c.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){c.userAvatarHtml=
a.Html})})}).then(function(){k({voters:g.map(a.Votes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},q=function(a,l){var q=0,f=g(k(g.extend(a,{noVotesText:d.noVotesText}))),e=g.telligent.evolution.ui.data(g(l).closest(c.delegatedSelector)),x=g(p({voters:f,hasMorePages:a.hasMorePages,showMoreText:c.modalShowMoreText})),n=x.find("ul"),z=x.find(".show-more");n.html(f);z.on("click",
function(a){a.preventDefault();q++;b(e,q,function(a){n.append(k(a));a.hasMorePages?z.show():z.hide();n.scrollTop(n[0].scrollHeight)})});g.glowModal({title:"thread"==e.type?c.modalTitleTextThread:c.modalTitleTextReply,html:x,width:450,height:"100%"})};(function(){g(c.containerSelector).on("click",c.delegatedSelector,function(a){a.preventDefault();var k=g(this);a=g.telligent.evolution.ui.data(g(k).closest(c.delegatedSelector));b(a,0,function(a){q(a,k)});return!1})})()}var d={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',noVotesText:"No Votes",modalTitleTextThread:"People who had this question",modalTitleTextReply:"People helped by this answer",modalShowMoreText:"More",containerSelector:".content-fragment",delegatedSelector:".ui-forumvotes"},
l={setup:function(){f({})},add:function(a,c){a.attr("data-tip","thread"==c.type?l.defaults.modalTitleTextThread:l.defaults.modalTitleTextReply).addClass("ui-tip");e.subscribe("ui-forumvote",function(k){if(k.id==c.id&&k.type==c.type){var d=0<k.count?"+"+k.count:k.count;g(a).html(d).attr("data-count",d);k.voted?g(a).attr("data-voted","true"):g(a).attr("data-voted","false")}});e.subscribe("forumThread.voted",function(c){c.threadId==g(a).data("id")&&"Interest"==c.voteType&&(c=0<c.count?"+"+c.count:c.count,
g(a).html(c).attr("data-count",c))});var k=g.map((c.presentservices||"").split(","),function(a){a=a.split("|");var c={};2<=a.length&&(c={ContentId:a[0],ContentTypeId:a[1]},2<a.length&&(c.TypeId=a[2]));return c});g.telligent.evolution.presence.register({node:a.get(0),contents:k})},defaults:d};g.telligent.evolution.ui.components.forumvotes=l;return{}},jQuery,window);r("component.html",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.html={setup:function(){},add:function(b,f){var d=
{};e(b).is("textarea")&&!e(b).data("_html_init")&&(e(b).data("_html_init",!0),f.width&&(d.width=f.width),f.height&&(d.height=f.height),f.contenttypeid&&(d.contentTypeId=f.contenttypeid),f.placeholder&&(d.placeholder=f.placeholder),f.enablefileupload&&(d.enableFileUpload="true"===f.enablefileupload?!0:!1),f.submittable&&(d.submittable="true"===f.submittable?!0:!1),f.entertosubmitprompt&&(d.enterToSubmitPrompt=f.entertosubmitprompt),f.submitlabel&&(d.submitLabel=f.submitlabel),f.beforesubmithtml&&(d.beforeSubmitHtml=
f.beforesubmithtml),f.aftersubmithtml&&(d.afterSubmitHtml=f.aftersubmithtml),f.autoresize&&(d.autoResize="true"===f.autoresize?!0:!1),f.enableentertosubmittoggle&&(d.enableEnterToSubmitToggle="true"===f.enableentertosubmittoggle?!0:!1),e(b).evolutionHtmlEditor(d))}};return{}},jQuery,window);r("component.like",["module.ui","module.messaging"],function(b,e,g,m,n){var f=function(d,b,a,c){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,
ContentTypeId:b,TypeId:a,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:!1,dataType:"json",success:function(a){c.call(this,{count:a.TotalCount,latestLike:0<a.Likes.length?a.Likes[0]:null})}})};g.telligent.evolution.ui.components.like={setup:function(){g.telligent.evolution.messaging.subscribe("ui.like",function(d){(d.typeId?g('.ui-like[data-contentid="'+d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"][data-configuration*="LikeTypeId='+d.typeId+'"]'):g('.ui-like[data-contentid="'+
d.contentId+'"][data-contenttypeid="'+d.contentTypeId+'"]')).attr("data-initialstate",d.liked.toString()).attr("data-initialcount",d.count.toString()).attr("data-initialmessage",d.message.toString())},{excludeAutoNameSpaces:!0});g.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",onList:function(d,b,a,c,k,p){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:d,ContentTypeId:b,TypeId:a,SortBy:"Date",
SortOrder:"Descending",PageSize:k||20,PageIndex:p||0},cache:!1,dataType:"json",success:function(a){g.telligent.evolution.batch(function(){g.each(a.Likes,function(a,c){g.telligent.evolution.get({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:c.User.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){c.userAvatarHtml=a.Html})})}).then(function(){c({likers:g.map(a.Likes,function(a){return{displayName:a.User.DisplayName,profileUrl:a.User.ProfileUrl,
avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})}})},onOptions:function(d){d=g.telligent.evolution.ui.data(d);return{contentId:d.contentid,contentTypeId:d.contenttypeid,typeId:d.configuration.LikeTypeId}}})},add:function(d,b){var a="true"===b.readonly;g(d).evolutionLike({contentId:b.contentid,contentTypeId:b.contenttypeid,initialState:b.initialstate,initialMessage:b.initialmessage,initialCount:b.initialcount,format:a?b.format.replace("{toggle}",""):b.format,
typeId:b.configuration.LikeTypeId,onLike:function(a,k,d,b){g.fn.evolutionTip.hide();var l={ContentId:a,ContentTypeId:k};null!==d&&0<d.length&&(l.TypeId=d);g.telligent.evolution.post({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:l,cache:!1,dataType:"json",success:function(h){f(a,k,d,b)}})},onUnlike:function(a,k,d,b){g.fn.evolutionTip.hide();var l={ContentId:a};null!==d&&0<d.length&&(l.TypeId=d);g.telligent.evolution.del({url:g.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",
data:l,cache:!1,dataType:"json",success:function(h){f(a,k,d,b)}})}})}};return{}},jQuery,window);r("component.links",["module.ui","lib.dynamicLinks","lib.sheetProvider","lib.util"],function(b,e,g,m,n,f,d){function l(k,h,d){!0===k.data("linkshown")?(k.data("linkshown",!1),k.off(".uilinks"),n.fn.uilinks.hide()):(n.telligent.evolution.messaging.publish(s.show),n(window).width()<v.minWidth?c(h,d):a(k,h))}function a(a,c){function k(){m.isOverElement(h)||m.isOverElement(a)||(n.fn.uilinks.hide(),a.data("linkshown",
!1))}a.css({position:"relative "});for(var h=n(document.createElement("ul")),d=0;d<c.length;d++){var b=n(document.createElement("li"));b.append(n(c[d].element).css("float","none").get(0));h.append(b)}w||(w=n("<div></div>").glowPopUpPanel({cssClass:"links-popup-panel",zIndex:1500,hideOnDocumentClick:!0,position:"updown"}));a.off(".uilinks").on("glowDelayedMouseLeave.uilinks",500,k);w.glowPopUpPanel("hide",!0).glowPopUpPanel("html",h).one("glowPopUpPanelShown",function(){a.data("linkshown",!0);h.on("glowDelayedMouseLeave",
500,k)}).one("glowPopUpPanelHidden",function(){a.data("linkshown",!1)}).off(".uilinks").on("glowPopUpPanelShowing.uilinks",function(c,k){a.addClass("links-expanded").attr("data-position",k.position)}).on("glowPopUpPanelHiding.uilinks",function(c,k){a.removeClass("links-expanded").attr("data-position","")}).glowPopUpPanel("show",a)}function c(a,c){var h=a.slice(0);h.push(c);g.actionSheet.show({links:n.map(h,function(a){return a.element})});g.actionSheet.content().on("click","a",function(a){g.actionSheet.hide()});
c.element.on("click",function(a){a.preventDefault();g.actionSheet.hide();n.telligent.evolution.messaging.publish(s.hide);return!1});var d=n.telligent.evolution.messaging.subscribe("sheet.closed",function(){n.each(a,function(a,c){k(n(c.element))});n.telligent.evolution.messaging.unsubscribe(d)},{excludeAutoNameSpaces:!0})}function k(a){a.is('[class^="ui-"]')&&!a.hasClass("ui-tourtip")?a.empty().remove():a.detach()}function p(a,c,k){clearTimeout(a.reflowWaitTimeout);n(f).width()<c.width()?(a.reflowWaitCheckCount++,
10>a.reflowWaitCheckCount&&(a.reflowWaitTimeout=setTimeout(function(){p(a,c,k)},250))):k.render()}function u(a,c){var d=a.find("> li, > ul > li"),b=c.maxlinks,p=c.minlinks,f=null;a.removeClass("ui-links");var w={parent:a,links:[],onShowMore:function(a,c){l(f,a,c)}};b&&(w.maxLinks=parseInt(b,10));p&&(w.minLinks=parseInt(p,10));w.direction=c.direction;for(b=0;b<d.length;b++){var p=n(d[b]),g=p.children();k(g);var u=g.is("[data-selected]");g.is("[data-more]")?(f=g,w.moreLink={element:g,selected:u,className:p.get(0).className}):
g.is("[data-cancel]")?w.cancelLink={element:g,selected:u,className:p.get(0).className}:w.links.push({element:g,selected:u,className:p.get(0).className})}w.onLinksChange=function(c){n.telligent.evolution.messaging.publish(s.change,n.extend({},c,{target:a}))};a.empty();var I=new e(w);a.show();c.reflowWaitCheckCount=0;c.reflowWaitTimeout=null;var J=m.scrollParent(a);m.isPartiallyVisible(J,a)?q(a,c,I):(v.delayedInits.push({container:J,attempt:function(){return m.isInDom(a)?!c.finalized&&m.isPartiallyVisible(J,
a)?(q(a,c,I),!1):!0:!1}}),h(J))}function q(a,c,k){c.finalized=!0;p(c,a,k);a.data("_dynamic_links",k);var h=function(c,d){m.isInDom(a)?d.oldWidth!=d.newWidth&&k.render():n(window).off("resized",h)};c=a.closest(".layout-region");if(0<c.length)c.on("resized",h);else n(window).on("resized",h);a.on("content-resized",function(){k.render()});var d=n.telligent.evolution.messaging.subscribe("mobile.orientationchange",function(){m.isInDom(a)?f.setTimeout(function(){k.render()},300):n.telligent.evolution.messaging.unsubscribe(d)},
{excludeAutoNameSpaces:!0})}function h(a){a.data("_delayed_uilinks_monitored")||(a.data("_delayed_uilinks_monitored",!0),a.on("scroll._delayed_uilinks",m.requestAnimationFrameThrottle(n.fn.uilinks.forceRender)),a.on("resized._delayed_uilinks",m.requestAnimationFrameThrottle(n.fn.uilinks.forceRender)),v.delayedInitContainers.push(a))}var w,s={show:"ui.links.show",hide:"ui.links.hide",change:"ui.links.change"};n.fn.uilinks=function(){var a=this.data("_dynamic_links"),c=Array.prototype.slice.call(arguments,
0),k=c[0];if(!a)return this;if("add"==k)return k=c[1],c=n.extend({},{className:null,selected:!1},c[2]||{}),a.addLink({element:k,className:c.className,selected:c.selected}).element;if("insert"==k){var k=c[1],h=c[2],c=n.extend({},{className:null,selected:!1},c[3]||{});return a.addLink({element:k,className:c.className,selected:c.selected},h).element}if("remove"==k)a.removeLink(c[1]);else if("show"==k)c=c[1]||a.moreLink().element,l(c,a.links(!0),a.cancelLink());else if("hide"==k)n.fn.uilinks.hide();else if("resize"==
k)a.resize();else{if("isVisible"==k)return k=c[1],a.isVisible(k);if("update"==k)return k=c[1],c=n.extend({},{index:null,className:null,selected:null},c[2]||{}),a.update(k,c);if("links"==k)return n.map(a.links(),function(a){return a.element});if("list"==k)return c=c[1]||{},a.links(c&&!0===c.hidden);"reconfigure"==k&&(k=c[1]||{},h=b.data(this),c={},h.minlinks&&(c.minLinks=h.minlinks),h.maxlinks&&(c.maxLinks=h.maxlinks),h.direction&&(c.direction=h.direction),n.extend(c,k),a.reconfigure(c))}return this};
n.fn.uilinks.hide=function(){n.telligent.evolution.messaging.publish(s.hide);g.actionSheet.hide();w&&w.glowPopUpPanel("hide")};n.fn.uilinks.forceRender=function(){var a=[];if(v.delayedInits)for(var c=0;c<v.delayedInits.length;c++)v.delayedInits[c].attempt()||a.push(c);a.reverse();for(c=0;c<a.length;c++)v.delayedInits&&v.delayedInits.splice(a[c],1);if((!v.delayedInits||0===v.delayedInits.length)&&v.delayedInitContainers)for(a=0;a<v.delayedInitContainers.length;a++)v.delayedInitContainers[a].off("._delayed_uilinks").data("_delayed_uilinks_monitored",
!1)};var v={setup:function(){v.delayedInits=[];v.delayedInitContainers=[]},add:function(a,c){a=n(a);u(a,c)},minWidth:570};n.telligent=n.telligent||{};n.telligent.evolution=n.telligent.evolution||{};n.telligent.evolution.ui=n.telligent.evolution.ui||{};n.telligent.evolution.ui.components=n.telligent.evolution.ui.components||{};return n.telligent.evolution.ui.components.links=v},jQuery,window);r("component.loading",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.loading={setup:function(){},
add:function(b,f){function d(){var l=b.css("color");if(l){var a=parseInt(f.width,10);isNaN(a)&&(a=48);var c=parseInt(f.height,10);isNaN(c)&&(c=48);var k=Math.min(a/3,c);b.css({display:"block",width:a+"px",height:c+"px",margin:"0 auto",padding:(c-k)/2+"px 0","text-align":"center","box-sizing":"border-box"}).html(e(['<div class="spinner"><div class="bounce1" style="width:',k,"px;height:",k,"px;background-color:",l,';"></div><div class="bounce2" style="width:',k,"px;height:",k,"px;background-color:",
l,';"></div><div class="bounce3" style="width:',k,"px;height:",k,"px;background-color:",l,';"></div></div>'].join("")))}else g.setTimeout(function(){d()},50)}d()}};return{}},jQuery,window);r("component.masonry",["module.ui","plugin.evolutionMasonry"],function(b,e,g,m,n){b={setup:function(){},add:function(b,d){g(b).data("_evolutionMasonry")||(g(b).data("_evolutionMasonry",!0),g(b).evolutionMasonry({columnClass:d.columnclass||g.fn.evolutionMasonry.defaults.columnClass}).css({visibility:"visible"}))}};
g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=g.telligent.evolution.ui.components||{};return g.telligent.evolution.ui.components.masonry=b},jQuery,window);r("component.moderate",["module.ui"],function(b,e,g,m){var n=function(b,d,l){e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:b,ContentTypeId:d},cache:!1,dataType:"json",
success:function(a){l(a)}})};e.telligent.evolution.ui.components.moderate={setup:function(){},add:function(b,d){b=e(b);var l={contentId:d.contentid,contentTypeId:d.contenttypeid,supportsAbuse:"true"===d.supportsabuse,initialState:"true"===d.initialstate,onReport:n};if(d.configuration&&d.configuration.AdditionalLinks){var a=JSON.parse(d.configuration.AdditionalLinks);if(!l.supportsAbuse&&0===a.length)return;l.onGetAdditionalLinks=function(c){c(a)}}else if(d.configuration&&d.configuration.AdditionalLinksUrl){if(!l.supportsAbuse&&
0===d.configuration.AdditionalLinksUrl.length)return;l.onGetAdditionalLinks=function(a){e.telligent.evolution.get({url:d.configuration.AdditionalLinksUrl,cache:!1,dataType:"json",success:function(k){a(k.links||[])}})}}if(l.supportsAbuse||l.onGetAdditionalLinks)d.configuration&&d.configuration.LinkClassName&&(l.linkClassName=d.configuration.LinkClassName),b.evolutionModerate(l)}};return{}},jQuery,window);r("component.page",["module.ui"],function(b,e,g,m){var n={};e.telligent.evolution.ui.components.page=
{setup:function(){},add:function(b,d){var l={currentPage:parseInt(d.currentpage,10),pageSize:parseInt(d.pagesize,10),totalItems:parseInt(d.totalitems,10),showPrevious:"undefined"===typeof d.configuration.ShowPrevious?!1:"true"===d.configuration.ShowPrevious,showNext:"undefined"===typeof d.configuration.ShowNext?!1:"true"===d.configuration.ShowNext,showFirst:"undefined"===typeof d.configuration.ShowFirst?!0:"true"===d.configuration.ShowFirst,showLast:"undefined"===typeof d.configuration.ShowLast?!0:
"true"===d.configuration.ShowLast,showIndividualPages:"undefined"===typeof d.configuration.ShowIndividualPages?!0:"true"===d.configuration.ShowIndividualPages,numberOfPagesToDisplay:"undefined"===typeof d.configuration.NumberOfPagesToDisplay?5:parseInt(d.configuration.NumberOfPagesToDisplay,10),pageKey:d.pagekey,hash:d.configuration.Target,baseUrl:d.configuration.BaseUrl||window.location.href,template:"undefined"!==typeof d.configuration.Template?d.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
d.pagedcontenturl&&(n[d.pagedcontentpagingevent]={onPage:function(a,c,b){b=b||{};b[d.pagekey]=a;a=e.telligent.evolution.url.modify({url:d.pagedcontenturl,query:b});e.telligent.evolution.get({url:a,cache:!1,success:function(a){c(a)}})}},e.extend(l,{onPage:function(a,c,b){n[d.pagedcontentpagingevent].onPage(a,c,b)},refreshOnAnyHashChange:"true"===d.loadonanyhashchange,pagedContentContainer:"#"+d.pagedcontentwrapperid,pagedContentPagingEvent:d.pagedcontentpagingevent,pagedContentPagedEvent:d.pagedcontentpagedevent,
transition:d.configuration.Transition,transitionDuration:"undefined"===typeof d.configuration.TransitionDuration?200:parseInt(d.configuration.TransitionDuration,10)}));e(b).evolutionPager(l);if("true"===d.loadingindicator){var a=e("#"+d.pagedcontentwrapperid),c=e("<div></div>").css({backgroundColor:"#fff",position:"absolute",opacity:0.75,zIndex:1});e.telligent.evolution.messaging.subscribe(d.pagedcontentpagingevent,function(){var k=a.offset();c.hide().appendTo("body").css({width:a.width(),height:a.height(),
top:k.top,left:k.left}).show()});e.telligent.evolution.messaging.subscribe(d.pagedcontentpagedevent,function(){c.hide()})}}};return{}},jQuery,window);r("component.contentpeek",function(b,e,g){function m(){var f=b.telligent.evolution.theme.getReflowBreakpoint();return null!==f&&b(e).width()<f}var n;b.telligent.evolution.ui.components.contentpeek={setup:function(){if(!m())b(document).on("glowDelayedMouseEnter",".ui-contentpeek",500,function(){n=b(this);b.telligent.evolution.messaging.publish("contentPeek.show",
{contentTypeId:n.data("contenttypeid"),contentId:n.data("contentid"),element:this})}).on("glowDelayedMouseLeave",".ui-contentpeek",250,function(f){n=b(this);f.stopPropagation();b.telligent.evolution.messaging.publish("contentPeek.hide",{contentTypeId:n.data("contenttypeid"),contentId:n.data("contentid"),element:this})})},add:function(b,d){}};return{}},jQuery,window);r("component.poll",["module.ui"],function(b,e,g,m){var n="Vote",f="Voting Ends: {0}",d="View Results",l="Voting Ended: {0}",a="Your vote was received, check back when the poll expires to view the result.",
c="Total Votes : {0}",k="You voted for '{0}'.",p="User Vote Report",u="Vote",q="You have already voted for '{0}'.",h="Please login to vote",w=function(a,c,k){var h=a.data("pollview");"vote"!=h&&("results"!=h?(h=v(a,c,k),a.data("pollview","vote"),a.html(h)):k.canShowResults&&e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c.Id+"/summary.json",cache:!1,success:function(h){h=s(a,c,h.VoteSummary,k);a.data("pollview","results");a.html(h)}}))},s=function(a,h,d,
b){a=e("<div></div>").addClass("poll results");var q=0,s=e("<div></div>").addClass("poll-header"),w=e('<div class="poll-content"></div>'),x=e('<ul class="poll-answers-container"><ul>');s.append(e("<h4></h4>").addClass("poll-question").html(h.Question));a.append(s);h.RenderedDescription&&w.append(e("<div></div>").addClass("poll-description").html(h.RenderedDescription));e.each(d.Summary,function(a,c){q+=d.Summary[a].VoteCount});e.each(d.Summary,function(a,c){var k=d.Summary[a],h=0==q?0:Math.round(k.VoteCount*
(100/q));x.append(e('<li><div class="poll-answer">'+k.PollOption.Option+' <span class="poll-result-value">'+h+'%</span></div><div class="poll-graph-container"><div class="poll-graph" style="width:'+h+'%;"></div></div></li>').attr("data-polloptionid",k.PollOption.OptionId))});w.append(x);a.append(w);s=e('<div class="poll-footer"></div>');w=e('<ul class="poll-footer-attributes"></ul>');if(null!=b.expiredDate){var v=new Date>b.expiredDate?l:f,t=e("<li></li>").addClass("poll-expires");w.append(t);e.telligent.evolution.language.formatDateAndTime(new Date(b.expiredDate),
function(a){t.html(v.replace("{0}",a))})}var n=e("<li></li>");w.append(n);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+h.Id+"/vote.json",cache:!1,success:function(a){if(null==a.Errors){if(a.OptionId){var c=null;e.each(h.Options,function(k,h){h.OptionId==a.OptionId&&(c=h.Option)});c?(x.find('li[data-polloptionid="'+a.OptionId+'"]').addClass("selected"),n.addClass("poll-voted").html(k.replace("{0}",c))):n.remove()}}else n.remove()}});w.append(e("<li></li>").addClass("poll-votecount").html(c.replace("{0}",
q)));b.canVote&&w.append(e("<li></li>").html('<a href="javascript:void(0)" class="poll-view-vote">'+u+"</a>"));b.reporturl&&(b=e("<li></li>").addClass("poll-report").html(e("<a></a>").attr("href",b.reporturl).html(p)),w.append(b));s.append(w);a.append(s);return a},v=function(a,k,b){a=e("<div></div>").addClass("poll voting").css("visibility","none");var l=e.telligent.evolution.user.accessing.isSystemAccount,s=e("<div></div>").addClass("poll-header"),w=e('<div class="poll-content"></div>'),x=e('<ul class="poll-answers-container"></ul>');
s.append(e("<h4></h4>").addClass("poll-question").html(k.Question));a.append(s);k.RenderedDescription&&w.append(e("<div></div>").addClass("poll-description").html(k.RenderedDescription));e.each(k.Options,function(a,c){var h=e("<li></li>"),d=e("<span></span>").addClass("poll-input").html(e('<input type="radio" />').val(c.OptionId).attr("name",k.Id).addClass("options-"+k.Id).attr("id",k.Id+"-"+c.OptionId)),p=e('<label for="'+k.Id+"-"+c.OptionId+'"></label>').addClass("poll-answer").html(c.Option);b.readOnly||
h.append(d);h.append(p);x.append(h)});w.append(x);b.canVote&&w.append(e('<a href="#"></a>').addClass("button poll-vote").html(n));a.append(w);var s=e('<div class="poll-footer"></div>'),v=e('<ul class="poll-footer-attributes"></ul>');if(null!=k.ExpiredDate){var t=e("<li></li>").addClass("poll-expires");v.append(t);e.telligent.evolution.language.formatDateAndTime(new Date(k.ExpiredDate),function(a){t.html(f.replace("{0}",a))})}e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+
k.Id+"/vote.json",cache:!1,success:function(a){if(a.OptionId){var f=null;e.each(k.Options,function(c,k){k.OptionId==a.OptionId&&(f=k.Option)});v.append(e("<li></li>").addClass("poll-alreadyvoted").html(q.replace("{0}",f)))}null==a.Errors?e("#"+k.Id+"-"+a.OptionId).prop("checked",!0):alert(a.Errors);if(b.canShowResults){var s=e("<li></li>").addClass("poll-votecount");v.append(s);v.append(e("<li></li>").html('<a href="javascript:void(0)" class="poll-view-results">'+d+"</a>"));e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+k.Id+"/summary.json",cache:!1,success:function(a){if(null==a.Errors){var k=0;e.each(a.VoteSummary.VoteCount,function(c,h){k+=a.VoteSummary.VoteCount[c]});s.html(c.replace("{0}",k))}else alert(a.Errors)}})}if(l){var w=e("<li></li>").html(e("<a></a>").attr("href",b.loginurl).html(h));v.append(w)}b.reporturl&&(w=e("<li></li>").html(e("<a></a>").attr("href",b.reporturl).html(p)),v.append(w))}});s.append(v);a.append(s);return a},t=function(c,k,h){c.on("click",".poll-view-results",function(){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+k.Id+"/summary.json",success:function(a){null==a.Errors?c.evolutionTransform({opacity:0},{duration:200,complete:function(){var d=s(c,k,a.VoteSummary,h);c.data("pollview","results");c.html(d);c.evolutionTransform({opacity:1},{duration:200})}}):alert(a.Errors)}});return!1});c.on("click",".poll-view-vote",function(){c.evolutionTransform({opacity:0},{duration:200,complete:function(){var a=v(c,k,h);c.data("pollview","vote");c.html(a);c.evolutionTransform({opacity:1},{duration:200})}});
return!1});c.on("click",".button.poll-vote",function(){var d=e(".options-"+k.Id+":checked").val();e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+k.Id+"/vote.json",data:{OptionId:d},success:function(d){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+k.Id+"/summary.json",cache:!1,success:function(a){null==a.Errors?c.evolutionTransform({opacity:0},{duration:200,complete:function(){if(h.showResultsBeforeExpiration||
h.expiredDate>new Date)h.canShowResults=!0;if(h.canShowResults){var d=s(c,k,a.VoteSummary,h);c.data("pollview","results");c.html(d);c.evolutionTransform({opacity:1},{duration:200})}}}):alert(a.Errors)},error:function(c){e.telligent.evolution.notifications.show(a,{type:"success",duration:5E3})}})}});return!1})},x=function(a,c){return e.Deferred(function(k){var h=a.expiresDate&&a.expiredDate<new Date;a.canVote=!a.readOnly&&e.telligent.evolution.user.accessing.isAuthenticated&&!h;e.telligent.evolution.user.accessing.isAuthenticated?
e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/poll/"+c+"/vote.json",cache:!1,success:function(c){a.canShowResults=c.OptionId?a.showResultsBeforeExpiration||h:a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||h);k.resolve(!a.canShowResults)},error:function(){a.canVote=!1;a.canShowResults=a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||h);k.resolve(!0)}}):(a.canShowResults=a.showResultsBeforeVote&&(a.showResultsBeforeExpiration||h),k.resolve(!a.canShowResults))}).promise()},
y=function(b){b&&(b=e.telligent.evolution.url.parseQuery(b),null!=b.voteButton&&(n=b.voteButton),null!=b.expiredText&&(f=b.expiredText),null!=b.viewResults&&(d=b.viewResults),null!=b.alreadyExpiredText&&(l=b.alreadyExpiredText),null!=b.voteMessage&&(a=b.voteMessage),null!=b.voteCountText&&(c=b.voteCountText),null!=b.votedOnText&&(k=b.votedOnText),null!=b.alreadyVotedOnText&&(q=b.alreadyVotedOnText),null!=b.userVoteReport&&(p=b.userVoteReport),null!=b.anonymousUserLoginText&&(h=b.anonymousUserLoginText),
null!=b.viewVote&&(u=b.viewVote))};e.telligent.evolution.ui.components.poll={setup:function(){e.telligent.evolution.messaging.subscribe("socket.connected",function(){if(e.telligent.evolution.sockets.polls)e.telligent.evolution.sockets.polls.on("updated",function(a){e.telligent.evolution.messaging.publish("polls.updated",a)})},{excludeAutoNameSpaces:!0})},add:function(a,c){y(c.resources);var k=c.pollid,h=null;if(k){var d={reporturl:c.reporturl,loginurl:c.loginurl,readOnly:"True"===c.readonly};e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/poll/"+k+".json",success:function(c){c.Poll&&(d.showResultsBeforeExpiration=c.Poll.ShowResultsBeforeExpiration,d.showResultsBeforeVote=c.Poll.ShowResultsBeforeVote,d.expiredDate=null==c.Poll.ExpiredDate?null:e.telligent.evolution.parseDate(c.Poll.ExpiredDate),x(d,k).then(function(b){!b&&d.canShowResults&&a.data("pollview","results");w(a,c.Poll,d);t(a,c.Poll,d);e.telligent.evolution.messaging.subscribe("polls.updated",function(b){k==b.pollId&&(g.clearTimeout(h),h=g.setTimeout(function(){w(a,
c.Poll,d)},1E3))})}))}})}}};return{}},jQuery,window);r("component.presentcontent",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.presentcontent={setup:function(){},add:function(b,f){var d=e.map((f.presentcontents||"").split(","),function(d){d=d.split("|");var a={};2<=d.length&&(a={ContentId:d[0],ContentTypeId:d[1]},2<d.length&&(a.TypeId=d[2]));return a});e.telligent.evolution.presence.register({node:b.get(0),contents:d})}};return{}},jQuery,window);r("component.presentservice",
["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.presentservice={setup:function(){},add:function(b,f){var d=e.map((f.presentservices||"").split(","),function(d){d=d.split("|");var a={};2<=d.length&&(a={ServiceId:d[0]},2<d.length&&(a.TypeId=d[2]));return a});e.telligent.evolution.presence.register({node:b.get(0),services:d})}};return{}},jQuery,window);r("component.previewhtml",["module.ui"],function(b,e,g,m){function n(d,b,a,c){d={url:d,width:0,height:0,outputIsPersisted:!1};b&&
(d.width=b);a&&(d.height=a);c&&(d.outputIsPersisted=c);return e.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/preview.json",data:d})}function f(d,b){var a=d.parent().width();a>b.width&&(a=b.width);n(b.url,a,b.height,b.persist).then(function(a){d.html(a.Html)})}e.telligent.evolution.ui.components.previewhtml={setup:function(){},add:function(d,b){f(d,b);e(window).on("resized",function(){f(d,b)})}};return{}},jQuery,window);r("component.rate",["module.ui"],
function(b,e,g,m){e.telligent.evolution.ui.components.rate={setup:function(){},add:function(b,f){var d=e.extend({},{isReadOnly:"true"===f.readonly,value:parseFloat(f.initialvalue),ratingCount:parseFloat(f.initialcount)});d.value*=e.fn.evolutionStarRating.defaults.maxRating;d.onRate=function(d){f.contentid&&f.contenttypeid&&(d/=e.fn.evolutionStarRating.defaults.maxRating,d={ContentId:f.contentid,ContentTypeId:f.contenttypeid,Value:d},f.ratingtypeid&&(d.TypeId=f.ratingtypeid),e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ratings.json",data:d,success:function(a){a={ContentId:f.contentid};f.ratingtypeid&&(a.TypeId=f.ratingtypeid);e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:a,success:function(a){a&&a.RatedItem&&a.RatedItem.AverageValue?e(b).evolutionStarRating("option",{value:a.RatedItem.AverageValue*e.fn.evolutionStarRating.defaults.maxRating,ratingCount:a.RatedItem.Count}):e(b).evolutionStarRating("option",{value:0,ratingCount:0})}})}}))};0==
d.ratingCount&&d.isReadOnly||e(b).evolutionStarRating(d)}};return{}},jQuery,window);r("component.resizedimage",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.resizedimage={setup:function(){},add:function(b,f){b.removeClass("ui-resizedimage");e.telligent.evolution.media.previewHtml(f.src,{width:f.width||0,height:f.height||0,resizeMethod:f.resizemethod||"ZoomAndCrop",success:function(d){d=e(d.html);d.attr("style")&&b.attr("style",d.attr("style"));b.attr("src",d.attr("src"))}})}};
return{}},jQuery,window);r("component.scheduledfile",["module.ui","module.messaging"],function(b,e,g,m,n){function f(b){e.subscribe("scheduledFile.complete","messages-"+b.progressKey,function(a){a.progressKey===b.progressKey&&(b.indicator.evolutionProgressIndicator("complete",a),d(b))});e.subscribe("scheduledFile.error","messages-"+b.progressKey,function(a){a.progressKey===b.progressKey&&(b.indicator.evolutionProgressIndicator("error",a?a.message:null),d(b))});e.subscribe("scheduledFile.progress",
"messages-"+b.progressKey,function(a){a.progressKey===b.progressKey&&b.indicator.evolutionProgressIndicator("progress",a)})}function d(d){setTimeout(function(){e.unsubscribe("messages-"+d.progressKey)},100)}g.telligent.evolution.ui.components.scheduledfile={setup:function(){},add:function(d,a){g.telligent.evolution.presence.register({node:g("body"),services:[{ServiceId:a.presenceid}]});g.telligent.evolution.scheduledFile.monitor(a.progresskey,{runAsUserId:a.runasuserid||null,presenceId:a.presenceid||
null});var c=g.extend({},{progressKey:a.progresskey,percentComplete:a.percentcomplete,log:JSON.parse(a.log),indicator:g(d).evolutionProgressIndicator({includePercentComplete:"true"==a.includepercentcomplete,includeLatestMessage:"true"==a.includelatestmessage,includeAllMessages:"true"==a.includeallmessages,warnBeforeUnload:"false"==a.durable,showPending:"scheduled"==a.state})});c.percentComplete&&0<c.percentComplete&&c.indicator.evolutionProgressIndicator("progress",{percentComplete:parseFloat(c.percentComplete)});
if(c.log)for(var k=0;k<c.log.length;k++)c.indicator.evolutionProgressIndicator("progress",{message:c.log[k]});f(c)}};return{}},jQuery,window);r("component.searchresult",["module.ui","module.template"],function(b,e,g,m,n){var f=g.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),d=function(d,a){g.telligent.evolution.get({url:d,dataType:"json",success:function(c){c&&a(f(c))}})};g.telligent.evolution.ui.components.searchresult=
{setup:function(){},add:function(b,a){if(a.detailsurl){var c=null,k=b.find("ul.details"),p=k.html();b.on("mouseenter",function(b){null!==c?k.html(c):d(a.detailsurl,function(a){c=a;k.html(c)})}).on("mouseleave",function(a){k.html(p)})}}};return{}},jQuery,window);r("component.select",["module.ui","module.messaging"],function(b,e,g,m,n){function f(d){if(d.is("select")&&g(window).width()>(g.telligent.evolution.theme.getReflowBreakpoint()||670))if(d.data("renderedUiSelect"))d.hide(),d.data("renderedUiSelect").show();
else{var b="uiselect "+d.get(0).className.replace("ui-select-enabled","");0<d.closest(".view,.filter,.sort").length&&(b+=" options-slim");d.show().glowDropDownList({selectedItemWidth:"auto",selectedItemHeight:"auto",itemsWidth:"auto",itemsHeight:"auto",buttonImageUrl:null,className:b,activeClassName:"active"});b=d.prevAll(".uiselect").first();d.data("renderedUiSelect",b)}else d.show(),(d=d.data("renderedUiSelect"))&&d.hide()}g.telligent.evolution.ui.components.select={setup:function(){e.subscribe("reflow.reflowend",
function(){g(".ui-select-enabled").each(function(){f(g(this))})},{excludeAutoNameSpaces:!0})},add:function(d,b){d.removeClass("ui-select").addClass("ui-select-enabled");f(d)}};return{}},jQuery,window);r("component.squeezetext",["module.ui","plugin.evolutionSqueezeText"],function(b,e,g,m,n){b={setup:function(){},add:function(b,d){g(b).evolutionSqueezeText({minSize:parseFloat(d.minsize)||g.fn.evolutionSqueezeText.defaults.minSize,minSpacing:parseFloat(d.minspacing)||g.fn.evolutionSqueezeText.defaults.minSpacing,
enableSpacing:d.enablespacing!==n?"true"===d.enablespacing:g.fn.evolutionSqueezeText.defaults.enableSpacing,resetOnFailure:d.resetonfailure!==n?"true"===d.resetonfailure:g.fn.evolutionSqueezeText.defaults.resetOnFailure,truncateOnFailure:d.truncateonfailure!==n?"true"===d.truncateonfailure:g.fn.evolutionSqueezeText.defaults.truncateOnFailure,onFailure:function(){g(this).attr("data-tip",g(this).text()).evolutionTip()}})}};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};
g.telligent.evolution.ui=g.telligent.evolution.ui||{};g.telligent.evolution.ui.components=g.telligent.evolution.ui.components||{};return g.telligent.evolution.ui.components.squeezetext=b},jQuery,window);r("component.tag",["module.ui"],function(b,e,g,m){var n=function(b,d,l){var a=e(l);a.html("");if(b){var c=!0;e.each(b.split(/,/),function(k,b){var l=e.trim(b);l&&(c?c=!1:a.append(", "),d?a.append(e("<a>").attr("rel","nofollow tag").attr("href",d.replace(/{tag}/g,e.telligent.evolution.url.encodePathComponent(e.telligent.evolution.html.decode(l)))).text(l)):
a.append(l))})}};e.telligent.evolution.ui.components.tag={setup:function(){},add:function(b,d){var l=jQuery("<span></span>");e(b).append(l);n(d.tags,d.urlformat,l);var a=null;"true"!==d.readonly&&(a=e('<a href="javascript:void(0);" class="internal-link edit-tags"></a>'),e(b).append(a),a.evolutionInlineTagEditor({allTags:e.grep(d.selectabletags.split(","),function(a){return a}),currentTags:e.grep(d.tags.split(","),function(a){return a}),onSave:function(a,k){var b={Tags:a&&0<a.length?a.join(","):"",
ContentId:d.contentid,ContentTypeId:d.contenttypeid};d.tagtypeid&&(b.TypeId=d.tagtypeid);e.telligent.evolution.put({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",data:b,success:function(a){n(b.Tags,d.urlformat,l);k()}})}}))}};return{}},jQuery,window);r("component.theater",["module.ui"],function(b,e,g,m){var n=function(b,d){e.telligent.evolution.get({url:b,cache:!1,success:function(b){d(b)}})};e.telligent.evolution.ui.components.theater={setup:function(){},add:function(b,
d){b=e(b);b.on("click",function(l){!0!==b.data("disabletheater")&&(l.preventDefault(),e.evolutionTheater.show({content:function(a){n(d.theaterurl,a)},loaded:function(a){}}))})}};return{}},jQuery,window);r("component.tip",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.tip={setup:function(){},add:function(b,f){e(b).evolutionTip({attribute:f.tipcontent||e.fn.evolutionTip.defaults.attribute,horizontal:f.tiphorizontal,vertical:f.tipvertical})}};return{}},jQuery,window);r("component.tourtip",
["module.ui","module.tourtips"],function(b,e,g,m,n){g.telligent.evolution.ui.components.tourtip={setup:function(){},add:function(b,d){g.telligent.evolution.tourTips.register({key:d.tourtipkey,message:d.tourtipmessage,index:d.tourtipindex,element:b.get(0)})}};return{}},jQuery,window);r("component.userpresence",["module.ui","module.messaging","lib.util"],function(b,e,g,m,n,f){var d;m.telligent.evolution.ui.components.userpresence={setup:function(){d=m("body")},add:function(b,a){var c=a.presentlabel,
k=a.notpresentlabel;m.telligent.evolution.sockets&&m.telligent.evolution.sockets.presence&&(m.telligent.evolution.presence.register({node:d,contents:[{ContentId:a.contentid,ContentTypeId:a.contenttypeid}]}),e.subscribe("user.presenceChanged",function(d){d&&a.userid==d.userId&&(!0===d.present?b.show().html(c).attr("data-tip",c).addClass("present"):!1===d.present?b.show().html(k).attr("data-tip",k).removeClass("present"):b.hide())}))}};return{}},jQuery,window);r("component.viewhtml",["module.ui","module.messaging"],
function(b,e,g,m,n){function f(a,k,b,d){a={url:a,width:0,height:0,outputIsPersisted:!1};k&&(a.width=k);b&&(a.height=b);d&&(a.outputIsPersisted=d);return g.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/view.json",data:a})}function d(a,k,b){m.clearTimeout(k.reflowWaitTimeout);if("none"==a.css("display")||"none"==a.parent().css("display")||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)m.setTimeout(function(){d(a,
k,b)},499);else if(!b||"viewable"==k.resizedBy){var e=g(m).width(),q=a.parent().width(),h=a.parent().height(),w="parent",s=h;if(e<q)k.reflowWaitCheckCount++,10>k.reflowWaitCheckCount&&(k.reflowWaitTimeout=setTimeout(function(){d(a,k,b)},250));else{0==q&&(q=a.parents(".layout-region-inner").width());q>k.width&&(q=k.width);if(0==h||"parent"!=k.resizedBy||h>l)s=l,h=Math.round(0.8*l),w="viewable";h>k.height&&0<k.height&&(s=h=k.height,w="configured");k.resizedBy=w;if(s!=k.lastHeight||q!=k.lastHeight){var w=
a.width(),v=a.height();if(!(q==k.lastWidth&&s<=k.lastHeight&&(v<=s||0==s)||s==k.lastHeight&&q<=k.lastWidth&&(w<=q||0==q))){var t=[],x=!0;a.children().each(function(){g(this);var a=(this.nodeName||"").toLowerCase();"video"==a||"audio"==a||"embed"==a||"object"==a?t.push(this):"script"!=a&&("style"!=a&&"meta"!=a)&&(x=!1)});x&&0<a.children().length?(g.each(t,function(){var a=g(this),c=a.width()||1,k=a.height()||1;c/q>k/h?a.attr({width:q+"px !important",height:k*q/c+"px !important"}):a.attr({width:c*h/
k+"px !important",height:h+"px !important"})}),a.trigger("rendered")):(""==k.lastHtml&&a.html(g('<div><span class="ui-loading"></span></div>').css({display:"inline-block",width:q?q+"px":0.8*e+"px",height:h?h+"px":0.8*l+"px",display:"flex","align-items":"center","justify-content":"center"})),f(k.url,q,h,k.persist).then(function(b){k.lastHtml!=b.Html&&(a.html(b.Html),k.lastHtml=b.Html,a.trigger("rendered"))}));k.lastHeight=s;k.lastWidth=q}}}}}var l,a=!1;g.telligent.evolution.ui.components.viewhtml=
{setup:function(){l=g(window).height();g(window).on("resized",function(){a||(l=g(window).height())});g.telligent.evolution.messaging.subscribe("window.scrollableheight",function(c){l=c.height;a=!0},{excludeAutoNameSpaces:!0})},add:function(a,k){k.resizedBy="parent";k.lastWidth=-1;k.lastHeight=-1;k.lastHtml="";k.reflowWaitCheckCount=0;k.reflowWaitTimeout=null;d(a,k,!1);g(window).on("resized",function(){d(a,k,!1)});g.telligent.evolution.messaging.subscribe("window.scrollableheight",function(b){d(a,
k,!0)})}};return{}},jQuery,window);r("component.vote",["module.ui"],function(b,e,g,m){function n(b){return e.Deferred(function(l){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ideas/vote.json",data:{IdeaId:b,UserId:e.telligent.evolution.user.accessing.id},error:function(){l.resolve(null)}}).then(function(a){l.resolve(a.Vote.TotalVotes)})}).promise()}function f(b,l,a){a.contentId==b.contentid&&n(a.contentId).then(function(c){e(l).evolutionUpDownVoting("option",
{yesVotes:a.yesVotes,noVotes:a.noVotes,voteCount:a.totalVotes,score:a.score,userVote:c})})}e.telligent.evolution.ui.components.vote={setup:function(){},add:function(b,l){var a=e.extend({},{isReadOnly:"true"===l.readonly,yesVotes:parseInt(l.initialyesvotes),noVotes:parseInt(l.initialnovotes),voteCount:parseInt(l.initialvotes),score:parseInt(l.initialscore),allowMultipleVotes:"true"===l.allowmultiplevotes,userVote:l.initialuservotetotal,canUserUpVote:"true"===l.canuserupvote,canUserDownVote:"true"===
l.canuserdownvote,canViewVotes:"true"===l.canviewvotes,isUserRegistered:"true"===l.isuserregistered,isUserGroupMember:"true"===l.isusergroupmember,loginUrl:l.loginurl,voteUrl:l.voteurl});e.telligent.evolution.messaging.subscribe("ideaVote.created",function(a){f(l,b,a)});e.telligent.evolution.messaging.subscribe("ideaVote.deleted",function(a){f(l,b,a)});a.onVote=function(a,k){l.contentid&&e.telligent.evolution.post({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v3/ideas/vote.json",data:{IdeaId:l.contentid,
Value:k},success:function(a){a&&a.Vote&&a.Vote.Idea?e(b).evolutionUpDownVoting("option",{yesVotes:a.Vote.Idea.YesVotes,noVotes:a.Vote.Idea.NoVotes,voteCount:a.Vote.Idea.TotalVotes,score:a.Vote.Idea.Score,userVote:a.Vote.TotalVotes}):e(b).evolutionUpDownVoting("option",{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:null})}})};a.onDeleteVote=function(){l.contentid&&e.telligent.evolution.del({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ideas/vote.json",data:{IdeaId:l.contentid},success:function(a){e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ideas/idea.json",data:{Id:l.contentid},success:function(a){a&&a.Idea?e(b).evolutionUpDownVoting("option",{yesVotes:a.Idea.YesVotes,noVotes:a.Idea.NoVotes,voteCount:a.Idea.TotalVotes,score:a.Idea.Score,userVote:0}):e(b).evolutionUpDownVoting("option",{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:null})}})}})};0==a.voteCount&&a.isReadOnly||e(b).evolutionUpDownVoting(a)}};return{}},jQuery,window);r("component.webpreview",["module.ui"],function(b,e,g,m){e.telligent.evolution.ui.components.webpreview=
{setup:function(){},add:function(b,f){var d=b.hasClass("preview"),l=f.configuration.url,a,c;"undefined"!==typeof f.configuration.maximagewidth&&(a=f.configuration.maximagewidth);"undefined"!==typeof f.configuration.maximageheight&&(c=f.configuration.maximageheight);d||(b.parents(".ui-theater").data("disabletheater",!0),0>f.configuration.url.indexOf(e.telligent.evolution.site.getBaseUrl(!0))&&b.parents(".ui-theater").attr("target","_blank"));e.telligent.evolution.preview.load(l,{maxImageWidth:a,maxImageHeight:c,
success:function(a){d?b.html(a.previewImageHtml||""):a&&(a.excerpt||a.imageUrl)&&(a=e.telligent.evolution.preview.render(a,{template:e.telligent.evolution.preview.defaults.template}),"undefined"!==typeof a&&(null!==a&&0<a.length)&&b.html(a))}})}};return{}},jQuery,window);r("composers",["composer.hashtags","composer.mentions","composer.urlhighlight","composer.autocomplete"],function(){return{}});r("composer.autocomplete",["plugin.evolutionComposer"],function(b,e,g,m){var n={},f=null,d=function(){};
b=function(){return{init:function(a){d=a.settings.onSuggestionList||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionList;selectSuggestion=a.settings.onSuggestionSelect||e.fn.evolutionComposer.plugins.autocomplete.defaults.onSuggestionSelect;a.input.on(l.selectedEventName,function(){selectSuggestion(l.selection());a.release()})},onTransform:function(a){},shouldActivate:function(a){return(a=a.currentWord())&&a.value&&3<=a.value.length?!0:!1},onActivate:function(a){a.data("_autocomplete_composer_active",
!0);e(document).on("click.autocomplete",function(c){a.release();e(document).off(".autocomplete")})},onDeactivate:function(a){a.data("_autocomplete_composer_active",!1);l.hide();a.input.trigger("focus")},val:function(a,c){return a},onkeydown:function(a,c){if(27===c.which)return a.release(),!1;if(9==c.which)a.release();else{if(13===c.which){var b=l.selection();b&&selectSuggestion(b);a.release();return!1}if(38===c.which)return l.moveHighlightUp(),!1;if(40===c.which)return l.moveHighlightDown(),!1}return!0},
onkeypress:function(a,c){return!0},oninput:function(a,c){clearTimeout(f);l.loading(a.input);f=setTimeout(function(){var c=a.val();if(1<c.length){var b=function(c){null!==c&&0<c.length?l.show(a.input,c,a.settings.suggestionHeader):a.release()};"undefined"!==typeof n[c]?a.data("_autocomplete_composer_active")&&b(n[c]):d(c,function(d){a.data("_autocomplete_composer_active")&&(n[c]=d,a.val()==c&&b(d))})}else a.release()},500);return!0},defaults:{}}}();var l=function(){var a=null,c=null,b=null,d=null,
l=null,q=function(h){d=h;if(null===a){a=e('<div class="composer-suggestion-selector popup-list content"></div>').hide().appendTo(e("body"));b=e('<span class="heading"></span>').appendTo(a);c=e('<ul class="content-list content suggestions"></ul>').appendTo(a);l=e('<li class="loading">...</li>');var q=0,t=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){q+=1;3===q&&(q=0);l.get(0).innerHTML=t[q]},175);a.on("click",
"li",function(c){null!==d&&(a.find("li.highlight").removeClass("highlight"),e(this).addClass("highlight"),d.trigger(f.selectedEventName))})}},h=function(){if(null!==d){var c=d.offset(),b=e(d);a.css({width:b.outerWidth()-2,top:c.top+b.outerHeight()-1,left:c.left})}},f={selectedEventName:"SUGGESTION_SELECTED",show:function(d,p,l){b.html(l);q(d);h();a.hide();c.empty();e.each(p,function(a,b){var h=e('<li class="content-item suggestion">'+b.viewHtml+"</li>");h.data("suggestionData",b);c.append(h)});a.show()},
hide:function(){null!==a&&(a.hide(),c.empty())},loading:function(b){q(b);h();a.hide();c.empty().append(l);a.show()},moveHighlightUp:function(){var c=a.find("li.suggestion");if(0!==c.length){var b=c.length;e.each(c,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});0>b-1&&(b=c.length);e(c.get(b-1)).addClass("highlight")}},moveHighlightDown:function(){var c=a.find("li.suggestion");if(0!==c.length){var b=-1;e.each(c,function(a,c){e(c).hasClass("highlight")&&(b=a,e(c).removeClass("highlight"))});
b+1>=c.length&&(b=-1);e(c.get(b+1)).addClass("highlight")}},selection:function(){var c=a.find("li.suggestion");if(0===c.length)return null;var b=c.filter("li.suggestion.highlight");return null!==b&&0<b.length?b.data("suggestionData"):e(c.get(0)).data("suggestionData")}};return f}();e.fn.evolutionComposer.plugins.autocomplete=b;e.fn.evolutionComposer.plugins.autocomplete.defaults={onSuggestionList:function(a,c){c(null)},onSuggestionSelect:function(a){}};return{}},jQuery,window);r("composer.hashtags",
["plugin.evolutionComposer","lib.globalConfiguration","module.rest"],function(b,e,g,m,n,f){b=function(){for(var b=null,a=!1,c={},k=function(a){var c=a.data("_tagged_tags");if("undefined"===typeof c||null===c)c=[],a.data("_tagged_tags",c);return c},p=function(a){return a.currentWord({additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})},f=function(a,c,b,h,l){var f=k(a)||[];f[f.length]=c;b&&(b=p(a),a.replace(b.start,b.stop+1,c.decodedName+(h?" ":"")),c=b.start+(c.decodedName+(h?" ":"")).length,h=a.input.get(0),
h.setSelectionRange?h.setSelectionRange(c,c):h.createTextRange&&(h=h.createTextRange(),h.collapse(!0),h.moveEnd("character",c),h.moveStart("character",c),h.select()));q(a);a.data("_hashtag_composer_active",!1);d.hide();a.input.trigger("focus");l&&a.release()},q=function(a){var c=k(a).reverse(),b=a.val();a.clearHighlights(a.settings.highlightClass||s);var h={};m.each(c,function(k,d){if(d&&null!==d.decodedName&&0<d.decodedName.length){var p=b.indexOf(d.decodedName);if(0>p||h[p])c.splice(k,1);else for(;0<=
p;)a.addHighlight({start:p,stop:d.decodedName.length+p,className:a.settings.highlightClass||s}),h[p]=!0,p=b.indexOf(d.decodedName,p+1)}});a.renderHighlights()},h=function(a){return 2<a.length&&0===a.indexOf("#")&&!b.test(a.substr(1))&&isNaN(parseInt(a[1],10))},w=function(c){return m.Deferred(function(b){g.get({url:e.baseUrl+"tinymce/apis/hashtags",cache:!0,data:{t:"m",contenttypeid:c||""}}).then(function(c){(a=c&&"true"===c.supported)?b.resolve():b.reject()})["catch"](function(){b.reject()})}).promise()},
s="composer-hashtag-highlight",v=function(){},t=null,x=null,n=/\[tag:([^\]]+)\]/gi,b=RegExp("["+"-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".replace("]","\\]")+"]","i"),z=0;33>z;z++)c["-_~`!@#$%^&*()=+{[}]\\|;:'\",<.>/? ".charCodeAt(z)]=!0;return{init:function(a){w(a.settings.contentTypeId).then(function(){v=a.settings.onTagList||m.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;a.input.on(d.selectedEventName,function(){f(a,d.selection(),!0,!0,!0)});a.input.on("blur",function(){setTimeout(function(){a.data("_hashtag_composer_active")&&
a.release()},500)})})},onTransform:function(a,c){if(c)for(var b=a.val(),h=n.exec(b);null!==h&&0<=h.index&&null!==h&&1<h.length;){var k={token:"[tag:"+h[1]+"]",name:"#"+h[1],decodedName:"#"+m.telligent.evolution.html.decode(h[1])};a.val(a.val().replace(h[0],k.name));f(a,k,!1);h=n.exec(b)}q(a)},shouldActivate:function(c){return a?h(p(c).value):!1},onActivate:function(a){a.data("_hashtag_composer_active",!0);m(document).on("click.ui-composer-hashtags",function(){a.release();m(document).off(".ui-composer-hashtags")})},
onDeactivate:function(a){var c=p(a);h(c.value)&&f(a,{decodedName:c.value,name:c.value,token:"[tag:"+c.value.substr(1)+"]"},!0,!1,!1);a.data("_hashtag_composer_active",!1);d.hide();a.input.trigger("focus")},val:function(c,b){if(!a)return c;var h=k(b);m.each(h,function(a,b){c=c.replace(RegExp(m.telligent.evolution.regex.encode(b.decodedName),"g"),b.token)});return c},onkeydown:function(c,b){if(!a)return!0;if(27===b.which||32===b.which)c.release();else if(13===b.which||9===b.which){var h=d.selection();
if(h)return f(c,h,!0,!0,!0),!1;c.release()}else{if(38===b.which)return d.moveHighlightUp(),!1;if(40===b.which)return d.moveHighlightDown(),!1}return!0},onkeypress:function(b,h){if(!a)return!0;"undefined"!==typeof c[h.which]&&b.release();return!0},oninput:function(c,b){if(!a)return!0;if(!h(p(c).value))return c.release(),!0;if(c.currentWord().value==x&&c.data("_hashtag_composer_active"))return!0;clearTimeout(t);d.loading(c.input);t=setTimeout(function(){var a=x=c.currentWord().value;h(a)?2<=a.length&&
v(a.substr(1),function(b){if(c.data("_hashtag_composer_active")){b&&(b=m.map(b,function(a){return{name:a.name,token:a.token,decodedName:m.telligent.evolution.html.decode(a.name)}}));var k=p(c).value;k==a&&h(k)&&null!==b&&0<b.length?d.show(c.input,b,a):d.hide()}}):c.release()},500);return!0}}}();var d=function(){var b=null,a=null,c=null,k=function(k){a=k;if(null===b){b=m('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(m("body"));c=m('<li class="loading">...</li>');var h=0,d=["<strong>&bull;</strong>&bull;&bull;",
"&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){h+=1;3===h&&(h=0);c.get(0).innerHTML=d[h]},175);b.on("click","li",function(c){null!==a&&(b.find("li.highlight").removeClass("highlight"),m(this).addClass("highlight"),a.trigger(f.selectedEventName))})}},d=function(){if(null!==a){var c=a.offset(),h=m(a);b.css({width:h.outerWidth()-2,top:c.top+h.outerHeight()-1,left:c.left})}},f={selectedEventName:"HASHTAG_SELECTED",show:function(a,c,f){k(a);d();b.hide().empty();
var s=RegExp(m.telligent.evolution.regex.encode(m.telligent.evolution.html.encode(f)),"i");m.each(c,function(a,c){var h=c.name.match(s),h=null!==h?m("<li>"+c.name.replace(s,"<strong>"+h[0]+"</strong>")+"</li>"):m("<li>"+c.name+"</li>");h.data("tagData",c);b.append(h)});b.show()},hide:function(){null!==b&&b.hide().empty()},loading:function(a){k(a);d();b.hide().empty().append(c).show()},moveHighlightUp:function(){var a=b.find("li");if(0!==a.length){var c=a.length;m.each(a,function(a,b){m(b).hasClass("highlight")&&
(c=a,m(b).removeClass("highlight"))});0>c-1&&(c=a.length);m(a.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li");if(0!==a.length){var c=-1;m.each(a,function(a,b){m(b).hasClass("highlight")&&(c=a,m(b).removeClass("highlight"))});c+1>=a.length&&(c=-1);m(a.get(c+1)).addClass("highlight")}},selection:function(){var a=b.find("li");if(0===a.length)return null;var c=a.filter("li.highlight");return null!==c&&0<c.length?c.data("tagData"):m(a.get(0)).data("tagData")}};return f}();
m.fn.evolutionComposer.plugins.hashtags=b;m.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(b,a){m.telligent.evolution.get({url:m.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",data:{QueryText:b,PageSize:5},cache:!1,dataType:"json",success:function(c){c.HashTags&&0<c.HashTags.length?(c=m.map(c.HashTags,function(a){return{name:a.PreviewHtml,token:a.Token}}),a(c)):a(null)}})}};return{}},jQuery,window);r("composer.mentions",["plugin.evolutionComposer",
"lib.globalConfiguration","module.rest"],function(b,e,g,m,n,f){b=function(){var b={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;supported=!1;getMentions=function(a){var c=a.data("_mentioned_mentionables");if("undefined"===typeof c||null===c)c=[],a.data("_mentioned_mentionables",c);return c};setCursorPosition=function(a,c){var b=a.input.get(0);b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveEnd("character",
c),b.moveStart("character",c),b.select())};mentionMentionable=function(a,c,b){var d=getMentions(a)||[];d[d.length]=c;b&&(b=effectiveCurrentWord(a),a.replace(b.start,b.stop+1,c.decodedName+" "),allowedSpaces(a,0),setCursorPosition(a,b.start+(c.decodedName+" ").length));a.release();updateHighlights(a)};updateHighlights=function(a){var c=getMentions(a),b=a.val();a.clearHighlights(a.settings.highlightClass||mentionHighlightClass);m.each(c,function(d,f){if(f&&null!==f.decodedName&&0<f.decodedName.length){var q=
b.indexOf(f.decodedName);if(0>q)c.splice(d,1);else for(;0<=q;)a.addHighlight({start:q,stop:f.decodedName.length+q,className:a.settings.highlightClass||mentionHighlightClass}),q=b.indexOf(f.decodedName,q+1)}});a.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getContent=getMentionablesTimeout=null;allowedSpaces=function(a,c){return"undefined"!==typeof c?(a.data("_allowed_spaces",c),c):a.data("_allowed_spaces")||0};effectiveCurrentWord=
function(a){var c=a.val().substring(0,caretPosition),d=null;m.each(b,function(a,b){if(null!==b&&0<b.length&&c.match("@"+m.telligent.evolution.regex.encode(a)+"$"))return d="@"+a,!1});if(null!==d){var p=c.length-d.length;allowedSpaces(a,d.split(" ").length-1);return{value:d,start:p,stop:p+d.length}}return a.currentWord({caretPosition:caretPosition,allowedWhiteSpaceBeforeCaret:allowedSpaces(a),additionalWhiteSpaceSymbols:"()\"'<>.,".split("")})};collectRawTokens=function(a){for(var c=a.val(),b=[];null!==
(tokens=rToken.exec(c));)b.push({match:tokens,contentTypeId:tokens[2],contentId:tokens[1]});0<b.length&&getContent&&getContent(b,function(c){m.each(c,function(c,b){var h={token:b.match[0],name:b.name,decodedName:m.trim(b.name)};a.val(a.val().replace(h.token,h.name));mentionMentionable(a,h,!1)});a.input.trigger("input")})};initSupported=function(a){return m.Deferred(function(c){g.get({url:e.baseUrl+"tinymce/apis/mentions",cache:!0,data:{t:"m",contenttypeid:a||""}}).then(function(a){(supported=a&&"true"===
a.supported)?c.resolve():c.reject()})["catch"](function(){c.reject()})}).promise()};rToken=/\[mention:([^:]+):([^\]]+)\]/gi;return{init:function(a){initSupported(a.settings.contentTypeId).then(function(){getMentionables=a.settings.onMentionableList||m.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;getContent=a.settings.onListContent||m.fn.evolutionComposer.plugins.mentions.defaults.onListContent;a.input.on(d.selectedEventName,function(){mentionMentionable(a,d.selection(),!0)});a.input.on({blur:function(){setTimeout(function(){a.data(isActiveKey)&&
a.release()},500)},keydown:function(){caretPosition=a.caretPosition()+1}})})},onTransform:function(a,c){c&&collectRawTokens(a);updateHighlights(a)},shouldActivate:function(a){return supported&&0===effectiveCurrentWord(a).value.indexOf("@")},onActivate:function(a){a.data(isActiveKey,!0);m(document).on("click.mentions",function(){a.release();m(document).off(".mentions")})},onDeactivate:function(a){a.data(isActiveKey,!1);d.hide();a.input.trigger("focus");allowedSpaces(a,0)},val:function(a,c){if(!supported)return a;
var b=getMentions(c);m.each(b,function(c,b){a=a.replace(b.decodedName,b.token)});return a},onkeydown:function(a,c){if(!supported)return!0;if(32===c.which)allowedSpaces(a,allowedSpaces(a)+1);else{if(27===c.which)return a.release(),!1;if(13===c.which||9===c.which){var b=d.selection();b?mentionMentionable(a,b,!0):a.release();return!1}if(38===c.which)return d.moveHighlightUp(),!1;if(40===c.which)return d.moveHighlightDown(),!1}return!0},onkeypress:function(a,c){return!0},oninput:function(a,c){if(!supported)return!0;
clearTimeout(getMentionablesTimeout);d.loading(a.input);getMentionablesTimeout=setTimeout(function(){var c=effectiveCurrentWord(a).value.substring(1);if(1<c.length){var p=function(b){null!==b&&0<b.length?d.show(a.input,b,c):a.release()};"undefined"!==typeof b[c]?a.data(isActiveKey)&&p(b[c]):getMentionables(c,function(d){a.data(isActiveKey)&&(d&&(d=m.map(d,function(a){return{name:a.name,token:a.token,decodedName:m.trim(m.telligent.evolution.html.decode(a.name))}})),b[c]=d,effectiveCurrentWord(a).value.substring(1)==
c&&p(d))})}else a.release()},500);return!0}}}();var d=function(){var b=null,a=null,c=null,d=function(d){a=d;if(null===b){b=m('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(m("body"));c=m('<li class="loading">...</li>');var h=0,k=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){h+=1;3===h&&(h=0);c.get(0).innerHTML=k[h]},175);b.on("click","li",function(c){null!==a&&(b.find("li.highlight").removeClass("highlight"),
m(this).addClass("highlight"),a.trigger(f.selectedEventName))})}},p=function(){if(null!==a){var c=a.offset(),h=m(a);b.css({width:h.outerWidth()-2,top:c.top+h.outerHeight()-1,left:c.left})}},f={selectedEventName:"MENTIONABLE_SELECTED",show:function(a,c,f){d(a);p();b.hide().empty();var s=RegExp(m.telligent.evolution.regex.encode(m.telligent.evolution.html.encode(f)),"i");m.each(c,function(a,c){var h=c.name.match(s),h=null!==h?m("<li>"+c.name.replace(s,"<strong>"+h[0]+"</strong>")+"</li>"):m("<li>"+
c.name+"</li>");h.data("mentionableData",c);b.append(h)});b.show()},hide:function(){null!==b&&b.hide().empty()},loading:function(a){d(a);p();b.hide().empty().append(c).show()},moveHighlightUp:function(){var a=b.find("li");if(0!==a.length){var c=a.length;m.each(a,function(a,b){m(b).hasClass("highlight")&&(c=a,m(b).removeClass("highlight"))});0>c-1&&(c=a.length);m(a.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var a=b.find("li");if(0!==a.length){var c=-1;m.each(a,function(a,b){m(b).hasClass("highlight")&&
(c=a,m(b).removeClass("highlight"))});c+1>=a.length&&(c=-1);m(a.get(c+1)).addClass("highlight")}},selection:function(){var a=b.find("li");if(0===a.length)return null;var c=a.filter("li.highlight");return null!==c&&0<c.length?c.data("mentionableData"):m(a.get(0)).data("mentionableData")}};return f}();m.fn.evolutionComposer.plugins.mentions=b;m.fn.evolutionComposer.plugins.mentions.defaults={onListContent:function(b,a){m.telligent.evolution.batch(function(){m.each(b,function(a,b){m.telligent.evolution.get({url:m.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/genericcontent/{contentId}/{contentTypeId}.json",data:{contentId:b.contentId,contentTypeId:b.contentTypeId}}).then(function(a){b.name=a.Content.HtmlName})})}).then(function(){a(b)})},onMentionableList:function(b,a){m.telligent.evolution.get({url:m.fn.evolutionComposer.plugins.mentions.defaults.mentionablesEndpoint,data:{QueryText:b,PageSize:20},cache:!1,dataType:"json",success:function(c){c.Mentionables&&0<c.Mentionables.length?(c=m.map(c.Mentionables,function(a){return{name:a.PreviewHtml,
token:a.Token}}),a(c)):a(null)}})},mentionablesEndpoint:m.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml"};return{}},jQuery,window);r("composer.urlhighlight",["plugin.evolutionComposer"],function(b,e,g,m){var n=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;b=function(){var b={init:function(d){d.highlighClassName=d.highlighClassName||b.defaults.highlighClassName},onTransform:function(b){var f;f=(b.val()||"").match(n);f=null!==
f&&0<f.length?f[0]:null;if(null!==f){var a;a=b.data("_composer_urlpreview_data");if(null===a||"undefined"===typeof a)a={},b.data("_composer_urlpreview_data",a);var c=b.val().indexOf(f);if(0<=c&&"undefined"===typeof a.lastRange||a.lastRange.start!==c||a.lastRange.stop!==c+f.length)a.lastRange={start:c,stop:c+f.length},b.clearHighlights(b.highlighClassName),b.addHighlight({start:c,stop:c+f.length,className:b.highlighClassName}),b.renderHighlights()}else b.clearHighlights(b.highlighClassName)},shouldActivate:function(b){return!1},
val:function(b,f){return b},onkeydown:function(b,f){return!0},oninput:function(b,f){return!0},defaults:{highlighClassName:"composer-url-highlight",loadingText:"..."}};return b}();e.fn.evolutionComposer.plugins.urlhighlight=b;return{}},jQuery,window);r("events","events.gestures events.hashchange events.notifications events.systemnotifications events.pointers events.scroll events.textinput events.resized events.comments events.presence events.activitystories events.wake events.forums events.quote events.rendered events.likes events.ideaVotes events.mutate events.plugins".split(" "),
function(){return{}});r("events.activitystories",["module.messaging"],function(b,e,g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.activitystories&&(e.telligent.evolution.sockets.activitystories.on("created",function(e){b.publish("activitystory.created",e)}),e.telligent.evolution.sockets.activitystories.on("updated",function(e){b.publish("activitystory.updated",e)}),e.telligent.evolution.sockets.activitystories.on("deleted",function(e){b.publish("activitystory.deleted",
e)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.comments",["module.messaging"],function(b,e,g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.comments&&(e.telligent.evolution.sockets.comments.on("created",function(e){b.publish("comment.created",e)}),e.telligent.evolution.sockets.comments.on("updated",function(e){b.publish("comment.updated",e)}),e.telligent.evolution.sockets.comments.on("deleted",function(e){b.publish("comment.deleted",e)}),e.telligent.evolution.sockets.comments.on("typing",
function(e){b.publish("comment.typing",e)}),e.telligent.evolution.sockets.comments.on("voted",function(e){b.publish("comment.voted",e)}),e.telligent.evolution.sockets.comments.on("presenceChanged",function(e){b.publish("comments.presenceChanged",e)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.forums",["module.messaging"],function(b,e,g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.forums&&(e.telligent.evolution.sockets.forums.on("thread.updated",function(e){b.publish("forumThread.updated",
e)}),e.telligent.evolution.sockets.forums.on("created",function(e){b.publish("forumReply.created",e)}),e.telligent.evolution.sockets.forums.on("updated",function(e){b.publish("forumReply.updated",e)}),e.telligent.evolution.sockets.forums.on("deleted",function(e){b.publish("forumReply.deleted",e)}),e.telligent.evolution.sockets.forums.on("typing",function(e){b.publish("forumReply.typing",e)}),e.telligent.evolution.sockets.forums.on("voted",function(e){b.publish("forumReply.voted",e)}),e.telligent.evolution.sockets.forums.on("presenceChanged",
function(e){b.publish("forumThread.presenceChanged",e)}),e.telligent.evolution.sockets.forums.on("threadvoted",function(e){b.publish("forumThread.voted",e)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.gestures",["events.pointers","lib.util"],function(b,e,g,m){function n(a){return(new Date).getTime()-(a||(new Date).getTime())}function f(a,c,b,h){a=180*Math.atan2(c-h,b-a)/Math.PI;0>a&&(a+=360);return a}function d(a){if(315<a||45>=a)return"right";if(45<a&&135>=a)return"up";if(135<
a&&225>=a)return"left";if(225<a&&315>=a)return"down"}function l(a,c,b){if(a.selector){var h=g(c.originalEvent.target);if(h.is(a.selector)||0<h.closest(a.selector).length)return b.call(this,c)}else return b.call(this,c)}function a(a,c,b,h){b.target=a.target;h?c.trigger(b):c&&c.triggerHandler(b);return a.cancelBubble==p?!0:a.cancelBubble}function c(c,b){var p;c.on(h.start+k,function(h){return l(b,h,function(){p&&m.clearTimeout(p.tapHoldDurationout);p={startTime:(new Date).getTime(),startPageX:h&&h.pointers&&
1<=h.pointers.length?h.pointers[0].pageX:0,startPageY:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0,held:!1,tapHoldDurationout:null,lastTap:p?p.lastTap:0};p.tapHoldDurationout=m.setTimeout(function(){p.held=!0;a(h,c,{type:u.taphold,pointers:h.pointers,originalEvent:h,duration:n(p.startTime||(new Date).getTime())})},q.tapHoldDuration)})});c.on(h.move+k,function(h){return l(b,h,function(){if(p){var b=Math.abs(Math.sqrt(Math.pow((h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0)-
p.startPageX,2)+Math.pow((h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0)-p.startPageY,2)));p.tapHoldDurationout&&b>=q.tapHoldMaxDistance&&m.clearTimeout(p.tapHoldDurationout);if(p.panning||h&&h.pointers&&1===h.pointers.length&&b>q.panMinDistance){var b=f(p.startPageX,p.startPageY,h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0,h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0),k=d(b),b={type:u.panStart,pointers:h?h.pointers:[],originalEvent:h,angle:b,direction:k,pageX:h&&
h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0,pageY:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0};p.panning||(p.panning=!0,a(h,c,b,!0));b.type=u.pan;a(h,c,b,!0)}}})});c.on(h.end+k,function(h){return l(b,h,function(){if(p){m.clearTimeout(p.tapHoldDurationout);var b=n(p.startTime||(new Date).getTime()),k=Math.abs(Math.sqrt(Math.pow((h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0)-p.startPageX,2)+Math.pow((h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0)-p.startPageY,
2)));if(!p.held&&b<=q.tapMaxDuration&&k<=q.tapMaxDistance)b={type:u.tap,pointers:h?h.pointers:[],originalEvent:h,duration:b},a(h,c,b),k=(new Date).getTime(),p.lastTap&&k-p.lastTap<=q.doubleTapMaxDuration?(b.type=u.doubleTap,a(h,c,b),p.lastTap=0):p.lastTap=k;else if(p.panning&&a(h,c,{type:u.panEnd,pointers:h?h.pointers:[],originalEvent:h,pageX:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0,pageY:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0},!0),h&&h.pointers&&1===h.pointers.length&&
k/b>=q.swipeMinVelocity){var e=f(p.startPageX,p.startPageY,h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0,h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0),k=d(e),b={type:u.swipe,pointers:h?h.pointers:[],originalEvent:h,duration:b,angle:e,direction:k,pageX:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageX:0,pageY:h&&h.pointers&&1<=h.pointers.length?h.pointers[0].pageY:0};a(h,c,b,!0);b.type+=k;a(h,c,b,!0)}else p={}}})})}var k="._gesture_events_namespace",p,u={tap:"tap",taphold:"taphold",
doubleTap:"doubletap",swipe:"swipe",swipeUp:"swipeup",swipeDown:"swipedown",swipeRight:"swiperight",swipeLeft:"swipeleft",panStart:"panstart",pan:"pan",panEnd:"panend"},q={tapHoldDuration:400,tapHoldMaxDistance:1,tapMaxDuration:350,tapMaxDistance:10,swipeMinVelocity:0.5,panMinDistance:10,doubleTapMaxDuration:250},h={start:"pointerstart",move:"pointermove",end:"pointerend"};if(g.telligent&&g.telligent.evolution&&g.telligent.evolution._SUPPRESS_GESTURES)return{eventNamespace:k.substring(1)};window.onorientationchange===
p&&(g.event.special.orientationchange={setup:function(){var a=g(window),c,b=function(){a.trigger("orientationchange")};window.addEventListener("resize",e.requestAnimationFrameThrottle(function(a){m.clearTimeout(c);c=m.setTimeout(b,100)}),!1)}});var w={"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"};g.each(u,function(a,b){g.event.special[b]=
{add:function(a){var h=g(this);b===u.taphold&&h.css(w);h.data("._gesture_events_bound")||(h.data("._gesture_events_bound",!0),c(h,a))},remove:function(a){a=g(this);a.off(k);a.removeData("._gesture_events_bound")}}});g.gestures={defaults:q};return{eventNamespace:k.substring(1)}},jQuery,window);r("events.hashchange",function(b,e){var g="onhashchange"in e&&(void 0===document.documentMode||7<document.documentMode),m=e.location.href,n=b(e),f;g||(b.event.special.hashchange={setup:function(){f||(f=setInterval(function(){e.location.href!==
m&&(m=e.location.href,n.trigger("hashchange"))},b.hashChangeSettings.interval))}});b.hashChangeSettings={interval:10};return{}},jQuery,window);r("events.ideaVotes",["module.messaging"],function(b,e,g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.ideaVotes&&(e.telligent.evolution.sockets.ideaVotes.on("created",function(e){b.publish("ideaVote.created",e)}),e.telligent.evolution.sockets.ideaVotes.on("deleted",function(e){b.publish("ideaVote.deleted",e)}))},{excludeAutoNameSpaces:!0});
return{}},jQuery,window);r("events.textinput",function(b,e,g){var m="oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");b.event.special.textinput={setup:function(){var e=b(this);if(m)e.on("input",function(b){e.trigger("textinput",{which:b.which})});else{var f;e.on({keydown:function(b){f=e.val()},keyup:function(b){var l=e.val();l!==f&&e.trigger("textinput",{which:b.which});f=l}})}}};return{}},jQuery,window);r("events.likes",["module.messaging"],function(b,e,
g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.likes&&(e.telligent.evolution.sockets.likes.on("created",function(e){b.publish("like.created",e)}),e.telligent.evolution.sockets.likes.on("deleted",function(e){b.publish("like.deleted",e)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.mutate",function(b,e){b.event.special.mutate={add:function(e){if(MutationObserver){var m=b(this);m.data("_mutation_observed")||(m.data("_mutation_observed",!0),(new MutationObserver(function(b){m.trigger("mutate",
b)})).observe(this,{childList:!0,characterData:!1,attributes:!1}))}}};return{}},jQuery,window);r("events.notifications",["module.messaging"],function(b,e,g){function m(a){if(!(f&&a&&a.typeId&&d))return!1;for(var c=0;c<d.length;c++)if(!d[c](a))return!0;var b=f[a.typeId];if(!b)return!1;for(c=0;c<b.length;c++)if(!b[c](a))return!0;return!1}var n=0,f={},d=[],l={addFilter:function(a,c){if(a)return"function"===typeof a&&(c=a,a=null),c=c||function(){return!1},n++,c.filterId=n,a?(f[a]=f[a]||[],f[a].push(c)):
d.push(c),n},removeFilter:function(a,c){if(a){var b=f[a];b&&(c?(b=e.grep(b,function(a){return a.filterId!=c}),f[a]=b,d=e.grep(d,function(a){return a.filterId!=c})):delete f[a])}},clearFilters:function(){f={};d=[];n=0}};return{initiate:function(){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.notifications&&(e.telligent.evolution.sockets.notifications.on("received",function(a){m(a)&&(a.suppress=!0);b.publish("notification.raised",a)}),e.telligent.evolution.sockets.notifications.on("read",
function(a){m(a)&&(a.suppress=!0);b.publish("notification.read",a)}))},{excludeAutoNameSpaces:!0});e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.notifications=e.extend(e.telligent.evolution.notifications||{},l)}}},jQuery,window);r("events.plugins",["module.messaging","lib.util"],function(b,e,g,m){b.subscribe("socket.connected",function(){if(g.telligent.evolution.sockets.plugins)g.telligent.evolution.sockets.plugins.on("refresh",e.debounce(function(){b.publish("plugins.initialized")},
5E3))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.pointers",["lib.util","lib.events"],function(b,e,g,m,n){function f(a,c){this.pageX=a;this.pageY=c}function d(a){return[new f(a.pageX,a.pageY)]}function l(a){if(!a||!a.length)return[];for(var c=[],b=0;b<a.length;b++)c[c.length]=new f(a[b].pageX,a[b].pageY);return c}function a(a){return[new f(a.originalEvent.pageX,a.originalEvent.pageY)]}function c(a,c,b,h){a&&a.length&&a.triggerHandler({type:c,pointers:b,originalEvent:h,target:h.target})}
function k(a,c,b,h){if(a.selector){if(b=g(b.target),b.is(a.selector)||0<b.closest(a.selector).length)return h.call(this,c)}else h.call(this,c)}function p(){var a={pointermove:"tepointermove",pointerstart:"tepointerstart",pointerend:"tepointerend"};g.fn.on=g.fn.bind=u(g.fn.on,a,!0);g.fn.trigger=u(g.fn.trigger,a,!1);g.fn.off=g.fn.unbind=u(g.fn.off,a,!1)}function u(a,c,b){return function(){var h=Array.prototype.slice.call(arguments,0);if(b&&1===h.length&&g.isPlainObject(h[0])){var d=h[0];g.each(c,function(a,
c){d[a]!=n&&(d[c]=d[a],delete d[a])});return a.call(this,d)}if("string"!=typeof h[0])return a.apply(this,h);eventParts=h[0].split(".",2);if(2==eventParts.length&&"_pointer_events_namespace"==eventParts[1])return a.apply(this,h);c[eventParts[0]]&&(eventParts[0]=c[eventParts[0]],h[0]=eventParts.join("."));return a.apply(this,h)}}var q={start:"pointerstart",testart:"tepointerstart",move:"pointermove",temove:"tepointermove",end:"pointerend",teend:"tepointerend"};m={pointerMoveThrottle:10};if(g.telligent&&
g.telligent.evolution&&g.telligent.evolution._SUPPRESS_POINTERS)return{eventNamespace:"_pointer_events_namespace"};var h=window.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel"},w=[{test:function(){return"onmspointerdown"in window||"onpointerdown"in window},add:function(d,p){var f=!1;d.on(h.down+"._pointer_events_namespace",function(b){b.button&&0<b.button||k(p,b,b.originalEvent,
function(){c(d,q.testart,a(b),b);f=!0})});d.on(h.move+"._pointer_events_namespace",b.requestAnimationFrameThrottle(function(b){k(p,b,b.originalEvent,function(){f&&c(d,q.temove,a(b),b)})}));d.on(h.up+"._pointer_events_namespace",function(b){b.button&&0<b.button||k(p,b,b.originalEvent,function(){f=!1;c(d,q.teend,a(b),b)})});d.on(h.cancel+"._pointer_events_namespace",function(b){k(p,b,b.originalEvent,function(){f=!1;c(d,q.teend,a(b),b)})})},remove:function(a){a.off("._pointer_events_namespace")}},{test:function(){return"ontouchstart"in
window},add:function(a,h){var d=!1,p=!0;h&&(h.data&&h.data.passive!==n)&&(p=h.data.passive);var f=a.get(0);f&&(e.addHandler(f,"touchstart._pointer_events_namespace",function(b){k(h,b,b,function(){c(a,q.testart,l(b.touches),b);d=!0})},{passive:p}),e.addHandler(f,"touchmove._pointer_events_namespace",b.requestAnimationFrameThrottle(function(b){k(h,b,b,function(){d&&c(a,q.temove,l(b.touches),b)})}),{passive:p}),e.addHandler(f,"touchend._pointer_events_namespace",function(b){k(h,b,b,function(){d=!1;c(a,
q.teend,l(b.changedTouches),b)})},{passive:p}),e.addHandler(f,"touchcancel._pointer_events_namespace",function(b){k(h,b,b,function(){d=!1;c(a,q.teend,l(b.changedTouches),b)})},{passive:p}))},remove:function(a){(a=a.get(0))&&e.removeHandler(a,"._pointer_events_namespace")}},{test:function(){return"onmousedown"in document},add:function(a,h){var p=!1;a.on("mousedown._pointer_events_namespace",function(b){1===b.which&&k(h,b,b.originalEvent,function(){c(a,q.testart,d(b),b);p=!0})});a.on("mousemove._pointer_events_namespace",
b.requestAnimationFrameThrottle(function(b){k(h,b,b.originalEvent,function(){p&&c(a,q.temove,d(b),b)})}));a.on("mouseup._pointer_events_namespace",function(b){1===b.which&&k(h,b,b.originalEvent,function(){p=!1;c(a,q.teend,d(b),b)})});a.on("mouseleave._pointer_events_namespace",function(b){k(h,b,b.originalEvent,function(){p&&c(a,q.teend,d(b),b);p=!1})})},remove:function(a){a.off("._pointer_events_namespace")}}],s,v=0;for(;v<w.length;v++)!s&&w[v].test()&&(s=w[v]);if(s){for(var t in q)g.event.special[q[t]]=
{add:function(a){var c=g(this);c.data("._pointer_events_bound")||(c.data("._pointer_events_bound",!0),s.add(c,a))},remove:function(a){a=g(this);s.remove(a);a.removeData("._pointer_events_bound")}};g.pointer={defaults:m};p();return{eventNamespace:"_pointer_events_namespace"}}},jQuery,window);r("events.presence",["module.messaging"],function(b,e,g){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.presence&&(e.telligent.evolution.sockets.presence.on("userPresenceChanged",function(e){b.publish("user.presenceChanged",
e)}),e.telligent.evolution.sockets.usersPresence.on("usersPresenceChanged",function(e){b.publish("users.presenceChanged",e)}))},{excludeAutoNameSpaces:!0});return{}},jQuery,window);r("events.quote",function(b,e){function g(){if(!l){b(document).on("selectionchange._evolution_quote",function(){d()});if(!("onselectionchange"in document))b(document).on("mousemove._evolution_quote",function(){d()});b(document).on("customizepage._evolution_quote",function(){m()});k=b('<a href="#" class="evolution-quote-handle"></a>').html(b.event.special.quote.defaults.quoteText).hide().on("click",
function(c){null!=a&&(b(a.element).trigger(b.Event("quote",{quotedHtml:a.html})),u=!1,k.hide(),e.getSelection?e.getSelection().empty?e.getSelection().empty():e.getSelection().removeAllRanges&&e.getSelection().removeAllRanges():document.selection&&document.selection.empty());return!1}).on("mouseout",function(a){u=!1}).on("mouseover mousemove",function(a){u||(a.buttons&&0!=a.buttons?k.hide():u=!0)}).appendTo(b("body"));l=!0}}function m(){!l||0<c.length||(b(document).off("._evolution_quote"),k.remove(),
k=null,l=!1)}function n(a){for(var h=0;h<c.length;h++)if(c[h].parentElement==a||b.contains(c[h].parentElement,a)){if(!c[h].selector)return!0;h=b(c[h].selector,b(c[h].parentElement));return 0<h.filter(a).length||0<h.find(a).length}return!1}function f(){if(window.getSelection){var a=window.getSelection();if(a&&0<a.rangeCount&&0<a.toString().length){var c=a.anchorNode;if(null!=c&&null!=a.focusNode)for(;!b.contains(c,a.focusNode);)c=c.parentNode;var a=a.getRangeAt(0),d=null,k=null,p=null,f=null,e=null;
if(null!=a){var l=a.getClientRects();if(l&&0<l.length)for(var g=0;g<l.length;g++){e=l[g];if(null==k||e.top<k)k=e.top;if(null==d||e.left<d)d=e.left;if(null==p||e.left+e.width>p)p=e.left+e.width;if(null==f||e.top+e.height>f)f=e.top+e.height}e=document.createElement("div");e.appendChild(a.cloneContents());e=e.innerHTML}return{html:e,element:c,left:d,top:k,width:null!=d&&null!=p?p-d:null,height:null!=k&&null!=f?f-k:null}}}else if(document.selection&&(c=document.selection.createRange())&&c.text)return e=
c.getBoundingClientRect(),{html:c.htmlText,element:c.parentElement(),left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top};return null}function d(){var c=f();c&&null!=c.html&&0<c.html.length&&c.element&&n(c.element)?(e.clearTimeout(p),a=c,k.show().css({position:"absolute",left:c.left+b(e).scrollLeft()+"px",top:c.top+c.height+b(e).scrollTop()+"px"})):(e.clearTimeout(p),p=e.setTimeout(function(){a=null;l&&k&&(u=!1,k.hide())},250))}var l=!1,a=null,c=[],k,p=null,u=!1;b.event.special.quote=
{setup:function(){},add:function(a){c.push({parentElement:this,selector:a.selector});g()},remove:function(a){var h=this,d=!1;c=b.grep(c,function(c){if(d||c.parentElement!=h||c.selector!=a.selector)return!0;if(!d)return d=!0,!1});m()},teardown:function(){},defaults:{quoteText:"Quote"}};return{}},jQuery,window);r("events.rendered",function(b,e,g){var m={},n=function(f){f&&m[f]!=g&&(m[f]--,0===m[f]&&b(f).trigger(b.Event("rendered")))};b.event.special.rendered={setup:function(){m[this]=0},add:function(b){},
remove:function(b){},teardown:function(){delete m[this]},noBubble:!0};return{incrementLoading:function(b){b.get&&(b=b.get(0));b&&m[b]!=g&&m[b]++},decrementLoading:function(b){b.get?n(b.get(0)):n(b)}}},jQuery,window);r("events.resized",["lib.util"],function(b,e,g,m){var n=0;e.event.special.resized={setup:function(b){b=e("<div></div>").css({position:"absolute",width:"100px",height:"100px",overflow:"scroll",left:"-200px"});e("body").append(b);try{var d=b.get(0);n=d.offsetWidth-d.clientWidth}catch(l){n=
0}b.remove()},add:function(){function f(){w=c.width();v=c[0].scrollWidth;s=c.height();t=c[0].scrollHeight;if(Math.abs(w-p)>n||Math.abs(s-u)>n||Math.abs(v-q)>n||Math.abs(t-h)>n){var a={oldWidth:p,oldHeight:u,oldScrollWidth:q,oldScrollHeight:h,newWidth:w,newHeight:s,newScrollWidth:v,newScrollHeight:t};p=w;u=s;q=v;h=t;l.trigger("resized",a)}}function d(){g.clearTimeout(k);k=g.setTimeout(f,e.event.special.resized.defaults.throttle)}var l=e(this);if(!l.data("_resized_init")){l.data("_resized_init",!0);
var a=this===document||this===g,c=a?e(window):l,k,p=0,u=0,q=0,h=0,w,s,v,t,p=c.width(),u=c.height(),q=c.get(0).scrollWidth,h=c.get(0).scrollHeight;if(a)c.on("resize",b.requestAnimationFrameThrottle(d));else c.data("_resized_init",{intervalHandle:g.setInterval(f,e.event.special.resized.defaults.throttle)})}},teardown:function(){var b=this===document||this===g,d=b?e(window):e(this);b||((b=d.data("initDataKey"))&&b.intervalHandle&&g.clearInterval(b.intervalHandle),d.data("initDataKey",!1))}};e.event.special.resized.defaults=
{throttle:25};return{}},jQuery,window);r("events.scroll",["lib.events"],function(b,e,g){(function(){var g={};e.event.special.scrollend={setup:function(b){g=e.extend({padding:200,delay:250,initialLoadAttempts:10,initialLoadDelay:1E3},b)},add:function(n){var f=e(this);if(!f.data("_scrollend_init")){f.data("_scrollend_init",!0);var d=g.delay,l=g.padding;n&&n.data&&(n.data.delay&&(d=n.data.delay),n.data.padding&&(l=n.data.padding));var a=this===document,c=a?e(window):f,k=!1,p=-1,u=0,q=!1,h=function(){return a?
e("body").prop("scrollHeight")||c.height()+1:c.prop("scrollHeight")||c.height()+1};b.addHandler(c.get(0),"scroll",function(){k=!0},{passive:!0});setInterval(function(){if(k){var b;b=a?e(f).height()-e(f).scrollTop()-e(c).height()<=l:f.scrollTop()+f.innerHeight()+l>=f[0].scrollHeight;b?f.trigger("scrollend"):k=!1}},d);n.data&&!1===n.data.prefill||setInterval(function(){if(q){var a=c.height();a>p&&(p=a,h()<=p&&(u=0,q=!1))}else p=c.height(),h()<=p+l&&u<g.initialLoadAttempts?(u++,f.trigger("scrollend")):
q=!0},g.initialLoadDelay)}}}})();(function(){var g={};e.event.special.scrolltop={setup:function(b){g=e.extend({padding:200,delay:250},b)},add:function(){var n=e(this);if(!n.data("_scrolltop_init")){n.data("_scrolltop_init",!0);var f=this===document?e(window):n,d=!1;b.addHandler(f.get(0),"scroll",function(){d=!0},{passive:!0});setInterval(function(){d&&(n.scrollTop()<=g.padding&&n.trigger("scrolltop"),d=!1)},g.delay)}}}})();return{}},jQuery,window);r("events.systemnotifications",["module.messaging"],
function(b,e,g){return{initiate:function(){b.subscribe("socket.connected",function(){e.telligent.evolution.sockets.systemnotifications&&(e.telligent.evolution.sockets.systemnotifications.on("received",function(e){b.publish("systemnotification.raised",e)}),e.telligent.evolution.sockets.systemnotifications.on("resolved",function(e){b.publish("systemnotification.resolved",e)}))},{excludeAutoNameSpaces:!0})}}},jQuery,window);r("events.wake",["lib.backgroundTimer"],function(b,e,g,m){e.event.special.wake=
{setup:function(n){var f=(new Date).getTime();b.setInterval(function(){var b=(new Date).getTime();4E3<b-f&&e(g).trigger("wake");f=b},2E3)}};return{}},jQuery,window);r("lib","lib.actionSheet lib.dynamicLinks lib.messageLinks lib.scrollFix lib.sheet lib.sheetProvider lib.util lib.touchEventAdapter lib.globalConfiguration lib.storageProxy lib.lruCache lib.backgroundTimer lib.reflow lib.storageShim lib.imagePreview lib.legacyFormFilter lib.jsSupport lib.events lib.cookies lib.jQueryShim lib.keyboardActive".split(" "),
function(){return{}});r("lib.actionSheet",function(b,e,g){function m(f,d){var e=b(document.createElement("li"));e.append(d);f.append(e)}function n(e,d){var l=b(document.createElement("ul"));l.addClass("action-sheet");for(var a=0;a<d.length;a++)m(l,d[a]);l.on("click","a",function(a){e.sheet.hide()});e.sheet.show(l);e.content=l}return function(b){b=b||{};b.sheet=b.sheet;return{show:function(d){d=d||{};d.links=d.links||[];n(b,d.links||[])},hide:function(){b.sheet.hide()},content:function(){return b.content}}}},
jQuery,window);r("lib.backgroundTimer",function(b,e){var g=null,m=b.self!==b.top;if(b.Worker&&b.Blob&&!m)try{var n=b.URL.createObjectURL(new Blob(["\t\t\t\tvar ids = {};\t\t\t\tonmessage = function(e) {\t\t\t\t\tvar name = e.data.name,\t\t\t\t\t\tid = e.data.id,\t\t\t\t\t\tduration = e.data.duration;\t\t\t\t\tif (name === 'st') {\t\t\t\t\t\tids[id] = setTimeout(function(){\t\t\t\t\t\t\tpostMessage(id);\t\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t\t}\t\t\t\t\t\t}, duration);\t\t\t\t\t} else if (name === 'ct') {\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\tclearTimeout(ids[id]);\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t}\t\t\t\t\t} else if (name === 'si') {\t\t\t\t\t\tids[id] = setInterval(function(){\t\t\t\t\t\t\tpostMessage(id);\t\t\t\t\t\t}, duration);\t\t\t\t\t} else if (name === 'ci') {\t\t\t\t\t\tif(ids[id]) {\t\t\t\t\t\t\tclearInterval(ids[id]);\t\t\t\t\t\t\tdelete ids[id];\t\t\t\t\t\t}\t\t\t\t\t}\t\t\t\t}\t\t\t"])),
f=new Worker(n),d=0,l={},g={setTimeout:function(a,b){d++;l[d]=a;f.postMessage({name:"st",id:d,duration:b});return d},clearTimeout:function(a){delete l[a];f.postMessage({name:"ct",id:a})},setInterval:function(a,b){d++;l[d]=a;f.postMessage({name:"si",id:d,duration:b});return d},clearInterval:function(a){delete l[a];f.postMessage({name:"ci",id:a})}};f.onmessage=function(a){if(a.data&&l[a.data])l[a.data]()}}catch(a){}g||(g={setTimeout:function(a,d){return b.setTimeout(a,d)},clearTimeout:function(a){return b.clearTimeout(a)},
setInterval:function(a,d){return b.setInterval(a,d)},clearInterval:function(a){return b.clearInterval(a)}});return g},window);r("lib.cookies",["module.url","lib.globalConfiguration"],function(b,e,g,m,n){function f(a){document.cookie=b.encode(a)+"=;path="+e.baseUrl+";Max-Age=-999;"}var d=function(){var a=/[.*+?^${}()|[\]\\]/g;return function(b){return b.replace(a,"\\$&")}}(),l={set:function(a,c){null===c||c===n?f(a):document.cookie="https:"==m.location.protocol?b.encode(a)+"="+b.encode(c)+";path="+
e.baseUrl+";SameSite="+e.cookieSameSiteSetting+";secure":b.encode(a)+"="+b.encode(c)+";path="+e.baseUrl+";SameSite="+e.cookieSameSiteSetting},get:function(a){return(a=document.cookie.match("(^|;)\\s*"+d(a)+"\\s*=\\s*([^;]+)"))?a.pop():null},remove:function(a){f(a)}};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});return g.telligent.evolution.cookies=l},jQuery,window);r("lib.crossWindowBus",["lib.backgroundTimer"],function(b,e,g,m){function n(a,b){this.key=a;if("BroadcastChannel"in
g)this.channel=new BroadcastChannel(this.key),this.channel.onmessage=function(a){b(a.data)};else e(g).on("storage",function(d){if(d.originalEvent&&d.originalEvent.key===a&&d.originalEvent.newValue&&0<d.originalEvent.newValue.length)try{var e=JSON.parse(d.originalEvent.newValue);e&&b(e)}catch(f){}})}function f(a,b,d){return{source:b.source,local:b.source===a.id,broadcast:d}}function d(a,d,p,e){var l={name:p,data:e,source:a.id,target:d,salt:Math.floor(1E5*Math.random())};a.transport.send(l);a.includeLocal&&
(a.receive&&d===a.id)&&b.setTimeout(function(){a.receive(p,e,f(a,l,!1))},0)}function l(a,d,p){var e={name:d,data:p,source:a.id,salt:Math.floor(1E5*Math.random())};a.transport.send(e);a.includeLocal&&a.receive&&b.setTimeout(function(){a.receive(d,p,f(a,e,!0))},0)}var a={key:"__cwb",receive:null,includeLocal:!1};n.prototype.send=function(a){this.channel?this.channel.postMessage(a):localStorage.setItem(this.key,JSON.stringify(a))};return function(b){var k=e.extend({},a,b||{},{id:Math.floor(1E5*Math.random())});
k.transport=new n(k.key,function(a){try{a.source!=k.id&&(a.target!==m&&a.target===k.id?k.receive(a.name,a.data,f(k,a,!1)):a.target===m&&k.receive(a.name,a.data,f(k,a,!0)))}catch(b){}});return{id:function(){return k.id},broadcast:function(a,b){l(k,a,b)},send:function(a,b,c){d(k,a,b,c)}}}},jQuery,window);r("lib.devicePixelRatio",["lib.cookies"],function(b,e,g,m){function n(){return Math.round(window.devicePixelRatio||1)||1}return{setCookie:function(e){b.set(".te.dpr",n())},getRatio:n}},jQuery,window);
r("lib.dynamicLinks",["lib.scrollFix","lib.actionSheet"],function(b,e,g,m,n){function f(a){var b=g.extend({},h);"vertical"!=a.direction&&(b.display="flex",b["align-items"]="center");return b}function d(a){var b=a.css("white-space"),c;if("nowrap"===b)c=a.outerWidth(!0);else{var h=a.get(0)&&!!a.get(0).style["white-space"];a.css("white-space","nowrap");c=a.outerWidth(!0);h?a.css("white-space",b):a.css("white-space","")}return c}function l(a){return a.scrollWidth>a.clientWidth}function a(a){var c,h,d;
c=f(a);if("vertical"==a.direction){if(a.listWrapper||(a.listWrapper=g(document.createElement("div")).addClass("container").appendTo(a.parent)),!a.list){a.list=g(document.createElement("ul")).appendTo(a.listWrapper).css(c);for(c=0;c<a.links.length;c++)(h=a.links[c])&&h.element&&(d=g(document.createElement("li")).append(h.element),h.listItem=d,a.list.append(d),h.isOverflowed=!1);a.moreLink!=n&&(d=g(document.createElement("li")).append(a.moreLink.element),a.moreLink.listItem=d,a.list.append(d))}}else{a.parent.css({overflow:"hidden"});
a.listWrapper||(a.listWrapper=g(document.createElement("div")).css(q).addClass("container").appendTo(a.parent));if(!a.list){a.list=g(document.createElement("ul")).appendTo(a.listWrapper).css(c);for(c=0;c<a.links.length;c++)(h=a.links[c])&&h.element&&(d=g('<li class="'+h.className+'"></li>').append(h.element),h.listItem=d,a.list.append(d),h.isOverflowed=!1);a.moreLink!=n&&(d=g(document.createElement("li")).append(a.moreLink.element),a.moreLink.listItem=d,a.list.append(d))}a.list.hide();a.parentWidth=
a.listWrapper.width();a.list.show();if(l(a.listWrapper.get(0)))a.listWrapper.on("pan swipe pointerend",function(a){"left"!=a.direction&&"right"!=a.direction||a.stopPropagation()});b.preventBounce(a.listWrapper)}}function c(a){var b,c,h,k,p;a.lastAdditionalLinkCount===n&&(a.lastAdditionalLinkCount=0);a.additionalLinks=[];a.accumulatedWidth=0;a.preScrollTo=0;if("vertical"==a.direction){for(c=0;c<a.links.length;c++)h=a.links[c],c>a.maxLinks-1?(a.additionalLinks.push(h),h.listItem.hide(),h.isOverflowed=
!0):(h.isOverflowed&&(h.listItem.append(h.element).show(),h.isOverflowed=!1),h.listItem.addClass(h.className).appendTo(a.list));a.moreLink&&a.list.append(a.moreLink.listItem.append(a.moreLink.element).show())}else{for(c=a.moreLinkWidth=0;c<a.links.length;c++){h=a.links[c];if(!h.element)return;h.isOverflowed&&(h.listItem.append(h.element).show(),h.isOverflowed=!1);h.listItem.appendTo(a.list)}a.moreLink&&(a.list.append(a.moreLink.listItem.append(a.moreLink.element).show()),a.moreLinkWidth=d(a.moreLink.element));
for(p=c=0;c<a.links.length;c++)h=a.links[c],b=h.listItem,k=d(h.element),h.selected&&(a.preScrollTo=a.accumulatedWidth),a.accumulatedWidth+k>a.parentWidth&&p+1<=a.minLinks?a.accumulatedWidth+=k:0<a.additionalLinks.length||(a.accumulatedWidth+k+a.moreLinkWidth>a.parentWidth||p+1>a.maxLinks)&&p+1>a.minLinks?(h.element.detach(),h.isOverflowed=!0,b.hide(),a.additionalLinks.push(h)):a.accumulatedWidth+=k,p++}}function k(a){if("vertical"==a.direction){if(0<a.additionalLinks.length&&a.moreLink&&a.onShowMore)a.moreLink.element.off(u).on("click"+
u,function(b){a.onShowMore(a.additionalLinks,a.cancelLink);return!1});else a.moreLink&&(a.moreLink.element.detach(),a.moreLink.listItem.hide());a.list.css({visibility:"visible"})}else{0<a.additionalLinks.length&&a.moreLink&&a.onShowMore?(a.moreLink.listItem.addClass(a.moreLink.className),a.accumulatedWidth+=a.moreLinkWidth,a.moreLink.element.off(u).on("click"+u,function(b){a.onShowMore(a.additionalLinks,a.cancelLink);return!1})):a.moreLink&&(a.moreLink.element.detach(),a.moreLink.listItem.hide());
a.list.css({width:a.accumulatedWidth>a.parentWidth?a.accumulatedWidth:a.parentWidth});g(a.listWrapper).get(0).scrollLeft=a.preScrollTo-a.preScrollOffset;var b=a.list.height();0!=b&&(a.parent.css({height:b}),a.listWrapper.css({height:b+20}));a.listWrapper.css({visibility:"visible"})}if(a.lastAdditionalLinkCount!=a.additionalLinks.length&&(a.lastAdditionalLinkCount=a.additionalLinks.length,a.onLinksChange))a.onLinksChange({visible:a.links.length-a.additionalLinks.length,hidden:a.additionalLinks.length})}
function p(b){g.telligent.evolution.ui.suppress(function(){a(b)});c(b);g.telligent.evolution.ui.suppress(function(){k(b)})}var u="._dynamicLinks",q={overflow:"hidden","overflow-x":"auto"},h={visible:"hidden","list-style":"none",padding:"0px",margin:"0px",overflow:"hidden"},w=function(a){var b=g.extend({},w.defaults,a||{});return{render:function(){p(b)},addLink:function(a,c){a.element=g(a.element);c!=n?b.links.splice(c,0,a):b.links[b.links.length]=a;b.list&&(a&&a.element)&&(listItem=g('<li class="'+
a.className+'"></li>').append(a.element),a.listItem=listItem,b.list.append(listItem),a.isOverflowed=!1);p(b);return a},removeLink:function(a){"string"===typeof a||a instanceof String?b.links=g.grep(b.links,function(b){return g(b.element).is(a)?(b.listItem?b.listItem.remove():b.element&&b.element.remove(),!1):!0}):(a=g(a).get(0),b.links=g.grep(b.links,function(b){if(b.element.get(0)!==a)return!0;b.listItem?b.listItem.remove():b.element&&b.element.remove();return!1}));p(b)},links:function(a){return a?
b.additionalLinks:b.links},cancelLink:function(){return b.cancelLink},moreLink:function(){return b.moreLink},resize:function(){p(b)},isVisible:function(a){a=g(a).get(0);for(var c=0;c<(b.additionalLinks||[]).length;c++)if(b.additionalLinks[c].element.get(0)===a)return!1;return!0},update:function(a,c){var h=null,d=0;if("string"===typeof a||a instanceof String)for(var k=0;k<b.links.length;k++){if(b.links[k].element.is(a)){d=k;h=b.links[k];break}}else for(a=g(a).get(0),k=0;k<b.links.length;k++)if(b.links[k].element.get(0)===
a){d=k;h=b.links[k];break}h&&(null!==c.className&&(h.className=c.className),null!==c.selected&&(h.selected=c.selected),null!==c.index&&b.links.splice(c.index,0,b.links.splice(d,1)[0]),h&&h.element&&(h.element.detach(),h.listItem.remove(),listItem=g('<li class="'+h.className+'"></li>').append(h.element),h.listItem=listItem,b.list.append(listItem),h.isOverflowed=!1),p(b))},reconfigure:function(a){var c=!1;a.maxLinks!==n&&(b.maxLinks=a.maxLinks,c=!0);a.minLinks!==n&&(b.minLinks=a.minLinks,c=!0);a.direction!==
n&&(b.direction=a.direction,c=!0);c&&p(b)}}};w.defaults={preScrollOffset:10,minLinks:0,maxLinks:50,direction:"vertical",parent:null,links:[],moreLink:null,cancelLink:null,onShowMore:function(a,b){}};return w},jQuery,window);r("lib.events",function(b,e,g){function m(a){var b=!1;return b=a===g||null===a?!1:"boolean"===typeof a?a:!f.capture&&a.capture?a.capture:f.passive?a:!1}function n(a,b,d){delete a.byId[b.id];a.byEventName[b.fullEventName]=(a.byEventName[b.fullEventName]||[]).filter(d);0===a.byEventName[b.fullEventName].length&&
delete a.byEventName[b.fullEventName];a.byEventName[b.eventName]=(a.byEventName[b.eventName]||[]).filter(d);0===a.byEventName[b.eventName].length&&delete a.byEventName[b.eventName];b.nameSpace&&(a.byNameSpace[b.nameSpace]=(a.byEventName[b.nameSpace]||[]).filter(d),0===a.byNameSpace[b.nameSpace].length&&delete a.byNameSpace[b.nameSpace])}var f={capture:!1,passive:!1,once:!1};try{var d={};Object.defineProperty(d,"passive",{get:function(){f.passive=!0}});Object.defineProperty(d,"capture",{get:function(){f.capture=
!0}});Object.defineProperty(d,"once",{get:function(){f.once=!0}});e.addEventListener("testOptions",null,d);e.removeEventListener("testOptions",null,d)}catch(l){}return{addHandler:function(a,c,d,p){p=m(p===g?null:p);var e=c.split(".",2),f=e[0];c={callback:d,nameSpace:1<e.length?e[1]:null,eventName:f,fullEventName:c,options:p,id:0};e=b(a).data("_event_handlers")||{byEventName:{},byNameSpace:{},byId:{},count:0};e.count++;c.id=e.count;e.byEventName[c.eventName]=e.byEventName[c.eventName]||[];e.byEventName[c.eventName].push(c);
e.byEventName[c.fullEventName]=e.byEventName[c.fullEventName]||[];e.byEventName[c.fullEventName].push(c);e.byId[c.id]=c;c.nameSpace&&(e.byNameSpace[c.nameSpace]=e.byNameSpace[c.nameSpace]||[],e.byNameSpace[c.nameSpace].push(c));b(a).data("_event_handlers",e);a.addEventListener?a.addEventListener(f,d,p):a.attachEvent&&a.attachEvent("on"+f,d);return c.id},removeHandler:function(a,c,d,p){function e(a){return a.callback===d}function f(a){return a.callback!==d}if(d){if(a.removeEventListener(c,d,m(p===
g?null:p)),p=b(a).data("_event_handlers")){var h=null;(c=(p.byEventName[c]||[]).filter(e))&&1==c.length&&(h=c[0]);h&&(n(p,h,f),b(a).data("_event_handlers",p))}}else if(Number.isInteger(c)){if(p=b(a).data("_event_handlers"))if(h=p.byId[c])a.removeEventListener(h.eventName,h.callback,h.options),n(p,h,f),b(a).data("_event_handlers",p)}else if(c&&""!=c){p=(c||"").split(".",2);var h=p[0],l=1<p.length?p[1]:null;if(p=b(a).data("_event_handlers")){var s=null;null!==l&&"."+l!==c?s=p.byEventName[c]:null!==
l?s=p.byNameSpace[l]:null!==h&&(s=p.byEventName[h]);if(s){c=[];for(l=0;l<s.length;l++)h=s[l],a.removeEventListener(h.eventName,h.callback,h.options),c.push(h);for(l=0;l<c.length;l++)h=c[l],n(p,h,f);b(a).data("_event_handlers",p)}}}else if(p=b(a).data("_event_handlers")){for(s in p.byId)p.byId.hasOwnProperty(s)&&(h=p.byId[s],a.removeEventListener(h.eventName,h.callback,h.options));b(a).removeData("_event_handlers")}}}},jQuery,window);r("lib.globalConfiguration",function(){return{baseUrl:"",authorizationCookieName:"AuthorizationCookie",
defaultErrorMessage:"An error occured while communicating with the server.",accessingUserId:0,accessingUserIsSystemAccount:!0,accessingUserIsAuthenticated:!1,dateMinuteInFutureFormat:"in a few seconds",dateMinutesInFutureFormat:"in {0} minutes",dateHourInFutureFormat:"in over an hour",dateHoursInFutureFormat:"in {0} hours",dateDayInFutureFormat:"in {0} day",dateDaysInFutureFormat:"in {0} days",dateMonthInFutureFormat:"in {0} month",dateMonthsInFutureFormat:"in {0} months",dateYearInFutureFormat:"in over {0} year",
dateYearsInFutureFormat:"in over {0} years",dateNowAgoFormat:"now",dateMinuteAgoFormat:"a few seconds ago",dateMinutesAgoFormat:"{0} minutes ago",dateHourAgoFormat:"{0} hour ago",dateHoursAgoFormat:"{0} hours ago",dateDayAgoFormat:"{0} day ago",dateDaysAgoFormat:"{0} days ago",dateMonthAgoFormat:"{0} month ago",dateMonthsAgoFormat:"{0} months ago",dateYearAgoFormat:"over {0} year ago",dateYearsAgoFormat:"over {0} years ago",reflowBreakpoint:670,previewZoomIn:"Zoom In",previewZoomOut:"Zoom Out",previewClose:"Close",
scheduledFileStatusUrl:"",enableGlobalForm:!1,collapseExpandedItem:"Collapse",nonDurableProgressTip:"Progress will cancel if you leave.",nonDurableProgressLabel:"Please wait\u2026",maxUploadFileSize:"0"}});r("lib.imagePreview",["lib.globalConfiguration"],function(b,e,g,m){function n(a,b){if(0!==a.indexOf(e.telligent.evolution.site.getBaseUrl())&&0!==a.indexOf(e.telligent.evolution.site.getBaseUrl(!0)))return null;var c;c=b?B.exec(a):F.exec(a);return null!=c?c[1]:null}function f(){if(u.height()<p||
u.width()<k)return d(t),!0;v.css({"max-width":"100%","max-height":"100%"});return!1}function d(a){a?(t=!0,v.css({"max-width":"none","max-height":"none",cursor:"move",position:"absolute",left:"0px",top:"0px","z-index":"1"}).addClass("zoomed"),q.hide(),h.show()):(t=!1,v.css({"max-width":"100%","max-height":"100%",cursor:"auto",position:""}).removeClass("zoomed"),q.show(),h.hide())}function l(){e(document).off(".imageviewer");u.css("opacity","0");var a=u;window.setTimeout(function(){a.remove()},100);
e("body").css("overflow","")}function a(a){var b,c=a.parents("a").first();if(0<c.length&&c.data("imagepreviewurl")){if(b=n(c.data("imagepreviewurl")||"",!1),!b)return!1}else if(b=n(a.attr("src")||"",!0),!b||a.hasClass("ui-ignoreimagepreview")||0<c.length&&0>(c.attr("href")||"").indexOf(b))return!1;return b}function c(b){e(".viewer img, .content-fragment-content .content .content img, .user-defined-markup img, .post-attachment-viewer img",b).each(function(){var b=e(this);b.data("_cursor_applied")||
(b.data("_cursor_applied",!0),a(b)&&b.css({cursor:"zoom-in"}))})}var k,p,u,q,h,w,s,v,t=!1,x=!1,y,z,A,C,B=/\/resized-image(?:\.ashx)?\/__size\/[0-9]+x[0-9]+\/(.+)/i,F=/\/cfs\-file(?:\.ashx)?\/(.+)/i,H=b.previewZoomIn,I=b.previewZoomOut,J=b.previewClose;return{register:function(){H=b.previewZoomIn;I=b.previewZoomOut;J=b.previewClose;c(e("body"));var g;e("body").on("mutate",function(a){clearTimeout(g);g=setTimeout(function(){c(e("body"))},500)});e("body").on("click",".viewer img, .content-fragment-content .content .content img, .user-defined-markup img, .post-attachment-viewer img",
function(b){b=e(b.target);if(b=a(b)){p=k=0;t=!1;u=e('<div class="image-viewer"></div>').css("opacity","0").on("click",function(){l();return!1});q=e('<a href="#" class="zoom-in"></a>').html(H).hide().on("click",function(){d(!0);return!1});h=e('<a href="#" class="zoom-out"></a>').html(I).hide().on("click",function(){d(!1);return!1});w=e('<a href="#" class="close"></a>').html(J).on("click",function(){l();return!1});var c=e('<div class="image-viewer-inner"></div>');s=e('<span class="ui-loading"></span>');
v=e('<img src="'+e.telligent.evolution.site.getBaseUrl()+"cfs-file/"+b+'" />').hide().css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",opacity:"0","max-width":"none","max-height":"none"}).on("load",function(){s.hide().remove();v.show();k=v.outerWidth(!0);p=v.outerHeight(!0);f();v.css("opacity","1")}).on("click",function(a){a.stopPropagation();a.preventDefault()}).on("doubletap",function(a){f()&&
(t=!t,d(t));return!1}).on("mousemove pan",function(a){x&&(u.scrollTop(A+(y-a.pageY)),u.scrollLeft(C+(z-a.pageX)))}).on("mousedown panstart",function(a){t&&(x=!0,A=u.scrollTop(),C=u.scrollLeft(),y=a.pageY,z=a.pageX,a.preventDefault())}).on("mouseup panend",function(){x=!1});e("body").css("overflow","hidden");e(document).off(".imageviewer").on("pointerstart.imageviewer",".image-viewer",function(a){a=this.scrollTop;var b=this.scrollHeight,c=a+this.offsetHeight;0===a?this.scrollTop=1:c===b&&(this.scrollTop=
a-1)}).on("pointermove.imageviewer",{passive:!1},function(a){for(var b=a.target,c=!1;null!==b;){if(b.classList&&b.classList.contains("image-viewer")){c=!0;break}b=b.parentNode}c||a.preventDefault()});c.append(s).append(v);u.append(q).append(h).append(w).append(c);e("body").append(u);u.css("opacity","1");return!1}})}}},jQuery,window);r("lib.jQueryShim",function(b,e,g){return{shim:function(){}}},jQuery,window);r("lib.jsSupport",["lib.cookies"],function(b,e,g,m){return{setCookie:function(e){b.set(".te.js",
1)}}},jQuery,window);r("lib.keyboardActive",function(b,e,g){var m=!1,n=function(){m?b("body").addClass("keyboard-active"):b("body").removeClass("keyboard-active")};return{init:function(){b(e.document).on("keydown",function(b){m||(m=!0,n())}).on("mousedown mouseup mousemove",function(b){m&&(m=!1,n())})}}},jQuery,window);r("lib.legacyFormFilter",["lib.util","lib.globalConfiguration"],function(b,e,g,m,n){var f=!1,d=/\<form(\s|>)/i,l=function(a){try{f=!0;if("string"==typeof a){if(!d.test(a))return f=
!1,a;var b=document.createElement("div");b.innerHTML=a;a=b.childNodes}var k=g(a),p=k.find("form"),b=!1;0<p.length&&(p.children().unwrap(),b=!0);if(0<k.filter("form").length){var b=!0,e=[];k.each(function(){var a=g(this);a.is("form")?a.children().each(function(){e.push(this)}):e.push(this)});k=g(e)}f=!1;return b?k:a}catch(l){return f=!1,a}};return{init:function(){e.enableGlobalForm&&g.each("html append prepend after before replaceWith".split(" "),function(a,c){g.fn[c]=b.wrap(g.fn[c],{filterArguments:function(a){var b=
arguments;!f&&0<b.length&&(b[0]=l(b[0]));return b}})})}}},jQuery,window);r("lib.lruCache",function(b,e,g){var m={size:10,load:function(){},persist:function(b){}};return function(e){function f(){var a=l.load();a||(a={},l.persist(a));return a}var d,l=b.extend({},m,e||{load:function(){return d},persist:function(a){d=a}});return{size:function(){return l.size},get:function(a){var b=f();return b[a]!==g?(b[a].lastAccess=(new Date).getTime(),l.persist(b),b[a].value):null},set:function(a,b){var d=f();if(d[a]!==
g)d[a].lastAccess=(new Date).getTime(),d[a].value=b;else{var p;if(Object.keys)p=Object.keys(d);else{p=[];for(var e in d)d.hasOwnProperty(e)&&p.push(e)}if(p.length>=l.size){p=null;for(var q in d)null==p?p=q:d[q].lastAccess<d[p].lastAccess&&(p=q);null!==p&&delete d[p]}d[a]={lastAccess:(new Date).getTime(),value:b}}l.persist(d)},del:function(a){var b=f();delete b[a];l.persist(b)}}}},jQuery,window);r("lib.messageLinks",function(b,e,g){return function(e){e=e||{};var g=b(e.parent);return{handle:function(e){g.on(e||
"click","a[data-messagename], [data-href]",function(d){null!=b(this).data("messagename")&&0<b(this).data("messagename").length?(d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),b.telligent.evolution.messaging.publish(b(this).data("messagename"),{target:this}),0<b(this).closest(".links-popup-panel").length&&b.fn.uilinks.hide()):0<b(this).data("href").length&&("a"!==d.target.tagName.toLowerCase()&&0==b(d.target).parent("a").length)&&(d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),
location.href=b(this).data("href"))})}}}},jQuery,window);r("lib.reflow",["module.messaging","lib.cookies"],function(b,e,g,m,n){function f(a){var b=a.singleColumnContainers.first().is(":visible"),d=g(m).width();b&&d>a.minWidth?l(a,"originalRegion",function(a,b){return a.originalOrder-b.originalOrder},function(){a.containers.show();a.singleColumnContainers.hide()}):!b&&d<=a.minWidth&&l(a,"singleColumnRegion",function(a,b){return a.responsiveOrder==b.responsiveOrder?a.regionOrder==b.regionOrder?a.originalOrder-
b.originalOrder:a.regionOrder-b.regionOrder:a.responsiveOrder-b.responsiveOrder},function(){a.singleColumnContainers.show();a.containers.hide()})}function d(a){if(!a.fragments){a.fragments=[];for(var b=a.singleColumnContainers.first().is(":visible")?a.singleColumnContainers:a.containers,d=0;d<b.length;d++)g(".content-fragment",b[d]).each(function(){var b=(g(this).data("reflow")||"").split(",");5===b.length&&a.fragments.push({fragment:g(this),originalRegion:g("#"+b[0]+" .layout-region-inner").first(),
singleColumnRegion:g("#"+b[1]),responsiveOrder:parseInt(b[2],10),regionOrder:parseInt(b[3],10),originalOrder:parseInt(b[4],10)})})}}function l(a,k,p,e){d(a);if(!a.reflowing){b.publish("reflow.reflowstart",{target:"originalRegion"==k?a.singleColumnContainers:a.containers});a.reflowing=!0;a.fragments.sort(p);for(p=0;p<a.fragments.length;p++)a.fragments[p].fragment.appendTo(a.fragments[p][k]);e();a.reflowing=!1;b.publish("reflow.reflowend",{target:"originalRegion"==k?a.containers:a.singleColumnContainers})}}
function a(){e.set(".te.w",g(m).width())}return{monitor:function(b){var d=[];b=g(".header-fragments.evolution-reflow-container:not(.single-column)");0<b.length&&d.push({containers:b,singleColumnContainers:g(".header-fragments.evolution-reflow-container.single-column"),minWidth:parseInt(b.data("reflow-width"),10)});var p=g(".content-fragment-page.evolution-reflow-container:not(.single-column)");0<b.length&&d.push({containers:p,singleColumnContainers:g(".content-fragment-page.evolution-reflow-container.single-column"),
minWidth:parseInt(p.data("reflow-width"),10)});p=g(".footer-fragments.evolution-reflow-container:not(.single-column)");0<b.length&&d.push({containers:p,singleColumnContainers:g(".footer-fragments.evolution-reflow-container.single-column"),minWidth:parseInt(p.data("reflow-width"),10)});a();0<d.length&&(g.each(d,function(a,b){f(b)}),g(m).on("resized",function(){a();g.each(d,function(a,b){f(b)})}))}}},jQuery,window);r("lib.scrollFix",function(b,e,g){function m(b){var e,d=b.get(0);b.on("pointerstart",
function(b){e=d.scrollTop;0>=e&&(d.scrollTop=1);e+d.offsetHeight>=d.scrollHeight&&(d.scrollTop=d.scrollHeight-d.offsetHeight-1);originalScrollLeft=d.scrollLeft;0>=originalScrollLeft&&(d.scrollLeft=1);originalScrollLeft+d.offsetWidth>=d.scrollWidth&&(d.scrollLeft=d.scrollWidth-d.offsetWidth-1)})}return{preventBounce:function(e){e=e||b("body").children().first();m(e)},fix:function(b){b.on("touchmove.scrollfix mousemove.scrollfix mspointermove.scrollfix",function(b){b.originalEvent.preventDefault()})},
unfix:function(b){b.off(".scrollfix")}}},jQuery,window);r("lib.sheet",["lib.scrollFix","module.messaging"],function(b,e,g,m,n){function f(a){a.inited||(a.inited=!0,a.backDrop=g(document.createElement("div")).css({backgroundColor:a.backgroundColor,opacity:0.01,zIndex:1E4,position:"fixed",top:0,left:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent),a.sheet=g(document.createElement("div")).css({zIndex:10001,
position:"fixed",left:0,top:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(a.parent).addClass(a.cssClass),a.sheet.on("click","a",function(){var a=g(this);(a=a.attr("href")||a.closest("[href]").attr("href"))&&(1<a.length&&g.telligent&&g.telligent.evolution&&g.telligent.evolution.mobile)&&g.telligent.evolution.mobile.load(a)}),k(a))}function d(a){a.windowWidth=0<window.innerWidth?window.innerWidth:screen.width;
a.windowHeight=0<window.innerHeight?window.innerHeight:screen.height;a.visible?(a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight})):(a.backDrop&&a.backDrop.css({width:a.windowWidth,height:a.windowHeight}),a.sheet&&a.sheet.css({width:a.windowWidth,maxHeight:a.maxHeightPerent*a.windowHeight}))}function l(a,b,c){c=c||a.animationDuration;a.backDrop.evolutionTransform({opacity:a.backDrop.css("opacity")}).evolutionTransform({opacity:0.01+
b*a.backgroundOpacity},{duration:c,easing:a.animationEasing});a.sheet.evolutionTransform({y:a.windowHeight-b*a.sheet.outerHeight(),x:0},{duration:c,easing:a.animationEasing});1<=b?a.onOpened&&(m.clearTimeout(a.openedTimeout),a.openedTimeout=m.setTimeout(function(){a.onOpened.apply(this);m.clearTimeout(a.openedTimeout)},c)):0>=b&&a.onClosed&&(m.clearTimeout(a.closedTimeout),a.closedTimeout=m.setTimeout(function(){a.onClosed.apply(this);m.clearTimeout(a.closedTimeout)},c))}function a(a,b){a.visible||
(g("body").css({height:"100%",overflow:"scroll"}),a.visible=!0,a.onOpening&&a.onOpening.apply(this),f(a),d(a),a.sheet.empty().append(b),a.sheet.evolutionTransform({y:a.windowHeight,x:0}),a.backDrop.get(0).style.display="block",a.sheet.get(0).style.display="block",l(a,1))}function c(a,b){a.visible&&(g("body").css({height:"100%",overflow:"visible"}),a.visible=!1,b=b||a.animationDuration,a.onClosing&&a.onClosing.apply(this),l(a,0),m.setTimeout(function(){a.visible||(a.visible=!1,a.backDrop.get(0).style.display=
"none",a.sheet.get(0).style.display="none")},b))}function k(a){a.backDrop.on("tap",function(){c(a)})}return function(b){b=b||{};b.maxHeightPerent=b.maxHeightPerent||0.85;b.parent=g(b.parent);b.cssClass=b.cssClass||"sheet";b.backgroundColor=b.backgroundColor||"#333";b.backgroundOpacity=b.backgroundOpacity||0.5;b.animationDuration=b.animationDuration||250;b.animationEasing=b.animationEasing||"cubic-bezier(0.160, 0.060, 0.450, 0.940)";b.visible=!1;g.telligent.evolution.messaging.subscribe("mobile.orientationchange",
function(){m.setTimeout(function(){d(b)},300)});return{show:function(c){a(b,c)},hide:function(){c(b)}}}},jQuery,window);r("lib.sheetProvider",function(b,e,g){return{}},jQuery,window);r("lib.shortcutRegistry",function(b,e,g){function m(a){return a&&a.scope&&document.activeElement?a.scope==document.activeElement||a.scope.contains(document.activeElement):!0}function n(a,d,e){c="number"==typeof d.which?d.which:d.keyCode;matchingRoute=null;for(var f=0;f<a.routes.length;f++)if(a.routes[f].handler.direction===
e&&a.routes[f].keyCode===c&&d.altKey===a.routes[f].altKey&&d.ctrlKey===a.routes[f].ctrlKey&&d.metaKey===a.routes[f].metaKey&&d.shiftKey===a.routes[f].shiftKey&&m(a.routes[f].handler)){matchingRoute=a.routes[f];break}return matchingRoute?(a=matchingRoute.handler.callback.apply(this,[{target:d.target,isInput:b(d.target).is("input,textarea")||d.target&&d.target.activeElement&&b(d.target.activeElement).is("iframe"),event:d,combination:matchingRoute.combination}]),a===g?!0:a):!0}function f(a){a.inited||
(a.inited=!0,a.previous=null,b(document).on("keydown.keyboardRegistrar",function(b){return n(a,b,l.down)}),b(document).on("keyup.keyboardRegistrar",function(b){return n(a,b,l.up)}))}function d(a){b(document).off("keyboardRegistrar");a.routes=[];a.handlers=[]}var l={up:1,down:2},a={LEFT:37,UP:38,RIGHT:39,DOWN:40,TAB:9,RET:13,ESC:27,COMMA:188,SLASH:191,PERIOD:190,SHIFT:16,ALT:18,OPT:18,CTRL:17,META:91,CMD:91},c;return function(c){var e=c||{};e.routes=[];e.handlers=[];e.inited=!1;return{register:function(c,
d,h){h=h||{};f(e);if(c&&d){d={description:h.description||null,callback:d,direction:l[h.direction]||l.down,namespace:h.namespace||null,scope:b(h.scope||null).get(0),routes:[]};c=Array.isArray(c)?c:[c];for(h=0;h<c.length;h++){for(var k={combination:c[h],keyCode:null,keyCharacter:null,altKey:!1,metaKey:!1,shiftKey:!1,ctrlKey:!1,handler:d},g=c[h].toUpperCase().split("+"),n=0;n<g.length;n++){var t=b.trim(g[n]);k.keyCharacter=t;"ALT"!==t&&"OPT"!==t||1==g.length&&k.handler.direction==l.up?"META"!==t&&"CMD"!==
t||1==g.length&&k.handler.direction==l.up?"CTRL"!==t||1==g.length&&k.handler.direction==l.up?"SHIFT"!==t||1==g.length&&k.handler.direction==l.up?k.keyCode=a[t]?a[t]:t.charCodeAt(0):k.shiftKey=!0:k.ctrlKey=!0:k.metaKey=!0:k.altKey=!0}d.routes.push(k);e.routes.push(k);k.id=e.routes.length}e.handlers.push(d);d.id=e.handlers.length;return k.id}},unregister:function(a){if(a===g)e.routes=[],e.handlers=[];else if("string"===typeof a)e.routes=e.routes.filter(function(b){if(b.handler.namespace){if("string"==
typeof b.handler.namespace)return b.handler.namespace!==a;if(Array.isArray(b.handler.namespace))return!b.handler.namespace.includes(a)}else return!0}),e.handlers=e.handlers.filter(function(b){if(b.namespace){if("string"==typeof b.namespace)return b.namespace!==a;if(Array.isArray(b.namespace))return!b.namespace.includes(a)}else return!0});else{var b=e.routes[a];b&&(e.handlers.splice(b.handler.id-1,1),e.routes.splice(a-1,1))}e.routes&&0!==e.routes.length&&a||d(e)},list:function(a){return a&&a.scoped?
(e.handlers||[]).filter(function(a){return m(a)}):e.handlers},captureFocus:function(){e.focusedElement=document.activeElement},refocus:function(){if(e.focusedElement)try{b(e.focusedElement).is("iframe")?setTimeout(function(){e.focusedElement&&(b(e.focusedElement.contentWindow.document).find("body[contenteditable]").get(0).focus(),e.focusedElement=null)},1):(e.focusedElement.focus(),e.focusedElement=null)}catch(a){}}}}},jQuery,window);r("lib.storageProxy",["lib.storageShim"],function(b,e,g){function m(b){this._contextualStore=
b.isSystemAccount?g.sessionStorage:g.localStorage;this._user=b}b.shim();m.prototype.set=function(b,e){this._contextualStore&&this._contextualStore.setItem("tc:"+((this._user.isSystemAccount?"":this._user.id+":")+b),JSON.stringify(e))};m.prototype.get=function(b){if(this._contextualStore)return JSON.parse(this._contextualStore.getItem("tc:"+((this._user.isSystemAccount?"":this._user.id+":")+b)))};m.prototype.del=function(b){this._contextualStore&&this._contextualStore.removeItem("tc:"+((this._user.isSystemAccount?
"":this._user.id+":")+b))};m.prototype.empty=function(){this._contextualStore&&this._contextualStore.clear()};return m},jQuery,window);r("lib.storageShim",function(b,e,g){function m(){Storage.prototype.setItem=function(b,e){n[b]=e};Storage.prototype.getItem=function(b){b=n[b];return b===g?null:b};Storage.prototype.removeItem=function(b){delete n[b]};Storage.prototype.clear=function(){n={}}}var n={},f=!1;return{shim:function(){if(!f){f=!0;var b;try{localStorage.setItem("_te","_te"),localStorage.removeItem("_te"),
b=!0}catch(e){b=!1}b||m()}}}},jQuery,window);r("lib.touchEventAdapter",["lib.util","events.gestures","events.pointers"],function(b,e,g,m,n,f){function d(){m.fn.on=m.fn.bind=l(m.fn.on,a,!0);m.fn.trigger=l(m.fn.trigger,a,!1);m.fn.off=m.fn.unbind=l(m.fn.off,a,!1)}function l(a,b,c){return function(){var h=Array.prototype.slice.call(arguments,0);if(c&&1===h.length&&m.isPlainObject(h[0])){var d=h[0];m.each(b,function(a,b){d[a]!=f&&(d[b]=d[a],delete d[a])});return a.call(this,d)}if("string"!=typeof h[0])return a.apply(this,
h);for(var k=[],l=h[0].split(" "),n=0;n<l.length;n++)if(l[n]&&0<l[n].length){var x=l[n].split(".",2);if(2==x.length&&(x[1]==e.eventNamespace||x[1]==g.eventNamespace))return a.apply(this,h);x[0]=b[x[0]]||x[0];k.push(x.join("."))}h[0]=k.join(" ");return a.apply(this,h)}}var a={mouseenter:"taphold",mouseover:"taphold",mouseleave:"pointerend",mouseup:"pointerend"},c="ontouchstart"in n||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints;b=/windows nt/.test(navigator.userAgent.toLowerCase());var k=
"MouseEvent"in n&&(!("ontouchstart"in n)||b);return{adapt:function(){return n._evolution_adapt_mouse_touch_events!==f?n._evolution_adapt_mouse_touch_events?(d(),!0):!1:c&&!k?(d(),!0):!1}}},jQuery,window);r("lib.util",function(b,e){function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var m=function(){var b=/[.*+?^${}()|[\]\\]/g;return function(e){return e.replace(b,"\\$&")}}();return{requestAnimationFrameThrottle:function(b){if(!window.requestAnimationFrame)return b;var e;
return function(){var d=arguments;e&&window.cancelAnimationFrame(e);e=window.requestAnimationFrame(function(){b.apply(void 0,d)})}},throttle:function(e,f){var d,l;return function(){var a=this,c=(new Date).getTime(),k=arguments;d&&d+(f||50)>c?(b.clearTimeout(l),l=b.setTimeout(function(){d=c;e.apply(a,k)},f||50)):(d=c,e.apply(a,k))}},debounce:function(b,e){var d;return function(){var l=this,a=arguments;clearTimeout(d);d=setTimeout(function(){b.apply(l,a)},e||10)}},wrap:function(b,e){return function(){var d=
arguments;try{e.filterArguments&&(d=e.filterArguments.apply(this,d))}catch(l){}try{e.before&&e.before.apply(this,d)}catch(a){}var c=b.apply(this,d);try{e.after&&e.after.apply(this,d)}catch(k){}try{e.filterResponse&&(c=e.filterResponse.apply(this,c))}catch(p){}return c}},guid:function(){return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()},isArray:function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)},indexOf:function(b,e,d){if(Array.prototype.indexOf)return b.indexOf(e,
d);if(null==b)throw new TypeError('"this" is null or not defined');b=Object(b);var l=b.length>>>0;if(0===l)return-1;d=+d||0;Infinity===Math.abs(d)&&(d=0);if(d>=l)return-1;for(d=Math.max(0<=d?d:l-Math.abs(d),0);d<l;){if(d in b&&b[d]===e)return d;d++}return-1},isPartiallyVisible:function(e,f,d){d=d||0;if(e==document||e instanceof jQuery&&(e.get(0)==document||e.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():f.getBoundingClientRect();return 0<l.top-d&&l.top+d<=(b.innerHeight||
document.documentElement.clientHeight)||0<l.bottom-d&&l.bottom+d<=(b.innerHeight||document.documentElement.clientHeight)}e=$(e);l=f.offset().top;f=l+f.height();var a=e.offset().top;e=a+e.height();return l+d>=a&&l-d<=e||f-d<=e&&f+d>=a},isFullyVisible:function(e,f,d){d=d||0;if(e==document||e instanceof jQuery&&(e.get(0)==document||e.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():f.getBoundingClientRect();return 0<l.top-d&&l.top+d<=(b.innerHeight||document.documentElement.clientHeight)&&
0<l.bottom-d&&l.bottom+d<=(b.innerHeight||document.documentElement.clientHeight)}e=$(e);l=f.offset().top;f=l+f.height();var a=e.offset().top;e=a+e.height();return l+d>=a&&f-d<=e},scrollParent:function(b,e){b=$(b);var d=b.css("position"),l="absolute"===d,a=e?/(auto|scroll|hidden)/:/(auto|scroll)/,c=b.parents().filter(function(){var b=$(this);return l&&"static"===b.css("position")?!1:a.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==d&&c.length?c:$(b[0].ownerDocument||
document)},isInDom:function(b){return b?b instanceof jQuery?document.contains?document.contains(b[0]):document.body.contains(b[0]):document.contains?document.contains(b):document.body.contains(b):!1},compileReplacer:function(b){var e=[];$.each(b,function(a,b){e.push(m(a))});var d="("+e.join("|")+")",l=RegExp(d),a=RegExp(d,"g"),c=function(a){return b[a]};return function(b){return b&&l.test(b)?b.replace(a,c):b}},escapeRegEx:m,isOverElement:function(b){if(!b)return!1;b instanceof jQuery&&0<b.length&&
(b=b.get(0));var e=document.querySelectorAll(":hover");if(!e||0==e.length)return!1;e=e[e.length-1];return b==e||b.contains(e)}}},window);r("modules","module.emailDigest module.administrationToolbar module.configuration module.editableGroup module.html module.language module.media module.messaging module.navigationConfirmation module.notifications module.preview module.regex module.sockets module.template module.ui module.url module.tourtips module.rest module.administration module.administrationContextManager module.themePreview module.presence module.systemNotifications module.javaScript module.scriptRendering module.scheduledFile module.contentPeek".split(" "),
function(){return{}});r("module.administration",["module.messaging","module.url","lib.util","lib.globalConfiguration","module.administrationNavigationConfirmationRegistrar"],function(b,e,g,m,n,f,d,l){function a(a){p(a,!0);y(a,!0);a.customPanelHashKey=P+Math.floor(1E9*Math.random());a.currentPanelOffset=0;a.rootPanelNode=a.panelNode;a.rootPanelId=a.panelId;var b=e.hashData();delete b[a.customPanelHashKey];a.rootUrl="#"+e.serializeQuery(b);b={panelId:a.panelId,name:a.panelName,content:f.Deferred(function(b){b.resolve(a.panelNode)}).promise(),
cssClass:"",header:"",root:!0,offset:0,url:a.rootUrl,renderedNode:a.panelNode};a.stack.push(b);a.rootPanelNode.data("namespace",h(a,a.currentPanelOffset));N(a,a.panelNode);if(a.onTitle&&a.panelName)a.onTitle(a.panelName);n.init()}function c(a,b){r(a);if(a.stack&&1<a.stack.length){var c=a.stack[a.currentPanelOffset].renderedNode;a.onRendering&&(a.onRendering(c),f.fn.uilinks.hide());c.evolutionTransform({left:1*c.outerWidth(!0)},{duration:a.transitionDuration,easing:a.transitionEasing,complete:function(){c.remove()}});
q(a,D.panelHidden,c,{direction:"none"});q(a,D.panelUnloaded,c);for(var h=a.currentPanelOffset-1;0<=h;h--){var d=a.stack[h].renderedNode;q(a,D.panelUnloaded,d);d.remove()}}else 1==a.stack.length&&(h=a.stack[0].renderedNode,q(a,D.panelHidden,h,{direction:"none"}),q(a,D.panelUnloaded,h),h.remove());f.fn.evolutionTip.hide();F(a);w(a);y(a);if(a.onDispose)a.onDispose()}function k(a){var b=e.hashData(),c=a.onParsePanelId(d.location.href);if(b&&b[a.customPanelHashKey]!==l){b=parseInt(b[a.customPanelHashKey],
10);if(b>a.stack.length-1)return!1;if(b<a.currentPanelOffset){for(var c=[O],k=0;k<=b;k++)c.push(h(a,k));n.suppress(c);if(!a.confirmNavigation())return n.unsuppress(),!1;n.unsuppress()}b=a.stack[b];b.url=d.location.href;v(a,b);return!0}if(a.rootPanelId==c){c=[O,h(a,0)];n.suppress(c);if(!a.confirmNavigation())return n.unsuppress(),!1;n.unsuppress();v(a,a.stack[0]);return!0}return!1}function p(a,b){a.stack=[];a.currentPanelOffset=0;a.rootPanelNode=null;a.rootPanelId=null;a.rootUrl=null}function u(a,
b){for(var c=b?[]:[O],d=a.currentPanelOffset;0<=d;d--)c.push(h(a,d));return c}function q(a,c,h,d){if(!a.sleeping&&(d=d||{},h)){switch(c){case D.panelLoaded:if(!0===f(h).data("_ap_loaded"))return;f(h).data("_ap_loaded",!0);break;case D.panelUnloaded:if(!1===f(h).data("_ap_loaded"))return;f(h).data("_ap_loaded",!1);break;case D.panelShown:if(!0===f(h).data("_ap_shown"))return;f(h).data("_ap_shown",!0);break;case D.panelHidden:if(!1===f(h).data("_ap_shown"))return;f(h).data("_ap_shown",!1)}a=h.data("namespace")||
"";b.publish(c,f.extend({},d,{panelId:a}))}}function h(a,b){var c=O;a.rootPanelId&&(c=c+":"+a.rootPanelId,b&&(c=c+":"+b));return c}function w(a){a.suppressedNameSpaces=u(a,!0);for(var c=0;c<a.suppressedNameSpaces.length;c++)b.unsubscribe(a.suppressedNameSpaces[c]),f.telligent.evolution.shortcuts.unregister(a.suppressedNameSpaces[c]),n.unRegisterByTag(a.suppressedNameSpaces[c])}function s(a){a&&(b.unsubscribe(a),f.telligent.evolution.shortcuts.unregister(a),n.unRegisterByTag(a))}function v(a,b){for(var c=
a.stack[a.currentPanelOffset].renderedNode,h=a.stack.length;h>=(b.offset||0)+2;h--)a.stack.pop();var d={direction:b.offset>a.currentPanelOffset?"forward":"backward",panel:b};if(b.renderedNode)d.renderedNode=b.renderedNode,d.scrollTop=b.scrollTop,t(a,d,c);else{if(a.onOpening)a.onOpening();var k=a.stack[a.currentPanelOffset];a.onRendering&&(c=k.renderedNode,a.onRendering(c),f.fn.uilinks.hide());h=e.hashData();k.root?delete h[a.customPanelHashKey]:h[a.customPanelHashKey]=k.offset;var l="#"+e.serializeQuery(h);
b.content.then(function(h){if(a.onOpened)a.onOpened();d.templatableContent={name:b.name,content:h,panelId:b.panelId,cssClass:b.cssClass||"",backUrl:l,backLabel:k.name};t(a,d,c)})["catch"](function(){if(a.onOpened)a.onOpened();if(a.onRendered)a.onRendered();window.location=l})}}function t(a,b,c){var d,e;a.currentPanelOffset=b.panel.offset;var k=F(a,b.panel.size);b.renderedNode?(d=b.renderedNode,e=!1):(f.telligent.evolution.ui.suppress(function(){var c=f.extend({contentClass:"",panelId:"",rootPanelId:a.rootPanelId,
namespace:h(a,b.panel.offset),description:"",name:""},b.templatableContent);d=f(a.template(c));b.templatableContent.content&&"string"!==typeof b.templatableContent.content&&d.find(a.panelContentSelector).first().append(b.templatableContent.content)}),e=!0,b.panel.renderedNode=d,a.onRendering&&(a.onRendering(d),f.fn.uilinks.hide()));if(a.onTitle&&b.panel&&b.panel.name)a.onTitle(b.panel.name);N(a,d);if(b.direction&&"forward"==b.direction){if(c!==d){f.fn.evolutionTip.hide();a.loadingPanel=!0;q(a,D.panelHidden,
c,{direction:"forward"});a.onRendering&&(a.onRendering(c),f.fn.uilinks.hide());c.evolutionTransform({left:-1*c.outerWidth(!0)},{duration:a.transitionDuration,easing:a.transitionEasing});a.container.one("rendered",function(){e&&q(a,D.panelLoaded,d)});d.css({position:"absolute",top:0,width:k||a.container.width(),height:a.container.height()}).appendTo(a.container);d.evolutionTransform({left:1*a.container.width()},{duration:0}).evolutionTransform({left:0},{duration:a.transitionDuration,easing:a.transitionEasing,
complete:function(){q(a,D.panelShown,d);x(a)}});if(a.onRendered)a.onRendered(d);f.fn.evolutionTip.hide()}}else if(c!==d){f.fn.evolutionTip.hide();a.loadingPanel=!0;q(a,D.panelHidden,c,{direction:"backward"});q(a,D.panelUnloaded,c);a.onRendering&&(a.onRendering(c),f.fn.uilinks.hide());c.evolutionTransform({left:1*(k||c.outerWidth(!0))},{duration:a.transitionDuration,easing:a.transitionEasing});d.css({position:"absolute",top:0,width:k||a.container.width(),height:a.container.height()});e&&q(a,D.panelLoaded,
d);if(a.onRendered)a.onRendered(d);d.evolutionTransform({left:-1*a.container.width()},{duration:0}).evolutionTransform({left:0},{duration:a.transitionDuration,easing:a.transitionEasing,complete:function(){q(a,D.panelShown,d);x(a)}});f.fn.evolutionTip.hide()}b.scrollTop&&(d.find(a.panelContentSelector).first().get(0).scrollTop=b.scrollTop);y(a)}function x(a){a.loadingPanel=!1;if(a.onAnimated)a.onAnimated();if(a.delayedOpen){var b=a.delayedOpen;delete a.delayedOpen;setTimeout(function(){b()},10)}}function y(a,
b){var c=a.transitionDuration;clearTimeout(a.panelCleanupTimeout);a.panelCleanupTimeout=setTimeout(function(){var c=null;a.ignoreOnDispose&&(c=a.ignoreOnDispose());(b?a.container.children('[data-rootpanelid!="'+a.rootPanelId+'"][data-panelid="'+a.rootPanelId+'"]'):a.container.children('[data-rootpanelid="'+a.rootPanelId+'"]')).each(function(){var b=f(this);if(!(b.data("rootpanelid")===l||b&&c&&1==b.length&&1==c.length&&b.get(0)===c.get(0))){var h=b.data("panelid");if(h&&0<h.length){var d=f.grep(a.stack,
function(a){return a.panelId&&a.panelId==h});d&&0!=d.length||(s(b.data("namespace")),b.remove())}}})},c)}function z(a){var b=a.stack[a.currentPanelOffset];b.scrollTop=b.renderedNode.find(a.panelContentSelector).first().get(0).scrollTop}function A(a,c){var d=function(){var d=f.extend({panelId:g.guid(),offset:a.stack.length,name:"",content:"",cssClass:"",header:""},c);z(a);if(!d.content.done){var k=d.content;d.content=f.Deferred(function(a){a.resolve(k)}).promise()}if(!d.header.done){var l=d.header;
d.header=f.Deferred(function(a){a.resolve(l)}).promise()}a.stack.push(d);var p=h(a,a.stack.length-1),q=[O,p];d.loaded&&b.subscribe(D.panelLoaded,q,function(b){a.sleeping||b.panelId==p&&d.loaded()},{excludeAutoNameSpaces:!0});d.unloaded&&b.subscribe(D.panelUnloaded,q,function(b){a.sleeping||b.panelId==p&&d.unloaded()},{excludeAutoNameSpaces:!0});d.shown&&b.subscribe(D.panelShown,q,function(b){a.sleeping||b.panelId==p&&d.shown()},{excludeAutoNameSpaces:!0});d.hidden&&b.subscribe(D.panelHidden,q,function(b){a.sleeping||
b.panelId==p&&d.hidden(b)},{excludeAutoNameSpaces:!0});d.size&&b.subscribe(D.panelLoaded,q,function(b){a.sleeping||b.panelId==p&&B(a,d.size)},{excludeAutoNameSpaces:!0});if(d.header)var w=b.subscribe(D.panelLoaded,q,function(c){a.sleeping||c.panelId!=p||(setTimeout(function(){b.unsubscribe(w)},a.transitionDuration/2),d.header.then(function(b){if(b){var c=a.stack[a.currentPanelOffset].renderedNode;c&&(c.find(a.panelHeaderContentSelector).empty().append(b),I(a,c))}})["catch"](function(){if(a.onOpened)a.onOpened();
if(a.onRendered)a.onRendered();C(a)}))},{excludeAutoNameSpaces:!0});q={};q[a.customPanelHashKey]=a.stack.length-1;e.hashData(q)};a.loadingPanel?a.delayedOpen=d:d()}function C(a,b){if(b&&b.all&&a.onCloseAll)a.onCloseAll();else if(0<a.currentPanelOffset){var c=a.stack[a.currentPanelOffset-1];c&&c.url&&(window.location=c.url)}else if(a.onCloseAll)a.onCloseAll()}function B(a,b,c){if(a){var h=a.stack[a.currentPanelOffset];if(h)return h.size=b,F(a,h.size,c)}}function F(a,b,c){if(a.onResize){b=a.onResize(b||
"normal");a=a.stack[a.currentPanelOffset];if(!a)return b;a=a.renderedNode;if(!a)return b;a.width(b);return b}return null}function H(a,c,d){var e={"shell.closed":D.shellClosed,"shell.navigation.refreshing":D.shellNavigationRefreshing,"shell.navigation.refreshed":D.shellNavigationRefreshed,"panel.unloaded":D.panelUnloaded,"panel.loaded":D.panelLoaded,"panel.shown":D.panelShown,"panel.hidden":D.panelHidden};if(e[c]!==l&&d!==l){var k=h(a,a.currentPanelOffset);b.subscribe(e[c],u(a),function(b){a.sleeping||
(b.panelId?b.panelId===k&&d.call(E(a).get(0),b):d.call(E(a).get(0),b))},{excludeAutoNameSpaces:!0})}}function I(a,b){var c=b.find(a.panelHeaderSelector).outerHeight(!0);b.find(a.panelContentSelector).first().css({top:c})}function J(a,b){if(a){var c=a.stack[a.currentPanelOffset].renderedNode;if(c&&b&&b.load){var h=b.load;b.load=function(b){a.stack[a.currentPanelOffset].scrollablePageIndex=b;return h(b).then(function(){return!0})};var d=c.find(a.panelContentSelector).first();b.target||(c=d.find("ul.content-list:visible").filter(function(){return"hidden"!=
f(this).css("visibility")}))&&1==c.length&&(b.target=c);b.initialPageIndex=a.stack[a.currentPanelOffset].scrollablePageIndex||b.initialPageIndex||0;0>b.initialPageIndex&&(b.initialPageIndex=0);b.prefill=b.preFillAttempts||10;f(d).evolutionScrollable(b);return{reset:function(){return f(d).evolutionScrollable("reset")}}}}}function Q(a,b){var c=function(b){b=f(b);b.removeClass("expanded");b.find(".expandable-close").remove();b.find(".expandable").each(function(){var b=f(this),c=b.css("display");b.css({display:"none",
height:"auto"});var h=b.height();b.css({display:c,height:h}).evolutionTransform({height:0},{duration:a.transitionDuration/2.5,easing:a.transitionEasing})});b.trigger("collapse")};b.on("click",".content-list.expandable .content-item",function(){var b=f(this);if(!b.hasClass("expanded")){b.closest(".content-list.expandable").find(".content-item.expanded").each(function(){c(this)});b.addClass("expanded");var h=f('<a href="#" class="expandable-close ui-tip" data-tip="'+m.collapseExpandedItem+'"><svg alt="'+
m.collapseExpandedItem+'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="24" height="24"><path d="M10,1.6c-4.639,0-8.4,3.761-8.4,8.4c0,4.639,3.761,8.4,8.4,8.4s8.4-3.761,8.4-8.4C18.4,5.361,14.639,1.6,10,1.6z M14.789,13.061l-1.729,1.729L10,11.729l-3.061,3.06l-1.729-1.729L8.272,10L5.211,6.939L6.94,5.211L10,8.271l3.061-3.061 l1.729,1.729L11.728,10L14.789,13.061z"/></svg></a>');b.prepend(h);b.find(".expandable").each(function(){var b=f(this),c=b.css("display");b.css({display:"none",height:"auto"});
var h=b.height();b.css({display:c,height:0}).evolutionTransform({height:h},{duration:a.transitionDuration/2.5,easing:a.transitionEasing,complete:function(){b.css({height:"auto"})}})});b.trigger("expand")}});b.on("click",".content-list.expandable .content-item.expanded .expandable-close",function(){f(this).closest(".content-item.expanded").each(function(){c(this)});return!1})}function N(a,b){b=f(b);b.data("_handlers_activated")||(b.data("_handlers_activated",!0),Q(a,b))}function r(a,c){a.suppressedNameSpaces&&
b.unsuppress(a.suppressedNameSpaces);a.sleeping=!1;a.suppressedNameSpaces=[];var h=a.stack[a.currentPanelOffset].renderedNode;h&&(c&&c.show)&&q(a,D.panelShown,h)}function E(a){var b=a.stack[a.currentPanelOffset].renderedNode,c=b.data("_wrapper");c&&0!=c.length||(c=b.find(a.panelContentSelector).first(),b.data("_wrapper",c));return c}var P="__cpo",O="ADMINISTRATION_SHELL",D={shellClosed:"context.shell.closed",shellNavigationRefreshing:"context.shell.navigation.refreshing",shellNavigationRefreshed:"context.shell.navigation.refreshed",
panelLoaded:"administration.panel.loaded",panelUnloaded:"administration.panel.unloaded",panelShown:"administration.panel.shown",panelHidden:"administration.panel.hidden"},R={container:null,panelNode:null,panelId:null,panelName:null,onRefresh:function(){},onOpening:function(a){},onOpened:function(){},onRendering:function(){},onRendered:function(){},onCloseAll:function(){},onShow:function(){},onHide:function(){},onResize:function(a){},onAnimated:function(){},confirmNavigation:function(){return!0},onParsePanelId:function(a){},
transitionEasing:"cubic-bezier(0.645, 0.045, 0.355, 1)",transitionDuration:300,template:"",panelContentSelector:".contextual-panel-content",panelHeaderSelector:".contextual-panel-heading",panelHeaderContentSelector:".custom-panel-heading-content",excludeWhenResizingSelector:".contextual-administration-panel-loading"},S={__init:function(h){var p=f.extend({},R,h||{});currentContext=p;a(p);return{postInit:function(){q(p,D.panelLoaded,p.rootPanelNode);q(p,D.panelShown,p.rootPanelNode)},dispose:function(a){c(p,
a)},processHashChange:function(){return k(p)},canProcessHashChange:function(a){if(p.onParsePanelId(d.location.href)==p.rootPanelId){var b=e.hashData();b&&b[p.customPanelHashKey]!==l?(b=parseInt(b[p.customPanelHashKey],10),a=b===p.currentPanelOffset?!a:b>p.stack.length-1?!1:!0):a=0<p.currentPanelOffset?!0:!a}else a=!1;return a},sleep:function(){z(p);var a=p.stack[p.currentPanelOffset].renderedNode;a&&q(p,D.panelHidden,a,{direction:"none"});p.suppressedNameSpaces=u(p,!0);b.suppress(p.suppressedNameSpaces);
p.sleeping=!0},wake:function(){return r(p,{show:!0})},sleeping:function(){return p.sleeping},currentPanelNode:function(){if(!p||!p.stack||0==p.stack.length)return null;var a=p.stack[p.currentPanelOffset];return a?a.renderedNode:null},currentPanelDetails:function(){if(!p||!p.stack||0==p.stack.length)return null;var a=p.stack[p.currentPanelOffset];return a?a:null},context:function(a){a&&(currentContext=a);return currentContext},refreshingNavigation:function(a){if(!p||!p.stack||0==p.stack.length)return!1;
var b=p.stack[p.currentPanelOffset];if(!b)return!1;b=b.renderedNode;"undefined"!==typeof a&&(!p.refreshingNavigation&&a?q(p,D.shellNavigationRefreshing,b):p.refreshingNavigation&&!a&&q(p,D.shellNavigationRefreshed,b),p.refreshingNavigation=a);return p.refreshingNavigation||!1}}},open:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return A(currentContext,a)},close:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return C(currentContext,a)},refresh:function(){if("undefined"!==
typeof currentContext&&null!==currentContext){history.replaceState(null,null,document.location.pathname+currentContext.rootUrl);if(currentContext.onRefresh)currentContext.onRefresh();currentContext.customPanelHashKey=P+Math.floor(1E9*Math.random())}},scrollable:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return J(currentContext,a)},panelId:function(){if("undefined"!==typeof currentContext&&null!==currentContext)return h(currentContext,currentContext.currentPanelOffset)},
panelWrapper:function(){return"undefined"===typeof currentContext||null===currentContext?f([]):E(currentContext)},panelNameSpace:function(a){var b=[];a&&(g.isArray(a)?Array.prototype.push.apply(b,a):b.push(a));if("undefined"===typeof currentContext||null===currentContext)return b;(a=u(currentContext))&&0<a.length&&Array.prototype.push.apply(b,a);return b},header:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext){var c=currentContext,h=b||{},d=c.stack[c.currentPanelOffset].renderedNode;
h&&!1===h.inherit&&d.find(c.panelHeaderTitleSelector).hide();a?d&&(d.find(c.panelHeaderContentSelector).empty().append(a),I(c,d)):I(c,d);return d.find(c.panelHeaderContentSelector)}},sidebar:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return f.Deferred(function(b){if(currentContext.onSideBar&&a&&a.content){currentContext.onSideBar(a.content).then(function(){b.resolve()});var c;H(currentContext,"shell.navigation.refreshing",function(){currentContext.sleeping||(c=currentContext.onSideBar(null).detach())});
H(currentContext,"shell.navigation.refreshed",function(){!currentContext.sleeping&&c&&(currentContext.onSideBar(c),c=null)});H(currentContext,"panel.unloaded",function(a){if(!currentContext.sleeping)currentContext.onSideBar("")})}}).promise()},on:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext)return H(currentContext,a,b)},show:function(){if("undefined"!==typeof currentContext&&null!==currentContext&&currentContext.onShow)currentContext.onShow()},hide:function(){if("undefined"!==
typeof currentContext&&null!==currentContext&&currentContext.onHide)currentContext.onHide()},size:function(a){"undefined"!==typeof currentContext&&null!==currentContext&&B(currentContext,a,!0)},loading:function(a,b){if("undefined"!==typeof currentContext&&null!==currentContext)if(a){if(currentContext.onOpening)currentContext.onOpening(b)}else if(currentContext.onOpened)currentContext.onOpened()},navigationConfirmation:{enable:function(a,b){"undefined"!==typeof currentContext&&null!==currentContext&&
(void 0===a?n.register(n.defaultId,function(){return!0},u(currentContext)):n.register(a,b||function(){return!0},u(currentContext)))},disable:function(a){"undefined"!==typeof currentContext&&null!==currentContext&&(void 0===a?n.unRegisterById(n.defaultId):n.unRegisterById(a))},isEnabled:function(a){if("undefined"!==typeof currentContext&&null!==currentContext)return n.isChanged(a)}}};f.telligent=f.telligent||{};f.telligent.evolution=f.telligent.evolution||{};return f.telligent.evolution.administration=
S},jQuery,window);r("module.administrationContextManager",["module.administration","module.messaging","module.url","lib.util"],function(b,e,g,m,n,f,d){function l(a){return a.contexts[a.contexts.length-1]}var a={onTitle:function(){},onRefresh:function(){},onOpening:function(a){},onOpened:function(){},onRendering:function(){},onRendered:function(){},onCloseAll:function(){},onResize:function(a){},onShow:function(){},onHide:function(){},onAnimated:function(){},confirmNavigation:function(){return!0},onParsePanelId:function(a){},
onDispose:function(){},onSideBar:function(a){},transitionEasing:"cubic-bezier(0.645, 0.045, 0.355, 1)",transitionDuration:300,template:"",panelContentSelector:".contextual-panel-content",panelHeaderSelector:".contextual-panel-heading",panelHeaderTitleSelector:".administration-panel-heading-meta",panelHeaderContentSelector:".custom-panel-heading-content",excludeWhenResizingSelector:".contextual-administration-panel-loading"},c={container:null,panelNode:null,panelId:null,panelName:null};e=function(d){var e=
n.extend({},a,d||{},{contexts:[]});return{addContext:function(a){var d=l(e);null!=d&&d.sleep();a=n.extend({},c,a||{});var h=a.onCloseAll||e.onCloseAll||function(){};a.onCloseAll=function(){if(1<e.contexts.length){var a=e.contexts[e.contexts.length-2].currentPanelDetails();a&&a.url?f.location.href=a.url:h()}else h()};d=b.__init(n.extend({},e,a));d.panelNode=a.panelNode;d.panelRequest=a.panelRequest;d.innerContext=d.context();e.contexts.push(d)},canProcessHash:function(a){for(var b=e.contexts.length-
1;0<=b;b--)if(e.contexts[b].canProcessHashChange(a,b==e.contexts.length-1))return!0;return!1},processHash:function(a){for(var b=e.contexts.length-1;0<=b;b--){if(e.contexts[b].canProcessHashChange(a))return e.contexts[b].sleeping()&&(e.onNavigateBackToPreviousContext(e.contexts[b].currentPanelNode(),{onRendering:e.onRendering,onRendered:e.onRendered}),e.contexts[b].context(e.contexts[b].innerContext),e.contexts[b].wake()),e.contexts[b].processHashChange(a);e.contexts[b].sleeping()&&e.contexts[b].wake();
e.contexts[b].dispose({refreshing:!0});e.contexts[b].sleep();e.contexts.pop()}return!1},postInit:function(){var a=l(e);null!=a&&a.postInit()},dispose:function(a){if(a&&a.all)for(var b=e.contexts.length-1;0<=b;b--)e.contexts[b].dispose(a),e.contexts.pop();else b=l(e),null!=b&&(b.dispose(a),e.contexts.pop())},count:function(){return e.contexts.length},currentPanelNode:function(){var a=l(e);return a?a.currentPanelNode():null},currentPanelRequest:function(){var a=l(e);return a?a.panelRequest:null},currentPanelDetails:function(){var a=
l(e);return a?a.currentPanelDetails():null},previousPanelDetails:function(){if(1>=e.contexts.length)return null;var a=e.contexts[e.contexts.length-2];return a?a.currentPanelDetails():null},refreshingNavigation:function(a){var b=l(e);return b?b.refreshingNavigation(a):null}}};return b.__contextManager=e},jQuery,window);r("module.administrationNavigationConfirmationRegistrar",function(b,e,g){function m(b,d,e){e=e||[];a[b]&&n(b);a[b]={id:b,isChangedFunc:d,tags:e||[]};e.forEach(function(a){c[a]||(c[a]=
[]);0>c[a].indexOf(b)&&c[a].push(b)})}function n(b,d){var e=a[b];e&&(e.tags.forEach(function(a){if(d!=a){var e=c[a],k=e.indexOf(b);0<=k&&e.splice(k,1);0===e.length&&delete c[a]}}),delete a[b])}function f(a){a&&c[a]&&(c[a].forEach(function(b){n(b,a)}),c[a].length=0,delete c[a])}function d(a){if(!a||!a.tags||0==a.tags.length)return!1;for(var b=0;b<a.tags.length;b++)if(!k[a.tags[b]])return!1;return!0}function l(b){var c=[];if(b!==g)a[b]&&!d(a[b])&&c.push(a[b]);else for(var e in a)a.hasOwnProperty(e)&&
(b=a[e],d(b)||c.push(b));for(e=0;e<c.length;e++)if(c[e].isChangedFunc())return!0;return!1}var a={},c={},k={};return{init:function(){b.telligent.evolution.navigationConfirmation.enable("_administration_shell",l)},register:function(a,b,c){m(a,b,c||[])},unRegisterById:function(a){n(a)},unRegisterByTag:function(a){f(a)},isChanged:function(a){return l(a)},suppress:function(a){(a||[]).forEach(function(a){k[a]=!0})},unsuppress:function(){k={}},defaultId:"_default_nav_conf_id"}},jQuery,window);r("module.contentPeek",
["lib.globalConfiguration","module.messaging","lib.util"],function(b,e,g,m,n,f){function d(a){q||(n._preventPeekClose?console.log("PEEK PREVENT CLOSE"):(a&&m(a).off("._contentpeek"),c&&(c.off("._contentpeek"),c.glowPopUpPanel("hide"),p=k=null)))}function l(){var a=m.telligent.evolution.theme.getReflowBreakpoint();return null!==a&&m(n).width()<a}function a(){u||(u=!0,e.subscribe("ui.links.show",function(){q=!0}),{excludeAutoNameSpaces:!0},e.subscribe("ui.links.hide",function(a,b,c){q=!1;g.isOverElement(k)||
d()},{excludeAutoNameSpaces:!0}))}var c,k,p,u=!1,q=!1;m.telligent=m.telligent||{};m.telligent.evolution=m.telligent.evolution||{};m.telligent.evolution.contentPeek=m.extend(m.telligent.evolution.contentPeek||{},{show:function(h,e){a();l()||(k&&g.isOverElement(k)||p===h)||(p=h,m.telligent.evolution.get({url:b.contentPeekUrl,data:{contentTypeId:e.contentTypeId,contentId:e.contentId}}).then(function(a){g.isOverElement(h)&&p==h?(c||(c=m("<div></div>").glowPopUpPanel({cssClass:"content-peek-popup",zIndex:1E3,
position:"updown",hideOnDocumentClick:!1})),k=m('<div class="content-peek-popup-inner content-peek-fragment '+a.cssClass+'"></div>').append(a.peek).on("glowDelayedMouseLeave",250,function(a){g.isOverElement(k)||g.isOverElement(h)||d(h)}),c.off("._contentpeek").on("glowPopUpPanelShowing._contentpeek",m.fn.uilinks.forceRender).glowPopUpPanel("html",k).glowPopUpPanel("show",h)):d(h)})["catch"](function(){p=null}))},hide:function(a){a===f?d():a!=p||(g.isOverElement(a)||g.isOverElement(k))||d(a)}});return{}},
jQuery,window);r("module.emailDigest",function(b,e,g){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m=function(e,f){0>f||(0<f&&""!=e.subscriptionId&&(""==e.context||"undefined"===e.contextId)?_showMessage(e,e.errorMessage):b.telligent.evolution.post({url:e.emailDigestUrl,data:{subscriptionId:e.subscriptionId,frequency:f,context:e.context,contextId:e.contextId},success:function(d){d=eval("("+d+")");var l=null;"create"==d.action?(e.subscriptionId=d.subscriptionId,
e.frequency=f,1==f?l=e.dailyMessage:7==f&&(l=e.weeklyMessage)):"update"==d.action?(e.frequency=f,1==f?l=e.dailyMessage:7==f&&(l=e.weeklyMessage)):"delete"==d.action&&(e.subscriptionId="",e.frequency=0,"group"==e.context&&(l=e.unsubscribeGroupMessage));d.warnings&&0<d.warnings.length?_showMessage(e,d.warnings[0],"warning"):l&&_showMessage(e,l,"success");d={subscriptionId:e.subscriptionId,frequency:e.frequency,context:e.context,contextId:e.contextId,action:d.action};b(document).trigger("emailDigestSubscriptionChange",
[d])},error:function(b,l,a){_showMessage(e,e.errorMessage,"error")}}))};_showMessage=function(e,f,d){b.telligent.evolution.notifications.show(f,{type:d,duration:5E3})};b.telligent.evolution.emailDigest={register:function(e){b("#"+e.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:!0});b("#"+e.rollupWrapperId).on("click",function(){var f=b(this),d="",l="",a="";1==e.frequency?d="email-digest-selected":7==e.frequency?l="email-digest-selected":a="email-digest-selected";
var c=f.outerWidth(),k=f.outerHeight(),f=f.offset(),d="<div class='email-digest-selectWrapper' style=\"min-width: "+(c-2)+'px;"><div frequency="1" class="email-digest-selectable '+e.selectableTag+" "+d+'"><span style="display: block; white-space: nowrap;">'+e.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+e.selectableTag+" "+l+'"><span style="display: block; white-space: nowrap;">'+e.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+e.selectableTag+
" "+a+'"><span style="display: block; white-space: nowrap;">'+e.popupUnsubscribe+"</span></div></div>";b("#"+e.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",d).glowPopUpPanel("show",f.left+4,f.top+5,c,k-10,!1)});b(document).on("click","."+e.selectableTag,function(){var f=b(this);f.hasClass("email-digest-selected")||(f=f.attr("frequency"),m(e,f))});b(document).on("emailDigestSubscriptionChange",function(f,d){if(d.context==e.context&&d.contextId==e.contextId){var l="";"create"==d.action||
"update"==d.action?("1"==d.frequency?l=e.rollupDaily:"7"==d.frequency&&(l=e.rollupWeekly),e.subscriptionId=d.subscriptionId):(l=e.rollupUnsubscribed,e.subscriptionId="");e.frequency=d.frequency;b("#"+e.rollupTextId).html(l)}})}};return{}},jQuery,window);r("module.administrationToolbar",function(b,e,g){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.administrationToolbar={get:function(){var e;e=b(".admin-bar");0<e.length||(b("body").prepend(b('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>')),
e=b(".admin-bar"));return e}};return{}},jQuery,window);r("module.configuration",["lib.globalConfiguration","plugin.evolutionHtmlEditor"],function(b,e,g,m,n){function f(b,a){return'<time datetime="'+b.toISOString()+'">'+a+"</time>"}var d=g.fn.filter;g.fn.filter=function(){arguments&&(0<arguments.length&&"string"==typeof arguments[0])&&(arguments[0]=arguments[0].replace(/:\[/g,"["));return d.apply(this,arguments)};n={formatDate:function(b){try{return b.toISOString()}catch(a){}return""},parseDate:function(){var b=
function(a,b){var d;d=a.getTimezoneOffset();var e;isNaN(b)?d=new Date(a.getTime()-6E4*d):(e=b/100,e=-(60*(e-e%1)+b%100),d=new Date(a.getTime()+6E4*(e-d)));return d};return function(a){var c,d=new Date;if(null===a||""===a)return d;if(null!=(c=/\/Date\((\d+)(?:([\-\+]\d+))?\)\//.exec(a)))return a=new Date(parseInt(c[1],10)),b(a,parseInt(c[2],10));if(null!=(c=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d+))?))([zZ]|([+\-])(((\d\d):(\d\d))|(\d\d\d\d)))?/.exec(a))){a=[d.getFullYear(),
d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()];for(d=1;d<c.length&&8>d;d++)""!=c[d]&&void 0!=c[d]&&(a[d-1]=parseInt(c[d],10));a=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5],1E3*parseFloat("."+a[6]));if(c[8]){if("z"==c[8]||"Z"==c[8])return b(a,0);if(c[9]&&c[12]&&c[13])return c=(100*parseInt(c[12],10)+parseInt(c[13],10))*("+"==c[9]?1:-1),b(a,c);if(c[9]&&c[10])return c=(100*parseInt(c[10].substring(0,2),10)+parseInt(c[10].substring(2),10))*("+"==c[9]?1:-1),b(a,
c)}else return a}throw"Invalid date format";}}(),formatAgoDate:function(d){try{var a=(new Date).getTime(),c=Math.abs(a-d.getTime())/1E3,e=c/60,p=e/60,g=p/24,q=g/30.42,h=g/365;return a<d.getTime()?2>Math.round(e)?f(d,b.dateMinuteInFutureFormat.replace("{0}",Math.round(e))):60>Math.round(e)?f(d,b.dateMinutesInFutureFormat.replace("{0}",Math.round(e))):2>Math.round(p)?f(d,b.dateHourInFutureFormat.replace("{0}",Math.round(p))):24>Math.round(p)?f(d,b.dateHoursInFutureFormat.replace("{0}",Math.round(p))):
2>Math.round(g)?f(d,b.dateDayInFutureFormat.replace("{0}",Math.round(g))):30.42>g?f(d,b.dateDaysInFutureFormat.replace("{0}",Math.round(g))):2>Math.round(q)?f(d,b.dateMonthInFutureFormat.replace("{0}",Math.round(q))):12>q?f(b.dateMonthsInFutureFormat.replace("{0}",Math.round(q))):2>Math.round(h)?f(d,b.dateYearInFutureFormat.replace("{0}",Math.round(h))):f(d,b.dateYearsInFutureFormat.replace("{0}",Math.round(h))):10>c?f(d,b.dateNowAgoFormat):2>Math.round(e)?f(d,b.dateMinuteAgoFormat.replace("{0}",
Math.round(e))):60>Math.round(e)?f(d,b.dateMinutesAgoFormat.replace("{0}",Math.round(e))):2>Math.round(p)?f(d,b.dateHourAgoFormat.replace("{0}",Math.round(p))):24>Math.round(p)?f(d,b.dateHoursAgoFormat.replace("{0}",Math.round(p))):2>Math.round(g)?f(d,b.dateDayAgoFormat.replace("{0}",Math.round(g))):30.42>g?f(d,b.dateDaysAgoFormat.replace("{0}",Math.round(g))):2>Math.round(q)?f(d,b.dateMonthAgoFormat.replace("{0}",Math.round(q))):12>q?f(d,b.dateMonthsAgoFormat.replace("{0}",Math.round(q))):2>Math.round(h)?
f(d,b.dateYearAgoFormat.replace("{0}",Math.round(h))):f(d,b.dateYearsAgoFormat.replace("{0}",Math.round(h)))}catch(w){}return""},site:{configure:function(d){g.extend(b,d);g.telligent.evolution.user={accessing:{id:b.accessingUserId,isSystemAccount:b.accessingUserIsSystemAccount,isTemporary:b.accessingUserTemporary,isAuthenticated:b.accessingUserIsAuthenticated}};e.configure({scriptBaseUrl:g.telligent.evolution.site.getBaseUrl()+"tinymce/",versionKey:b.versionKey,contextQueryString:b.contextQueryString,
mediaMaxWidth:b.maxMediaWidth,mediaMaxHeight:b.mediaMaxHeight,defaultMediaWidth:b.defaultMediaWidth,defaultMediaHeight:b.defaultMediaHeight,directionality:b.directionality,language:b.editorLanguage,contentCssUrl:g.telligent.evolution.site.getBaseUrl()+"tinymce/telligent/telligent.tinymce.content.css",directUploadContext:b.directUploadContext,directUploadUrl:b.directUploadUrl,autoLinkPattern:b.autoLinkPattern,editorConfigVersionKey:b.editorConfigVersionKey});g.extend(g.event.special.quote.defaults,
{quoteText:b.quoteText});g.fn.glowTree&&g.extend(g.fn.glowTree.defaults,{expandedImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/expanded.gif",collapsedImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/collapsed.gif",blankImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/blank.gif"});g.fn.glowDateTimeSelector&&(g.extend(g.fn.glowDateTimeSelector.defaults,{monthNames:b.monthNames,dayNames:b.dayNames,clearText:b.clearText,selectText:b.okText}),
g.extend(g.fn.glowDateTimeSelector.dateDefaults,{monthNames:b.monthNames,dayNames:b.dayNames,clearText:b.clearText,selectText:b.okText},b.datePattern||{}),g.extend(g.fn.glowDateTimeSelector.timeDefaults,{monthNames:b.monthNames,dayNames:b.dayNames,clearText:b.clearText,selectText:b.okText},b.timePattern||{}),g.extend(g.fn.glowDateTimeSelector.dateTimeDefaults,{monthNames:b.monthNames,dayNames:b.dayNames,clearText:b.clearText,selectText:b.okText},b.dateTimePattern||{}),g.extend(g.fn.glowDateTimeSelector.monthDefaults,
{monthNames:b.monthNames,dayNames:b.dayNames,clearText:b.clearText,selectText:b.okText}));g.glowModal&&(g.extend(g.glowModal.defaults,{loadingHtmlUrl:"about:blank",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],
zIndex:2E4}),m.Telligent_Modal={GetWindowOpener:function(a,b){return g.glowModal.opener(a,b)},IsShown:function(a){return g.glowModal.visible(a)},Resize:function(a,b,d,e){g.glowModal.resize(a,b,d,e)},MoveTo:function(a,b,d){g.glowModal.moveTo(a,b,d)},Open:function(a,b,d,e,f,l,h,w,s){g.glowModal(a,{width:b,height:d,onClose:e,x:f,y:l,ignoreCloseAndAnimation:h,isManuallyresized:w,openerWindow:s})},Close:function(a,b){g.glowModal.close(a,b)},Refresh:function(a){g.glowModal.refresh(a)}});g.fn.glowDropDownList&&
g.extend(g.fn.glowDropDownList.defaults,{buttonImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});g.fn.glowColorSelector&&g.extend(g.fn.glowColorSelector.defaults,{blendImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",hueBlendImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png",alphaBlendImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/alpha_blend.png",
transparentImageUrl:g.telligent.evolution.site.getBaseUrl()+"utility/images/glow/transparent.png"});g.fn.glowUpload&&g.extend(g.fn.glowUpload.defaults,{maxFileSize:b.maxUploadFileSize});g.fn.glowMultiUpload&&g.extend(g.fn.glowMultiUpload.defaults,{maxFileSize:b.maxUploadFileSize})},getBaseUrl:function(d){if(!0===d){d=m.location.href+"";var a=d.indexOf("/",9);if(0<a)return d.substr(0,a)+b.baseUrl}return b.baseUrl}},theme:{getReflowBreakpoint:function(){var b=null;g(".evolution-reflow-container:not(.single-column)").each(function(){var a=
parseInt(g(this).data("reflow-width"));!isNaN(a)&&(null==b||a<b)&&(b=a)});return b}}};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.extend(g.telligent.evolution,n);return{}},jQuery,window);r("module.editableGroup",function(b,e,g){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m={},n=function(a,b,d){if(a.isSaving)if(b+1<a.widgets.length){var e=a.widgets[b+1];e.save?(e=e.save(function(){n(a,b+1,d)},function(){f(a,b+1,d)}),!1===e?f(a,
b+1,d):!0===e&&n(a,b+1,d)):n(a,b+1,d)}else d.success&&(a.isSaving=!1,d.success())},f=function(a,b,d){a.isSaving&&(a.isSaving=!1,d.error&&d.error())},d=function(a,c,d){if(a.isValidating){a.widgets[c].valid=!0;var e=0;b.each(a.widgets,function(a,b){!0!==b.valid&&e++});0==e&&(a.isValidating=!1,d.success&&d.success())}},l=function(a,b,d){a.isValidating&&(a.widgets[b].valid=!1,a.isValidating=!1,d.error&&d.error())};b.telligent.evolution.editableGroup={register:function(a,c){var d=m[a];d||(d={widgets:[],
isSaving:!1,isValidating:!1},m[a]=d);d.widgets[d.widgets.length]=b.extend({},c||{},{valid:!1,saved:!1})},save:function(a,c){b.telligent.evolution.editableGroup.validate(a,{success:function(){var b=m[a];b&&0<b.widgets.length?(b.isSaving=!0,n(b,-1,c)):c&&c.success&&c.success()},error:function(){c.error&&c.error()}})},validate:function(a,c){var e=m[a];e&&0<e.widgets.length?(b.each(e.widgets,function(a,b){b.valid=g}),e.isValidating=!0,b.each(e.widgets,function(a,b){if(b.validate){var f=b.validate(function(){d(e,
a,c)},function(){l(e,a,c)});!1===f?l(e,a,c):!0===f&&d(e,a,c)}else d(e,a,c)})):c&&c.success&&c.success()}};return{}},jQuery,window);r("module.html",["lib.util"],function(b,e,g,m){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};g={encode:function(e){var d=b.compileReplacer(n);return function(b){return d.call(this,b)}}(),decode:function(b){var d=/<[^>]*>/g;return function(b){if(!b)return b;b=(b+"").replace(d," ");return e("<div/>").html(b).text()}}()};e.telligent||(e.telligent=
{});e.telligent.evolution||(e.telligent.evolution={});return e.telligent.evolution.html=g},jQuery,window);r("module.javaScript",["lib.util"],function(b,e,g,m){var n={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'",'"':'\\"',"/":"\\/"};g={encode:function(e){var d=b.compileReplacer(n);return function(b){return d.call(this,b)}}()};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});return e.telligent.evolution.javaScript=g},jQuery,window);r("module.language",function(b,e,g){var m=
{},n={};agoLastRefresh=(new Date).getTime();buildCacheKey=function(b,e){return b.toString()+"-"+e};loadFormattedDate=function(d,e,a){var c=m;"agodate"==e&&(6E4<(new Date).getTime()-agoLastRefresh&&(n={},agoLastRefresh=(new Date).getTime()),c=n);var k=c[buildCacheKey(d,e)];"undefined"===typeof k?b.telligent.evolution.get({url:f.defaults.dateEndpoint,data:{date:b.telligent.evolution.formatDate(d),format:e},success:function(b){b&&(a&&"undefined"!==typeof b&&null!==b&&b.formattedDate)&&(c[buildCacheKey(d,
e)]=b.formattedDate,a(b.formattedDate))}}):a(k)};var f={formatDate:function(b,e){loadFormattedDate(b,"date",e)},formatDateAndTime:function(b,e){loadFormattedDate(b,"datetime",e)},formatAgoDate:function(b,e){loadFormattedDate(b,"agodate",e)},defaults:{dateEndpoint:""}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.language=f;return{}},jQuery,window);r("module.media",function(b,e,g){var m=function(e,d,l){var a=b.extend({},n.defaults,l||{});e={url:e,
view:d};a.width&&(e.width=a.width);a.height&&(e.height=a.height);b.telligent.evolution.get({url:a.endpoint,data:e,success:function(b){b&&a.success&&a.success(b)},error:function(b,d,e){a.error&&a.error(b,d,e)}})},n={previewHtml:function(b,d){m(b,"preview",d)},viewHtml:function(b,d){m(b,"view",d)},defaults:{endpoint:""}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.media=n;return{}},jQuery,window);r("module.messaging",["lib.util","lib.crossWindowBus"],
function(b,e,g,m,n){function f(a,b){b.retroactive&&(retroactiveMessages[a]=b.data);var c=w[a];if(c)for(var c=c.slice(),d=0;d<c.length;d++)!c[d]||(!c[d].handler||c[d].suppressed!==n&&c[d].suppressed)||c[d].handler.call(this,b.data)}function d(a,b,c,d){if(!a)throw"messageName is required when publishing a message";null!==a&&0!==a.length&&(b={data:b||{},retroactive:d},c&&!0===c.crossWindow&&t.broadcast(a,b),f(a,b))}function l(a,c,d,e){if(!a)throw"messageName is required when subscribing to a message";
if(null===a||0===a.length)return 0;"undefined"===typeof w[a]&&(w[a]=[]);var k=c;if(d==n||"function"!==typeof d)e=d,d=c,k="content";b.isArray(k)||(k=[k]);e&&e.excludeAutoNameSpaces||g&&(g.telligent&&g.telligent.evolution&&g.telligent.evolution.administration&&g.telligent.evolution.administration.panelNameSpace)&&Array.prototype.push.apply(k,g.telligent.evolution.administration.panelNameSpace());c={message:a,handler:d,namespaces:k,id:++h};w[a][w[a].length]=c;s[String(c.id)]=c;for(e=0;e<k.length;e++)v[k[e]]||
(v[k[e]]=[]),v[k[e]][v[k[e]].length]=c.id;retroactiveMessages[a]&&d.call(this,retroactiveMessages[a]);return c.id}function a(a){if(!a)throw"subscriptionId is required when suppressing a message";if(isNaN(a)){if(a)for(messageNamespaces=a,b.isArray(messageNamespaces)||(messageNamespaces=[messageNamespaces]),a=0;a<messageNamespaces.length;a++)if(v[messageNamespaces[a]])for(var d=0;d<v[messageNamespaces[a]].length;d++)c(v[messageNamespaces[a]][d],messageNamespaces[a])}else c(a)}function c(a){"undefined"!==
typeof s[String(a)]&&(s[String(a)].suppressed=!0)}function k(a){if(!a)throw"subscriptionId is required when unsuppressing a message";if(isNaN(a)){if(a)for(messageNamespaces=a,b.isArray(messageNamespaces)||(messageNamespaces=[messageNamespaces]),a=0;a<messageNamespaces.length;a++)if(v[messageNamespaces[a]])for(var c=0;c<v[messageNamespaces[a]].length;c++)p(v[messageNamespaces[a]][c],messageNamespaces[a])}else p(a)}function p(a){"undefined"!==typeof s[String(a)]&&(s[String(a)].suppressed=!1)}function u(a){if(!a)throw"subscriptionId is required when unsubscribing a message";
if(isNaN(a)){if(a&&v[a]){for(var b=0;b<v[a].length;b++)q(v[a][b],a);v[a].length=0;delete v[a]}}else q(a)}function q(a,c){if("undefined"!==typeof s[String(a)]){var d=s[String(a)],h=w[d.message];subscriptionByNameIndex=b.indexOf(h,d);0<=subscriptionByNameIndex&&h.splice(subscriptionByNameIndex,1);0===h.length&&(delete w[d.message],delete retroactiveMessages[d.message]);for(h=0;h<d.namespaces.length;h++)if(c!==d.namespaces[h]){var e=v[d.namespaces[h]],k=b.indexOf(e,a);0<=k&&e.splice(k,1);0===e.length&&
delete v[d.namespaces[h]]}delete s[String(a)]}}var h=0,w={},s={},v={},t=new e({key:"__m",includeLocal:!1,receive:f});retroactiveMessages={};e={publish:d,subscribe:l,unsubscribe:u,suppress:a,unsuppress:k};m={publish:function(a,b,c){return d(a,b,c,!1)},subscribe:l,unsubscribe:u,suppress:a,unsuppress:k};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});g.telligent.evolution.messaging=m;return e},jQuery,window);r("module.navigationConfirmation",function(b,e,g){b.telligent||
(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});var m={},n=!1,f=function(){if(n)return!1;var d=!1;b.each(m,function(b,a){"function"===typeof a?a()&&(d=!0):d=!0});return d};b.telligent.evolution.navigationConfirmation={configure:function(){},enable:function(b,e){void 0===b?m.__evolution_default_navigationconfirmation=function(){return!0}:m[b]=e||function(){return!0}},disable:function(b){void 0===b?delete m.__evolution_default_navigationconfirmation:delete m[b]},isEnabled:function(b){return void 0===
b?f():(b=m[b])?"function"===typeof b?b():!0:!1},register:function(d){b(d).on("click",function(){n=!0})},ignoreClick:function(){n=!0}};return{init:function(){b(window).on("beforeunload",function(b){if(f())return b.preventDefault(),b.returnValue="",!1});b(document).on("customizepage",function(){n=!0})}}},jQuery,window);r("module.notifications","module.notifications.ui module.notifications.alert module.notifications.banner module.notifications.unread module.notifications.unread.title module.notifications.unread.icon events.notifications".split(" "),
function(b,e,g,m,n,f,d,l,a,c){var k,p,u={error:[]},q=function(a,b){u[a]&&(u[a]=u[a].filter(function(a,c,d){return a!=b}))},h=function(a){(a=u[a])&&l.each(a,function(a,b){try{b()}catch(c){}})},w={show:function(a,b){b&&b.type&&h(b.type);return p.show(a,b)},hide:function(a){return p.hide(a)},unread:function(a,b){return k.unread(a,b)},defaults:{template:'<div class="push-notification <%: cssClass %> <% if(active) { %>active<% } %>">  <a href="#" class="close">x</a>   <%= message %> </div> ',parent:"body",
margin:5,errorDuration:5E3,verticalOffset:0,horizontalOffset:0,animationDuration:250,placement:"bottomleft",opacity:0.95,limit:10,bannerContainerTemplate:'<div class="banner-notifications-container">\t<div class="banner-notifications-controls close">\t\t<a href="#" class="banner-notifications-controls-close">&times;</a>\t</div>\t<ul class="banner-notifications"></ul>\t<div class="banner-notifications-controls navigator">\t\t<a href="#" class="banner-notifications-controls-backward">&#x25c0;</a>\t\t<span class="banner-notifications-controls-count"></span>\t\t<a href="#" class="banner-notifications-controls-forward">&#9654;</a>\t</div></div>',
bannerTemplate:'<li data-tip="<%: message %>" class="ui-tip banner-notification <%: cssClass %> <% if(active) { %>active<% } %>"><span><%: message %></span></li>',bannerContainer:"body"}};l.telligent=l.telligent||{};l.telligent.evolution=l.telligent.evolution||{};l.telligent.evolution.notifications=l.extend(l.telligent.evolution.notifications||{},w);return l.extend({initiate:function(){k=new m(w.defaults);k.registerRenderer(new n);k.registerRenderer(new f);k.init();p=new b(w.defaults);p.registerRenderer("alert",
new e);p.registerRenderer("banner",new g);p.init();d.initiate()},on:function(a,b){q(a,b);u[a]&&u[a].push(b)},off:function(a,b){q(a,b)}},w)},jQuery,window);r("module.notifications.alert",function(b,e,g){return function(g){function n(c,h){var e=b.grep(c.notifications,function(a){return a.id===h.id});if(null!==e&&1===e.length)return e=e[0],d(c,e,!0).then(function(){e.view.remove();e.message=h.message;e.cssClass=h.cssClass;e.duration=h.duration;k(c,e);e.suppressPositionAnimation=!0;f(c);l(c,e,!0);p(c,
e)}),e;c.notifications.length===c.limit&&a(c,c.notifications[c.notifications.length-1]);c.notifications.unshift(h);k(c,h);f(c);l(c,h);p(c,h);return h}function f(a){var c=a.margin,d=0<b.grep(a.notifications,function(a){!0===a.suppressPositionAnimation}).length;b.each(a.notifications,function(b,e){if(d){var k={opacity:0};k[a.verticalAlignment]=c+"px";e.view.css(k);e.suppressPositionAnimation=!1}else k={},k[a.verticalAlignment]=c,e.view.evolutionTransform(k,{duration:a.animationDuration});0<e.measuredHeight&&
(c+=e.measuredHeight+a.margin)})}function d(a,c,d){c.onHide&&c.onHide.apply(c);return b.Deferred(function(b){!0!==d?c.view.evolutionTransform({opacity:0},{duration:a.animationDuration,complete:function(){c.view.css({display:"none"});b.resolve()}}):b.resolve()}).promise()}function l(a,c,d){b("body").addClass("with-notifications");c.onShow&&c.onShow.apply(c);return b.Deferred(function(b){!0!==d?(c.view.is(":visible")||c.view.css({display:"block",opacity:0}),c.view.evolutionTransform({opacity:a.opacity},
{duration:a.animationDuration,complete:function(){b.resolve()}})):(c.view.css({display:"block",opacity:a.opacity}),b.resolve())}).promise()}function a(a,c){c.removing=!0;d(a,c).then(function(){c.view.remove();c.measuredHeight=0;a.notifications=b.grep(a.notifications,function(a){return a!==c});f(a);a.notifications&&0!==a.notifications.length||b("body").removeClass("with-notifications")})}function c(b,c){e.clearTimeout(c.removeTimeout);e.clearInterval(c.hideSupressedWaitInterval);c.hideSupressedWaitInterval=
e.setTimeout(function(){b.removalSuppressed?c.hideSupressedWaitInterval=e.setInterval(function(){b.removalSuppressed||(e.clearInterval(c.hideSupressedWaitInterval),a(b,c))},1E3):a(b,c)},c.duration);c.shownTime=(new Date).getTime()}function k(a,c){var d={position:"fixed",zIndex:1E4,width:c.width};d[a.horizontalAlignment]=a.margin+a.horizontalOffset+"px";d[a.verticalAlignment]=a.margin+a.verticalOffset+"px";c.active=!!c.onClick;c.view=b(a.template(c)).css(d).hide().appendTo(a.parent);c.measuredHeight=
c.view.outerHeight()}function p(b,d){d.view.find("a.close").on("click",function(c){c.preventDefault();c.stopPropagation();d.onClose?(c=d.onClose.apply(d))?c.then(function(){a(b,d)}):a(b,d):a(b,d)});d.view.on("click",function(){d.onClick&&d.onClick.apply(d)});d.view.on("mouseenter",function(){b.entered=!0;b.removalSuppressed=!0;d.removing&&(d.view.stop(),d.removing=!1,l(b,d),f(b),c(b,d));d.onOver&&d.onOver.apply(d)});d.view.on("mouseleave",function(){b.entered=!1;e.setTimeout(function(){b.entered||
(b.removalSuppressed=!1)},500);d.onOut&&d.onOut.apply(d)})}var u;return{show:function(a){c(u,n(u,a))},hide:function(c){if(u)if("function"===typeof c)b.each(u.notifications,function(b,c){a(u,c)}),c();else{var d=b.grep(u.notifications,function(a){return a.id===c});d&&0!=d.length&&a(u,d[0])}},init:function(a){u=b.extend({},a||{},{removalSuppressed:!1,notifications:[]});u.verticalAlignment="bottom";0<=u.placement.indexOf("top")&&(u.verticalAlignment="top");u.horizontalAlignment="left";0<=u.placement.indexOf("right")&&
(u.horizontalAlignment="right");u.template=b.telligent.evolution.template.compile(u.template)},list:function(){return u.notifications}}}},jQuery,window);r("module.notifications.banner",["module.template"],function(b,e,g,m){return function(g){function f(){k=e(b.compile(p.bannerContainerTemplate)({})).hide();k.appendTo(c);q=k.find(".banner-notifications");h=k.find(".banner-notifications-controls-forward");w=k.find(".banner-notifications-controls-backward");s=k.find(".banner-notifications-controls-close");
v=k.find(".banner-notifications-controls-count");t=k.find(".banner-notifications-controls.navigator");s.on("click",function(a){l();return!1});h.on("click",function(a){a=y;y++;y>=x.length&&(y=0);0>y&&(y=x.length-1);d(a);return!1});w.on("click",function(a){a=y;y--;0>y&&(y=x.length-1);d(a);return!1});u=b.compile(p.bannerTemplate)}function d(a){a!==m&&1<Math.abs(y-a)?q.scrollLeft(q.width()*y):q.stop(!0,!0).animate({scrollLeft:q.width()*y},200);0<=y&&((a=x[y])&&a.type?(z&&k.removeClass(z),z=a.type,k.addClass(a.type)):
z&&(k.removeClass(z),z=null))}function l(b){x.forEach(function(a){b&&b!=a.id||(a.view.remove(),a.onClose&&a.onClose.apply(a),x=x.filter(function(b){return b.id!==a.id}))});a();y>=x.length&&(y=x.length-1,0>y&&(y=0),d());0==x.length&&k.stop().fadeOut(200)}function a(){v.html(x.length);1<x.length?t.show():t.hide()}var c,k,p,u,q,h,w,s,v,t,x=[],y=0,z=null;return{show:function(b){for(var c=!1,h=0;h<x.length;h++)x[h].id==b.id&&(e.extend(x[h],b),x[h].onClick&&(x[h].view.off("click").on("click",function(){b.onClick.apply(b);
return!1}),x[h].active=!0),c=!0);if(!c){k||f();b.active=!!b.onClick;b.view=e(u(b));k.stop().fadeIn(200);q.append(b.view);x.push(b);if(b.onClick)b.view.on("click",function(){b.onClick.apply(b);return!1});a();y=x.length-1;d();setTimeout(function(){l(b.id)},b.duration)}},hide:function(a){k||f();l(a)},init:function(a){p=a;c=e(a.bannerContainer)},list:function(){return x}}}},jQuery,window);r("module.notifications.ui",["lib.util","lib.storageProxy"],function(b,e,g,m,n){var f={duration:5E3,width:200,type:"",
id:null,onClick:null,onClose:null,onShow:null,onHide:null,onOver:null,onOut:null,mode:"alert"},d="notifications",l={__disconnect_notification:!0,__systemnotification:!0},a;return function(c){function k(a){return a&&(a.type&&"error"==a.type||a.cssClass&&"error"==a.cssClass)}function p(){g(m).on("unload",function(){q()})}function n(b){t=new e({id:g.telligent.evolution.user.accessing.id,isSystemAccount:g.telligent.evolution.user.accessing.isSystemAccount});a=g.telligent.evolution.theme.getReflowBreakpoint();
g.each(s,function(a,c){c.init(b)});if(m.top==m){var c=t.get(d);c&&9E4>(new Date).getTime()-c.updated&&g.each(c.notifications,function(a,b){var c=h(b.message,b);w(c)});t.del(d)}}function q(){var a=[];g.each(s,function(b,c){a=a.concat(c.list())});var b=g.extend({},{updated:(new Date).getTime(),notifications:[]},t.get(d)||{});g.each(a,function(a,c){var d=c.duration,h=k(c);c.shownTime&&(d-=b.updated-c.shownTime);1<d&&!(h&&c.shownTime&&!(2>b.updated-c.shownTime)||c&&("system-notification"==c.type||l&&
!0===l[c.id]))&&b.notifications.unshift({duration:h?Math.min(d,f.duration):d,width:c.width,mode:c.mode,type:c.type,cssClass:c.cssClass,id:c.id,message:c.message})});0==b.notifications.length?t.del(d):t.set(d,b)}function h(c,d){d&&(!d.duration&&k(d))&&(d.duration=v.errorDuration);var h=g.extend({},f,d||{});h.message=c;h.cssClass=h.type||"";h.id||(h.id=b.guid());null!==a&&g(m).width()<a&&(h.mode="banner");return h}function w(a){var b=a.mode;g.telligent.evolution.administration&&g.telligent.evolution.administration.isAdminShell&&
(b="alert");(b=s[b])&&b.show(a)}var s={},v=c,t;window._persist=q;return{registerRenderer:function(a,b){s[a]=b},init:function(){p();n(v)},show:function(a,b){var c=h(a,b);w(c);return c.id},hide:function(a){a&&g.each(s,function(b,c){c.hide(a)})}}}},jQuery,window);r("module.notifications.unread.icon",function(b,e,g){return function(g){function n(g,h,w){var s="",v="undefined"!=typeof InstallTrigger||!!e.opera||0<=navigator.userAgent.indexOf("Opera");if(f&&!l)if(d=b('head link[rel~="icon"][href]').first(),
0<d.length){l=d.attr("href");a=d.attr("type");try{k=document.createElement("canvas"),c=document.createElement("img"),c.onload=function(){k.height=0<c.height?c.height:32;k.width=0<c.width?c.width:32;p=k.getContext("2d")},b(c).attr({crossOrigin:"anonymous",src:l})}catch(t){f=!1}}else f=!1;if(f)if(p)try{p.clearRect(0,0,k.width,k.height);p.drawImage(c,0,0,k.width,k.height);if(w){if(0<h||0<g)s=Math.max(h,g),99<s&&(s="99+")}else 0<g?(s=g,99<s&&(s="99+")):0<h&&(s="+");if(0===s||""===s)if(v){var m=b('<link type="'+
a+'" rel="icon"></link>');b("head").append(m);m.attr("href",l);d.remove();d=m}else d.attr({href:l,type:a});else{var s=s+"",y=!1,z=0.4*k.width,A=0.4*k.height,C=0.6*k.width,B=0.6*k.height;2===s.length?(z-=0.4*C,C*=1.4,y=!0):3<=s.length&&(z-=0.65*C,C*=1.65,y=!0);p.beginPath();p.font="bold "+Math.floor(B*(2<s.length?0.85:1))+"px sans-serif";p.textAlign="center";y?(p.moveTo(z+C/2,A),p.lineTo(z+C-B/2,A),p.quadraticCurveTo(z+C,A,z+C,A+B/2),p.lineTo(z+C,A+B-B/2),p.quadraticCurveTo(z+C,A+B,z+C-B/2,A+B),p.lineTo(z+
B/2,A+B),p.quadraticCurveTo(z,A+B,z,A+B-B/2),p.lineTo(z,A+B/2),p.quadraticCurveTo(z,A,z+B/2,A)):p.arc(z+C/2,A+B/2,B/2,0,2*Math.PI);p.fillStyle="rgba(221,0,0,1)";p.fill();p.closePath();p.beginPath();p.stroke();p.fillStyle="rgba(255,255,255,1)";p.fillText(s,Math.floor(z+C/2),Math.floor(A+B-0.15*B));p.closePath();v?(m=b('<link type="image/png" rel="icon"></link>'),b("head").append(m),m.attr("href",k.toDataURL("image/png")),d.remove(),d=m):d.attr({href:k.toDataURL("image/png"),type:"image/png"})}}catch(F){f=
!1}else e.clearTimeout(u),u=e.setTimeout(function(){n(g,h,w)},250)}var f=!0,d=null,l=null,a=null,c=null,k=null,p=null,u=null;return{render:function(a){n(a.localUnread,a.globalUnread,a.combineCounts)}}}},jQuery,window);r("module.notifications.unread",["lib.util","module.messaging","module.sockets.sharedObjectProxyState","lib.globalConfiguration","module.rest"],function(b,e,g,m,n,f,d,l){return function(a){function b(){d.clearTimeout(t);var a=!g.hasMultipleWindows();x!=a&&(x=a,u());t=d.setTimeout(function(){b()},
1E3)}function k(){f.telligent.evolution.user&&(f.telligent.evolution.user.accessing&&!f.telligent.evolution.user.accessing.isSystemAccount&&!f.telligent.evolution.user.accessing.isTemporary)&&(d.clearTimeout(y),y=d.setTimeout(function(){n.get({url:m.baseUrl+"api.ashx/v2/notifications.json",cache:!1,data:{IsRead:!1,PageSize:1,PageIndex:0}}).then(function(a){p(a.TotalCount,!1,"notifications")})},1E3))}function p(a,b,c){var d=0;a+="";if("+"==a.substr(0,1)){d=parseInt(a.substr(1),10);if(isNaN(d))return;
b?w[c]=(w[c]||0)+d:v[c]=(v[c]||0)+d}else if("-"==a.substr(0,1)){d=parseInt(a.substr(1),10);if(isNaN(d))return;b?w[c]=(w[c]||0)-d:v[c]=(v[c]||0)-d}else{d=parseInt(a,10);if(isNaN(d))return;b?w[c]=d:v[c]=d}h=0;f.each(w,function(a,b){0>b&&(w[a]=b=0);h+=b});s=0;f.each(v,function(a,b){0>b&&(v[a]=b=0);s+=b});e.publish("notification.unreadchange",{local:h,global:s});u()}function u(){A&&z.forEach(function(a){a.render({localUnread:h,globalUnread:s,combineCounts:x})})}function q(){e.subscribe("notification.read",
function(a){var b=parseInt(a.unreadCount,10);isNaN(b)||p(a.unreadCount,!1,"notifications")},{excludeAutoNameSpaces:!0});e.subscribe("notification.raised",function(a){p("+1",!1,"notifications");k()},{excludeAutoNameSpaces:!0})}var h=0,w={},s=0,v={},t=null,x=!0,y=null,z=[],A=!d.parent||d.parent==d;return{registerRenderer:function(a){z.push(a)},init:function(){q();A=A&&!f("body").hasClass("administration");k();b()},unread:function(a,b){if(a===l)return{local:h,global:s};b=b||{};p(a,!0===b.isLocal,b.namespace||
"unknown")}}}},jQuery,window);r("module.notifications.unread.title",function(b,e,g){return function(b){var e=/^(\([0-9\+]+\)\s+)+/;return{render:function(b){var d=document.title.replace(e,"")+"",l=0;if(b.combineCounts){if(0<b.globalUnread||0<b.localUnread)l=Math.max(b.globalUnread,b.localUnread),99<l&&(l="99+"),d="("+l+") "+d}else 0<b.localUnread?(l=b.localUnread,99<l&&(l="99+"),d="("+l+") "+d):0<b.globalUnread&&(d="(+) "+d);document.title=d}}}},jQuery,window);r("lib.crossWindowPresentContentRegistrar",
["lib.storageProxy"],function(b,e,g,m){function n(b){var a={};b=b.split(":");2<=b.length&&(a.ContentId=b[0],a.ContentTypeId=b[1],2<b.length&&(a.TypeId=b[2]));return a}function f(b){g.setInterval(function(){var a=b.storage.get(b.key)||[],c={},d=(new Date).getTime();e.each(a,function(a,e){d-e<b.expiration&&(c[a]=e)});b.storage.set(b.key,c)},b.garbageCollectInterval)}var d={key:"__cwpcr",expiration:4E3,garbageCollectInterval:3E4,user:{}};return function(l){var a=e.extend({},d,l||{});a.storage=new b(a.user);
f(a);return{setVisibleContents:function(b){if(b){for(var d=a.storage.get(a.key)||[],e=(new Date).getTime(),f=0;f<b.length;f++)d[b[f].ContentId+":"+b[f].ContentTypeId+":"+(b[f].TypeId||"")]=e;a.storage.set(a.key,d)}},getUniqueVisibleContent:function(){var b=a.storage.get(a.key)||[],d=[],f=(new Date).getTime();e.each(b,function(b,c){f-c<a.expiration&&d.push(n(b))});return d}}}},jQuery,window);r("lib.crossWindowPresentContentRegistrarSingleton",["lib.crossWindowPresentContentRegistrar"],function(b,e,
g,m){var n=null;return{get:function(f){return n?n:n=new b(e.extend({user:e.telligent.evolution.user.accessing,expiration:4E3},f||{}))}}},jQuery,window);r("module.presence",["lib.crossWindowPresentContentRegistrarSingleton","lib.crossWindowBus","lib.util"],function(b,e,g,m,n,f){function d(b){b=[];for(var d=c.length;d--;)if(0<c[d].node.closest("body").length){var e;(e=c[d].isRoot)||(e=c[d].node.get(0).getBoundingClientRect(),e=(0<e.height||0<e.width)&&0<=e.bottom&&0<=e.right&&e.top<=(n.innerHeight||
document.documentElement.clientHeight)&&e.left<=(n.innerWidth||document.documentElement.clientWidth));if(e)for(e=0;e<c[d].contents.length;e++)b.push({ContentId:c[d].contents[e].ContentId,ContentTypeId:c[d].contents[e].ContentTypeId,TypeId:c[d].contents[e].TypeId})}else c.splice(d,1);0<b.length&&a&&a.setVisibleContents(b)}function l(){a=b.get();n.setInterval(function(){d(!1)},2E3);p=g.debounce(function(){d(!0)},250);u=g.debounce(function(){try{m.telligent.evolution.sockets.present()}catch(a){}},500);
m(n).on("scroll resized",g.requestAnimationFrameThrottle(function(){p();u()}))}var a=null,c=[],k=!0,p,u,k=!0;m(function(){l();setTimeout(function(){k=!1},4E3)});e={register:function(a){a.node=m(a.node);a.isRoot=a.node.is("body");a.services&&(a.contents=a.contents||[],a.services.forEach(function(b){a.contents.push({ContentId:b.ServiceId,ContentTypeId:"00000000000000000000000000000000",TypeId:b.TypeId||""})}),delete a.services);c.push(a);k||(p(),u())}};m.telligent=m.telligent||{};m.telligent.evolution=
m.telligent.evolution||{};m.telligent.evolution.presence=m.telligent.evolution.presence||e;return e},jQuery,window);r("module.preview",function(b,e,g){var m=function(e,d){var l=b.extend({},n.defaults,d||{});b.telligent.evolution.get({url:l.endpoint,data:{url:e,maxImageWidth:"undefined"!==typeof d.maxImageWidth?d.maxImageWidth:l.maxImageWidth,maxImageHeight:"undefined"!==typeof d.maxImageHeight?d.maxImageHeight:l.maxImageHeight},success:function(a){a&&l.success&&"undefined"!==typeof a&&null!==a?l.success(a):
l.error&&l.error(a)},error:function(a,b,d){l.error&&l.error(a,b,d)}})},n={load:function(b,d){m(b,d)},render:function(e,d){if(null!==e&&"undefined"!==typeof e&&"undefined"!==typeof e.url&&0!==e.url.length&&"undefined"!==typeof e.title&&0!==e.title.length){var l=b.extend({},n.defaults,d);return b.telligent.evolution.template.compile(l.template)(e)}},defaults:{endpoint:"",maxImageWidth:375,maxImageHeight:196,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" <% if(url.indexOf(jQuery.telligent.evolution.site.getBaseUrl(true)) < 0) { %>class="external-link" target="_blank"<% } %> rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'}};
b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.preview=n;return{}},jQuery,window);r("module.regex",function(b,e,g){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.regex={encode:function(b){return b?b.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&"):b}};return{}},jQuery,window);r("module.rest",["lib.globalConfiguration"],function(b,e,g,m){function n(a){var c;a:{c=b.authorizationCookieName+
"=";for(var d=document.cookie.split(";"),e=0;e<d.length;e++){for(var h=d[e];" "==h.charAt(0);)h=h.substring(1,h.length);if(0==h.indexOf(c)){c=h.substring(c.length,h.length);break a}}c=null}null!=c&&(a.setRequestHeader("Authorization-Code",c),a.setRequestHeader("Rest-Authorization-Code",c))}function f(a){a&&"~/"==a.substr(0,2)&&(a=b.baseUrl+a.substr(2));return a}function d(a,b,c){var d=a,h=b;d&&(b&&"string"!==typeof b&&!1!==c.processData)&&(h={},e.each(b,function(a,b){var c=RegExp("{"+a+"}","gim");
d.match(c)?d=d.replace(c,g.encodeURIComponent(b)):h[a]=b}));return{url:d,data:h}}function l(a){var b=null,c=[];try{var d=e.isPlainObject(a)?a:JSON.parse(a);d&&(d.Warnings&&e.isArray(d.Warnings)&&0<d.Warnings.length)&&(0<d.Warnings.length&&(b=d.Warnings[0]),c=d.Warnings)}catch(h){}return{single:b,all:c}}function a(a,b){var c=b,d=[];d.push(c);try{var h=e.isPlainObject(a)?a:JSON.parse(a);h&&(h.Errors&&e.isArray(h.Errors)&&0<h.Errors.length)&&(d=[],e.each(h.Errors,function(a,b){b&&0<b.length&&d.push(b.replace(s,
""))}),0<d.length&&(c=d[0]))}catch(k){}return{single:c,all:d}}function c(c,h){var k=d(c.url,c.data,c);c.url=f(k.url);c.data=k.data;var p=c.beforeSend,g=c.error,w=c.warning,v=c.success,s=e.extend({},{defaultErrorMessage:b.defaultErrorMessage},c);e.extend(c,{type:"GET"===h?h:"POST",beforeSend:function(a){p!==m&&p(a);n(a);"PUT"!==h&&"DELETE"!==h||a.setRequestHeader("Rest-Method",h)},success:function(a,b,c){var d=l(a);v&&q(v,this,[a,b,c]);if(d&&null!=d.single)if(w!==m)q(w,this,[c,d.single]);else try{e.each(d.all,
function(a,b){e.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(h){}},error:function(b,c,d){if(0!==b.readyState&&0!==b.status){c=a(b.responseText,s.defaultErrorMessage);if(g!==m)q(g,this,[b,c.single,d]);else try{e.each(c.all,function(a,b){e.telligent.evolution.notifications.show(b,{type:"error"})})}catch(h){alert(c.single)}if((d=l(b.responseText))&&null!=d.single)if(w!==m)q(w,this,[b,d.single]);else try{e.each(d.all,function(a,b){e.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(k){}}}});
return e.ajax(c)}function k(){var a=++t;v[a]={dfd:e.Deferred(),reqs:[]};setTimeout(function(){delete v[a]},x);return a}function p(a,b){var c=v[a];if(c===m)return e.Deferred(function(b){b.reject('Batch "'+a+'" not found')}).promise();if(0===c.reqs.length)return c.dfd.resolve(),c.dfd.promise();var h=e.extend({},z,b),k={Sequential:h.sequential};e.each(c.reqs,function(a,b){var c=b.options.url.replace(/\.xml/i,".json"),c=d(c,b.options.data,b.options);"GET"==b.verb?c.url=e.telligent.evolution.url.modify({url:c.url,
query:c.data||{}}).split("#")[0]:k["_REQUEST_"+a+"_DATA"]=e.param(c.data||{});k["_REQUEST_"+a+"_URL"]=f(c.url);k["_REQUEST_"+a+"_METHOD"]=b.verb});e.ajax({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/batch.json",type:"POST",data:k,beforeSend:function(a){h.beforeSend&&h.beforeSend(a);n(a)}}).done(function(b,d){u(c,b.BatchResponses,this,d);c.dfd.resolveWith(this,[b]);delete v[a]}).fail(function(b,d,h){0!==b.readyState&&0!==b.status&&(b.responseJSON&&b.responseJSON.BatchResponses?u(c,b.responseJSON.BatchResponses,
b,d):e.each(c.reqs,function(a,c){c.options.error&&q(c.options.error,c.options,[b,d,h]);c.dfd.rejectWith(c.options,[b,d,h])}),c.dfd.rejectWith(this,[b,d,h]),delete v[a])});return c.dfd.promise()}function u(b,c,d,h){e.each(c,function(c,k){var f=b.reqs[c];if(200===k.StatusCode){var p=l(k.BatchResponse);f.options.success&&q(f.options.success,f.options,[k.BatchResponse,h,d]);f.dfd.resolveWith(f.options,[k.BatchResponse,h,d]);f.options.complete&&q(f.options.complete,f.options,[d,h]);if(p&&null!=p.single)if(f.options.warning!==
m)q(f.options.warning,this,[d,p.single]);else try{e.each(p.all,function(a,b){e.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(g){}}else{p=a(k.BatchResponse,f.options.defaultErrorMessage);if(f.options.error)q(f.options.error,d,[k,p.single,h]);else try{p.all.forEach(function(a){e.telligent.evolution.notifications.show(a,{type:"error"})})}catch(w){alert(p.single)}f.dfd.rejectWith(d,[k,p.single,h]);f.options.complete&&q(f.options.complete,f.options,[d,h]);if((p=l(k.BatchResponse))&&
null!=p.single)if(f.options.warning!==m)q(f.options.warning,this,[d,p.single]);else try{e.each(p.all,function(a,b){e.telligent.evolution.notifications.show(b,{type:"warning"})})}catch(v){}}})}function q(a,b,c){if(a)if(e.isArray(a))for(var d=0;d<a.length;d++)a[d].apply&&a[d].apply(b,c);else a.apply&&a.apply(b,c)}function h(a,d){null!==y&&(a.batch=y);a&&(a.url&&0<=a.url.indexOf("/api.ashx/")&&"GET"==d)&&(a=e.extend({},{cache:!1},a));if(a&&a.batch){var h=a,f;f=h.batch;v[f]===m&&(f=k());f=v[f];h={options:e.extend({},
{defaultErrorMessage:b.defaultErrorMessage},h),verb:d,dfd:e.Deferred()};f.reqs.push(h);return h.dfd.promise()}return c(a,d)}function w(a,b){if(a){if(null!==y)throw"Batched REST requests cannot be nested.";var c=k();y=c;try{a.apply(this)}finally{y=null}return p(c,b)}}var s=/(?:<|>)/g,v={},t=0,x=6E4,y=null,z={sequential:!1,beforeSend:null};w.create=k;w.process=p;var A={get:function(a){return h(a,"GET")},post:function(a){return h(a,"POST")},put:function(a){return h(a,"PUT")},del:function(a){return h(a,
"DELETE")},writeAuthorizationHeader:n,ensureRemoteUrlEncoding:f,batch:w};e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.extend(e.telligent.evolution,A);g.TelligentUtility||(g.TelligentUtility={WriteAuthorizationHeader:function(a){e.telligent.evolution.writeAuthorizationHeader(a)}});return A},jQuery,window);r("module.scheduledFile",["lib.globalConfiguration","module.messaging"],function(b,e,g,m,n){function f(){e.subscribe("socket.connected",function(){g.telligent.evolution.sockets.scheduledFile.on("complete",
function(a){a.resultKey?(d(a.resultKey,l(a.progressKey,a)).then(function(b){k(l(a.progressKey,a),b.largeResult)}),c(l(a.progressKey))):k(l(a.progressKey,a),a.result)});g.telligent.evolution.sockets.scheduledFile.on("error",function(a){p(l(a.progressKey,a),a.message)});g.telligent.evolution.sockets.scheduledFile.on("progress",function(a){u(l(a.progressKey,a),a.percentComplete||null,a.message||null)})},{excludeAutoNameSpaces:!0})}function d(a,c){return g.telligent.evolution.post({url:b.scheduledFileStatusUrl,
data:{resultKey:a,runAsUserId:c?c.runAsUserId||null:null,presenceId:c?c.presenceId||null:null}})}function l(a,b){var c=w[a];c||(c={key:a,messagesReceived:{}},b&&(b.runAsUserId&&(c.runAsUserId=b.runAsUserId),b.presenceId&&(c.presenceId=b.presenceId)),w[a]=c);return c}function a(d){clearTimeout(d.fallbackTimeout);d.fallbackTimeout=setTimeout(function(){g.telligent.evolution.post({url:b.scheduledFileStatusUrl,data:{key:d.key,runAsUserId:d?d.runAsUserId||null:null,presenceId:d?d.presenceId||null:null}}).then(function(b){a(d);
if(!b)return null;if(b.Log)for(var c=0;c<b.Log.length;c++){var h=b.Log[c];h&&!d.messagesReceived[h]&&u(d,null,h)}"Completed"==b.State?(b.PercentComplete&&u(d,b.PercentComplete),k(d,b.Result)):"Cancelled"==b.State||"Errored"==b.State?(b.PercentComplete&&u(d,b.PercentComplete),p(d,b.Result)):b.PercentComplete&&u(d,b.PercentComplete)},function(){c(d)})},h)}function c(a){a&&setTimeout(function(){clearTimeout(a.fallbackTimeout);delete w[a.key]},h/2)}function k(a,b){c(a);e.publish("scheduledFile.complete",
{progressKey:a.key,percentComplete:1,result:q(b||"")})}function p(a,b){c(a);e.publish("scheduledFile.error",{progressKey:a.key,message:q(b||"")})}function u(b,c,d){a(b);e.publish("scheduledFile.progress",{progressKey:b.key,percentComplete:c||null,message:d||null});d&&(b.messagesReceived[d]=!0)}function q(a){try{return JSON.parse(a)}catch(b){return a}}var h=5E3,w={};g.telligent=g.telligent||{};g.telligent.evolution=g.telligent.evolution||{};g.telligent.evolution.scheduledFile={monitor:function(b,c){a(l(b,
c))}};return{init:function(){f()}}},jQuery,window);r("module.scriptRendering",["lib.util","events.rendered"],function(b,e,g,m,n){function f(a){return(a.attr("src")||c.test(a.attr("type")||""))&&!g.contains(m.document.documentElement,a.get(0))}function d(a,b,c){try{var d=g(b);c.scripts=[];d.filter("script").each(function(){var a=g(this);f(a)&&(c.scripts.push(a),a.remove())});d.find("script").each(function(){var a=g(this);f(a)&&(c.scripts.push(a),a.remove())});return 0<c.scripts.length?d=d.filter(function(){var a=
g(this);return!(a.is("script")&&f(a))}):b}catch(e){return b}}function l(a,b){if(b.scripts&&0!==b.scripts.length){var c=[],d=[],f=[];g.each(b.scripts,function(a,b){b.attr("src")?p[b.attr("src")]?d[a]="":c.push(g.telligent.evolution.get({url:b.attr("src"),type:"GET",dataType:"text",success:function(c){d[a]=c+"";f.push(b.attr("src"))},error:function(a,b,c){}})):d[a]=b.get(0).textContent.replace(k,"")});g.when.apply(g,c).then(function(){g.globalEval(d.join("\n;;;\n"));g.each(f,function(a,b){p[b]=!0});
e.decrementLoading(a)})["catch"](function(b){e.decrementLoading(a)})}else e.decrementLoading(a)}function a(a){return a?(a=g(a).get(0))?g.contains(document,a):!1:!1}var c=/^$|\/(?:java|ecma)script/i,k=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,p={};return{initiate:function(){g("script[src]").each(function(){p[g(this).attr("src")]=!0});g.each(["html","append","prepend"],function(b,c){var h=g.fn[c];g.fn[c]=function(){var b=arguments;if(a(this)||a(b)){var c={scripts:[]};e.incrementLoading(this);b[0]=
d(this,b[0],c);b=h.apply(this,b);l(this,c);return b}return h.apply(this,b)}})}}},jQuery,window);r("module.shortcuts",["lib.shortcutRegistry"],function(b,e,g,m){e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});return{init:function(){e.telligent.evolution.shortcuts=e.telligent.evolution.shortcuts||new b}}},jQuery,window);r("module.sockets.connection",function(b,e,g){var m=function(e){m.connectionState=b.signalR.connectionState;var f=b.connection(e.endpoint);return{start:function(b){return f.start(b)},
stop:function(){return f.stop()},send:function(b){return f.send(b)},received:function(b){return f.received(b)},error:function(b){return f.error(b)},stateChanged:function(b){return f.stateChanged(b)},disconnected:function(b){return f.disconnected(b)},reconnected:function(b){return f.reconnected(b)}}};return m},jQuery,window);r("module.sockets.crossTabRequest",["lib.crossWindowBus","lib.backgroundTimer"],function(b,e,g,m,n){var f={},d={timeout:50};return function(l){g.extend({},f,l||{});var a={},c=
{},k=new b({key:"__ctr",includeLocal:!1,receive:function(b,d,e){"req"==b?(b=null,a[d.name]&&(b=a[d.name](d.data)),k.send(e.source,"resp",{name:d.name,response:b})):"resp"==b&&(c[d.name]=c[d.name]||[],c[d.name].push({source:e.source,response:d.response}))}});return{handle:function(b,c){a[b]=c},request:function(a,b,f){return g.Deferred(function(h){var l=g.extend({},d,f||{});c=c||{};delete c[a];k.broadcast("req",{name:a,data:b});e.setTimeout(function(){c[a]?h.resolve({responses:c[a]}):h.resolve({responses:[]})},
l.timeout)}).promise()}}}},jQuery,window);r("module.sockets.managedConnection",["module.sockets.connection","lib.crossWindowPresentContentRegistrarSingleton","lib.backgroundTimer","module.messaging"],function(b,e,g,m,n,f,d){function l(a){a.reconnectAttempts++;var b=1E3*(Math.pow(2,a.reconnectAttempts)-1);b>a.maxReconnectDelay&&(b=a.maxReconnectDelay,a.reconnectAttempts--);return Math.floor(Math.random()*(b-1)+1)}function a(a,b){var c=l(a);g.clearTimeout(a.reconnectTimeout);a.reconnectTimeout=g.setTimeout(function(){a.authenticated&&
(g.clearTimeout(a.reconnectTimeout),k(a))},c)}function c(a,c,d){if(a.authenticated){var e=a.crossWindowPresentContentRegistrar.getUniqueVisibleContent(),k;k=[];for(var f=0;f<(e||[]).length;f++)k.push(e[f].ContentId+"|"+e[f].ContentTypeId+"|"+e[f].TypeId),k.sort();k="_present:"+k.join(",");a.connectionState!=b.connectionState.connected||d&&(null==e||0==e.length||a.lastSentPresenceMessage&&k===a.lastSentPresenceMessage)||(c.send(k),a.lastSentPresenceMessage=k)}}function k(a){a.connection.start({callback:function(){a.authenticated=
!0}})}function p(d,e){var l=d.connectionState;d.connectionState=e;switch(d.connectionState){case b.connectionState.connected:g.clearTimeout(d.raiseDisconnectTimeout);if(!d.raisedInitialConnect){if(d.raisedInitialConnect=!0,d.onConnected)d.onConnected()}else if(d.raisedInitialConnect&&d.onReconnected)d.onReconnected();d.reconnectAttempts=0;g.clearInterval(d.presenceInterval);d.presenceInterval=g.setInterval(function(){c(d,d.connection)},d.sendPresenceIntervalTime);n(f).off(q).on("beforeunload"+q,function(){d.unloaded=
!0;d.connection.stop()}).on("online"+q,function(){k(d)}).on("wake"+q,function(){k(d)});break;case b.connectionState.connecting:case b.connectionState.reconnecting:case b.connectionState.disconnected:l==b.connectionState.connected&&!d.unloaded&&d.onDisconnected&&(g.clearTimeout(d.raiseDisconnectTimeout),d.raiseDisconnectTimeout=g.setTimeout(function(){if(d.authenticated)d.onDisconnected(!0)},d.disconnectGracePeriod)),d.connectionState!=b.connectionState.disconnected||d.unloaded||a(d,d.connection)}}
var u={endpoint:"",sendPresenceIntervalTime:2E4,reconnectAttempts:0,disconnectGracePeriod:2E3,maxReconnectDelay:3E5,connectionState:0,raisedInitialConnect:!1,reconnectTimeout:0,presenceInterval:null,onReceived:null,onConnected:null,onDisconnected:null,onReconnected:null},q="._sockets_managedConnection";return function(a){var d=n.extend({},u,a||{});n.ajaxPrefilter(function(a,b,c){0===a.url.indexOf(d.endpoint)&&n.telligent.evolution.writeAuthorizationHeader(c)});d.connection=new b({endpoint:d.endpoint});
d.connection.stateChanged(function(a){p(d,a.newState)});d.connection.received(function(a){if(d.onReceived)d.onReceived(a)});d.connection.error(function(a){d.connection.stop()});m.subscribe("user.logout",function(){d.authenticated=!1;d.onDisconnected&&g.setTimeout(function(){d.onDisconnected(!1)},3E3)},{excludeAutoNameSpaces:!0});return{start:function(a){a.onConnected&&(d.onConnected=a.onConnected);a.onReceived&&(d.onReceived=a.onReceived);a.onDisconnected&&(d.onDisconnected=a.onDisconnected);a.onReconnected&&
(d.onReconnected=a.onReconnected);d.crossWindowPresentContentRegistrar||(d.crossWindowPresentContentRegistrar=e.get());k(d)},stop:function(){d.connectionState!=b.connectionState.disconnected&&d.connection.stop()},send:function(a){d.connectionState!=b.connectionState.connected&&d.authenticated||d.connection.send(a)},sendPresence:function(){c(d,d.connection,!0)}}}},jQuery,window);r("module.sockets.sharedObjectProxy",["lib.crossWindowBus","module.sockets.sharedObjectProxyState","module.sockets.crossTabRequest",
"lib.backgroundTimer"],function(b,e,g,m,n,f,d){function l(b){m.setInterval(function(){switch(b.mode){case q.initial:case q.worker:b.beatsWithoutCoordinator++;b.beatsWithoutCoordinator>b.maxBeatsWithoutCoordinator&&(c(b),b.coordinatorId=null,a(b));break;case q.coordinator:b.crossWindowBus.broadcast(h.coordinating,{});break;case q.volunteer:b.beatsAsVolunteer++,b.beatsAsVolunteer>b.maxBeatsAsVolunteer&&k(b)}},f.__shared_object_proxy_interval?f.__shared_object_proxy_interval:b.heartbeat)}function a(a){null!==
a.objectInstance&&(a.destroy(a.objectInstance),a.objectInstance=null)}function c(b){b.mode=q.volunteer;b.beatsAsVolunteer=0;b.coordinatorId=null;a(b);b.crossWindowBus.broadcast(h.volunteer,{})}function k(a){a.mode=q.coordinator;a.beatsAsVolunteer=0;a.coordinatorId=a.id;a.objectInstance=a.construct();a.crossWindowBus.broadcast(h.coordinating,{});if(a.delayedMessageQueue)for(var b=0;b<a.delayedMessageQueue.length;b++)u(a,a.delayedMessageQueue[b].message,a.delayedMessageQueue[b].data)}function p(b){b.mode=
q.worker;b.coordinatorId=null;a(b);b.beatsAsVolunteer=0}function u(a,b,c){a.mode===q.coordinator&&null!==a.objectInstance?a.receive(a.objectInstance,b,c):null!==a.coordinatorId?a.crossWindowBus.send(a.coordinatorId,h.call,{name:b,data:c}):(a.delayedMessageQueue.push({message:b,data:c}),a.delayedMessageQueue.length>a.delayedMessageQueueMaxLength&&a.delayedMessageQueue.shift())}var q={initial:0,coordinator:1,volunteer:2,worker:3},h={coordinating:"sop:coordinating",working:"sop:working",volunteer:"sop:volunteer",
ok:"sop:ok",call:"sop:call",resign:"sop:resign",newarrival:"sop:newarrival"},w={heartbeat:1E3,preexisting:function(a){},construct:function(){},destroy:function(a){},receive:function(a,b,c){}},s={mode:q.initial,id:0,beatsWithoutCoordinator:0,beatsAsVolunteer:0,coordinatorId:0,objectInstance:null,delayedMessageQueue:[],delayedMessageQueueMaxLength:25,maxBeatsAsVolunteer:2,maxBeatsWithoutCoordinator:2};return function(d){var t=n.extend({},w,d||{},s);t.crossTabRequest=new g;t.crossWindowBus=new b({key:"__sop",
includeLocal:!1,receive:function(b,d,k){k=k.source;switch(b){case h.coordinating:t.beatsWithoutCoordinator=0;t.mode===q.worker||t.mode===q.initial?(t.coordinatorId=k,t.mode===q.initial&&p(t)):(t.mode===q.coordinator&&t.crossWindowBus.broadcast(h.resign,{}),p(t));e.hasMultipleWindows(!0);d&&d.preExisting&&t.preexisting();t.crossWindowBus.send(k,h.working,{});break;case h.working:e.hasMultipleWindows(!0);break;case h.volunteer:t.mode!==q.coordinator&&t.mode!==q.volunteer||t.crossWindowBus.send(k,h.ok,
{});break;case h.ok:t.mode===q.volunteer&&p(t);break;case h.call:t.mode===q.coordinator&&null!==t.objectInstance&&t.receive(t.objectInstance,d.name,d.data);break;case h.resign:if(t.mode===q.worker||t.mode===q.initial)c(t),t.coordinatorId=null,a(t);break;case h.newarrival:t.mode===q.coordinator&&t.crossWindowBus.send(k,h.coordinating,{preExisting:!0})}}});t.id=t.crossWindowBus.id();l(t);n(f).on("unload",function(){t.mode!==q.worker&&t.crossWindowBus.broadcast(h.resign,{})});t.crossWindowBus.broadcast(h.newarrival,
{});t.crossTabRequest.handle("CurrentMode",function(){return t.mode});t.crossTabRequest.request("CurrentMode",{},{timeout:100}).then(function(a){for(var b=!1,c=0;c<a.responses.length;c++)a.responses[c]===q.coordinator&&(b=!0);!b&&(0<a.responses.length&&t.mode===q.initial)&&k(t)});m.setTimeout(function(){t.mode===q.initial&&k(t)},2*t.heartbeat);return{call:function(a,b){u(t,a,b)}}}},jQuery,window);r("module.sockets.sharedObjectProxyState",["lib.backgroundTimer"],function(b,e,g,m){var n=!1,f=null;e=
{hasMultipleWindows:function(d){d!==m&&(b.clearTimeout(f),n=d,f=b.setTimeout(function(){n=!1},2500));return n}};return g._sharedObjectProxyState=e},jQuery,window);r("module.sockets","module.messaging module.sockets.managedConnection module.sockets.sharedObjectProxy lib.crossWindowBus lib.backgroundTimer module.presence".split(" "),function(b,e,g,m,n,f,d,l,a){var c={},k,p,u=!1,q=function(){d(document).ready(function(){u?b.publish("socket.reconnected",null,{crossWindow:!0}):(u=!0,k.call("sendPresence"),
b.publish("socket.connected",null,null,!0))})},h=function(a){var b=d("body");f.register({node:b.get(0),contents:a})},w=function(a,b,e){(a=c[a+"|"+b])&&d.each(a,function(a,b){try{b(e||null)}catch(c){}})},s=function(a){d.each(a.sockets,function(a,b){s[b.name]={on:function(a,d){var e=b.fullName+"|"+a;c[e]=c[e]||[];c[e].push(d)},off:function(a){delete c[b.fullName+"|"+a]},send:function(a,c){if(k){var d=JSON.stringify({_s:b.fullName,_m:a,_d:c||null});k.call("send",d)}}}});s.present=function(){null!==p&&
p.broadcast("_shared_socket.sendPresence")};0<a.sockets.length&&(p=new m({key:"__rsm",includeLocal:!0,receive:function(c,d){if("_shared_socket.receive"===c){if(d&&0!=d.length){var e=JSON.parse(d);w(e._s,e._m,e._d)}}else"_shared_socket.socketsReady"===c?(h(a.presentPageContexts),q()):"_shared_socket.socketsDisconnected"===c?b.publish("socket.disconnected",{reconnecting:d.reconnecting},{crossWindow:!0}):"_shared_socket.socketsReconnected"===c?(k.call("sendPresence"),b.publish("socket.reconnected",null,
{crossWindow:!0})):"_shared_socket.sendPresence"===c&&k.call("sendPresence")}}),k=new g({heartbeat:1E3,preexisting:function(b){n.setTimeout(function(){h(a.presentPageContexts);q()},250)},construct:function(){var b=new e({endpoint:a.endpoint});b.start({onConnected:function(){p.broadcast("_shared_socket.socketsReady")},onReceived:function(a){p.broadcast("_shared_socket.receive",a)},onDisconnected:function(a){p.broadcast("_shared_socket.socketsDisconnected",{reconnecting:a})},onReconnected:function(){p.broadcast("_shared_socket.socketsReconnected")}});
return b},destroy:function(a){null!==a&&a.stop()},receive:function(a,b,c){null!==a&&("send"===b?a.send(c):"sendPresence"===b&&a.sendPresence())}}))};s.defaults={};d.telligent=d.telligent||{};d.telligent.evolution=d.telligent.evolution||{};d.telligent.evolution.sockets=d.telligent.evolution.sockets||s;return{}},jQuery,window);r("module.systemNotifications",["lib.storageProxy","module.messaging","events.systemnotifications","module.notifications"],function(b,e,g,m,n,f,d){function l(a){postponedNotifications=
w.get(u)||{};postponedNotifications[a]=(new Date).getTime();w.set(u,postponedNotifications);clearTimeout(v);v=setTimeout(function(){p()},1E3*t.postponeDelay)}function a(a){var b=w.get(u);return b&&b[a]&&(new Date).getTime()-b[a]<1E3*t.postponeDelay?!0:!1}function c(b,c,d){!a(b)&&q&&c&&0<c.length&&0<d?(1<d&&(c+=" "+t.andMoreText.replace(/\{0\}/g,d-1)),c='<div class="system-notification-title">'+t.notificationText+'</div><div class="system-notification-content">'+c+'</div><div class="system-notification-review">'+
t.reviewText+"</div>",m.show(c,{type:"system-notification",duration:6048E5,id:h,onClick:x.openPanel,onClose:function(){l(b)}})):m.hide(h)}function k(){e.subscribe("systemnotification.raised",function(a){s||c(a.id,a.message,a.count)},{excludeAutoNameSpaces:!0});e.subscribe("systemnotification.resolved",function(a){s||c(a.nextid,a.message,a.count)},{excludeAutoNameSpaces:!0})}function p(){return n.telligent.evolution.get({url:n.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/systemnotifications.json",
data:{IsResolved:!1,PageSize:s?100:1,PageIndex:0,SortOrder:"Ascending",SortBy:"LastOccurredDate "}}).then(function(b){var d=b.TotalCount;if(0<d){var h=0<b.SystemNotifications.length?b.SystemNotifications[0]:{};s?b.SystemNotifications.forEach(function(b){a(b.Id)||e.publish("systemnotification.raised",{id:b.Id,message:b.Subject,totaloccurences:b.TotalOccurrences,lastoccurred:b.LastOccurredDate,preexisting:!0})}):c(h.Id,h.Subject,d)}})}var u="systemnotifications",q=!1,h="__systemnotification",w=null,
s=!1,v=null,t={explicitPanelUrl:"",notificationText:"System Notification",reviewText:"Review",andMoreText:" (plus {0} more)",postponeDelay:600},x={configure:function(a){t=n.extend(t,a)},openPanel:function(){f.location.href=t.explicitPanelUrl},suppressRendering:function(a){a!==d&&(s=a);return s},postpone:function(a){l(a)},reset:function(a){postponedNotifications=w.get(u)||{};delete postponedNotifications[a];w.set(u,postponedNotifications)}};n.telligent||(n.telligent={});n.telligent.evolution||(n.telligent.evolution=
{});n.telligent.evolution.systemNotifications=x;return n.extend({initiate:function(){k();w=new b({id:n.telligent.evolution.user.accessing.id,isSystemAccount:n.telligent.evolution.user.accessing.isSystemAccount});(q=(q=(q=!f.parent||f==f.parent)&&!n("body").hasClass("administration"))&&!(n.telligent.evolution.user.accessing.isSystemAccount||n.telligent.evolution.user.accessing.isTemporary))&&p();g.initiate()}},x)},jQuery,window);r("module.template",["lib.lruCache","lib.storageProxy","module.javaScript",
"module.html","lib.util"],function(b,e,g,m,n,f,d,l){var a={},c={open:"<%",close:"%>"},k=null,p=function(){var a=new e(f.telligent&&f.telligent.evolution&&f.telligent.evolution.user&&f.telligent.evolution.user.accessing?f.telligent.evolution.user.accessing:{isSystemAccount:!0,id:0});return new b({load:function(){return a.get("__templates")},persist:function(b){a.set("__templates",b)}})},u=function(a,b){var c={};return function(a,b){var d=b.open+b.close,e=c[d];e||(e=RegExp("("+n.escapeRegEx(b.open)+
"|"+n.escapeRegEx(b.close)+")","g"),c[d]=e);for(var d=a.split(e),e=!1,h=0;h<d.length;h++)d[h]==b.open?e=!0:d[h]==b.close?e=!1:e||(d[h]=g.encode(d[h]));return d.join("")}}(),q=function(a,b,d){var e=d.get(a);if(!e){e=f.extend({},c,b||{});b=RegExp(n.escapeRegEx(e.open)+"=([\\s\\S]+?)"+n.escapeRegEx(e.close),"g");var h=RegExp(n.escapeRegEx(e.open)+":([\\s\\S]+?)"+n.escapeRegEx(e.close),"g"),k=RegExp(n.escapeRegEx(e.open)+"(.*?)"+n.escapeRegEx(e.close),"g"),e="var s=[];with(data){with(e){with(d){s.push('"+
u(a,e).replace(b,"');s.push(String($1));s.push('").replace(h,"');s.push(escape(String($1)));s.push('").replace(k,"');$1s.push('")+"');}}}return s.join('');";d.set(a,e)}a=new Function("d","e","data",e);a.compiledSource="function(d, e, data) { "+e+" } ";return a},h=function(b){return a[b]};f.extend(h,{compile:function(b,c,d,e){e||(k||(k=p()),e=k);var f=a[b];if("undefined"===typeof f){var l=null!==document.getElementById(b)?document.getElementById(b).innerHTML:b,g=q(l,d,e);a[b]=f=function(a){return g.call(this,
h.helpers||{},c||{},a||{})};f.source={raw:l,compiled:g.compiledSource}}return f},helpers:{foreach:function(a,b){if(a&&0<a.length&&b)for(var c=0;c<a.length;c++)b(a[c],c)},escape:function(a){return m.encode(a)},template:function(b,c){var d=a[b];if(d===l||null===d)throw"Subtemplate "+b+" is undefined.";return d(c)},call:function(a,b){return a(b)}},register:function(b,c){a[b]=function(a){return c.call(this,h.helpers||{},a||{})}}});f.telligent=f.telligent||{};f.telligent.evolution=f.telligent.evolution||
{};return f.telligent.evolution.template=h},jQuery,window);r("module.themePreview",["module.messaging","module.rest"],function(b,e,g,m,n){function f(a){return g.Deferred(function(b){!0===a!=c.isPreviewing?g.telligent.evolution.post({url:c.callbackUrl,data:{Enabled:!0===a}}).then(function(){h=!0;d(!0===a);b.resolve(!0===a)})["catch"](function(){b.reject(c.isPreviewing)}):b.resolve(!0===a)}).promise()}function d(a){if(a!=c.isPreviewing){if(a)m.document.cookie=c.cookieName+"=True; path=/";else{var b=
new Date;b.setTime(b.getTime()+-864E5);m.document.cookie=c.cookieName+"=; expires="+b.toGMTString()}c.isPreviewing=a;p?u=!0:q||m.location.reload(!0)}}function l(){b.subscribe("administration.panel.loaded",function(){p=!0},{excludeAutoNameSpaces:!0});b.subscribe("context.shell.closed",function(){p=!1;h&&(c.isPreviewing&&m.confirm(c.stopPreviewingConfirmation))&&f(!1);u&&!q&&(u=!1,m.location.reload(!0))},{excludeAutoNameSpaces:!0});b.subscribe(k.enabled,function(){d(!0)},{excludeAutoNameSpaces:!0});
b.subscribe(k.disabled,function(){d(!1)},{excludeAutoNameSpaces:!0});g(document).on("customizepage",function(){q=!0})}function a(){m.parent!=m&&(q=!0);g.telligent.evolution.sockets.themepreview&&(g.telligent.evolution.sockets.themepreview.on("preview-updated",function(a){m.clearTimeout(w);w=m.setTimeout(function(){b.publish(k.updated,{});c.isPreviewing&&(p?u=!0:q||m.location.reload(!0))},1E3)}),g.telligent.evolution.sockets.themepreview.on("preview-enabled",function(a){b.publish(k.enabled,{})}),g.telligent.evolution.sockets.themepreview.on("preview-disabled",
function(a){b.publish(k.disabled,{})}))}var c={callbackUrl:null,isPreviewing:!1,previewUrl:"",stopPreviewingConfirmation:"",cookieName:"enable_theme_staging"},k={enabled:"themepreview.enabled",disabled:"themepreview.disabled",updated:"themepreview.updated"},p=!1,u=!1,q=!1,h=!1,w=null;e={enabled:function(a){return a===n?c.isPreviewing:f(a)},configure:function(a){c=g.extend({},c,a)},hasPendingRefresh:function(){return u}};g.telligent||(g.telligent={});g.telligent.evolution||(g.telligent.evolution={});
g.telligent.evolution.themePreview=e;return g.extend({initiate:function(){l();a()}},e)},jQuery,window);r("module.tourtips",["module.configuration"],function(b,e,g,m){function n(){function a(b){return e.telligent.evolution.user.accessing.id+":"+b}function b(a){return"tourtip_:"+a}var c=e.telligent.evolution.user.accessing.isSystemAccount?g.sessionStorage:g.localStorage;return{get:function(d){if(c)return JSON.parse(c.getItem(b(a(d))))},set:function(d,e){c&&c.setItem(b(a(d)),JSON.stringify(e))},remove:function(d){c&&
c.removeItem(b(a(d)))}}}function f(){u&&(g.clearTimeout(c),c=g.setTimeout(f,p));var b=[],h=[];e.each(a,function(a,c){var d=q.get(c.key);d&&!d.read?b.push(c):d||h.push(c)});a.length=0;if(0<h.length)if(e.telligent.evolution.user.accessing.isSystemAccount)e.each(h,function(a,c){b.push(c)}),d(b);else{var k={},n=[];e.each(h,function(a,b){n.push(b.key);k[b.key]=b});u=!0;l.list(n).then(function(a){u=!1;e.each(a.TourTips,function(a,c){q.set(c.Key,{read:c.Read});if(!c.Read){var d=k[c.Key];d&&b.push(d)}});
d(b)})}else d(b)}function d(a){q=q||n();var b=q.get(h);b&&0<b&&b>(new Date).getTime()||(a=a.sort(function(a,b){return a.index-b.index}),e.telligent.evolution.messaging.publish("ui.tourtips",{tips:a}))}var l={mark:function(a,b){return(b?e.telligent.evolution.post:e.telligent.evolution.del)({url:e.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/tourtips/{key}.json?IncludeFields=Key,Read",data:{key:a}})},list:function(a){return e.telligent.evolution.get({url:e.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/tourtips.json?IncludeFields=Key,Read",data:{Keys:a.join(",")}})}},a=[],c,k=0,p=1E3,u=!1,q,h="suppressUntil";e.telligent=e.telligent||{};e.telligent.evolution=e.telligent.evolution||{};e.telligent.evolution.tourTips={register:function(b){e.telligent.evolution.user&&e.telligent.evolution.user.accessing&&(q=q||n(),b&&(b.index==m&&(b.index=k++),a.push(b),g.clearTimeout(c),c=g.setTimeout(f,p)))},mark:function(a,b){q.set(a,{read:b});return e.telligent.evolution.user.accessing.isSystemAccount?
e.Deferred(function(a){a.resolve()}).promise():l.mark(a,b)},suppress:function(a){q=q||n();a&&0<a?q.set(h,(new Date).getTime()+a):q.remove(h)}};return{}},jQuery,window);r("module.ui",["lib.util"],function(b,e,g,m){function n(a){a=e(a||document);for(var b in c.components){var f=c.components[b],q=e(".ui-"+b,a);a.hasClass(".ui-"+b)&&q.add(a);q&&(0<q.length&&"undefined"!==typeof f.setup&&!l[b])&&(f.setup.call(this),l[b]=!0);q&&(0<q.length&&"undefined"!==typeof f.add)&&q.each(function(){try{var a=e(this);
a.data(d+"."+b)||(f.add.call(a,a,c.data(a)),a.data(d+"."+b,!0))}catch(k){g.console&&g.console.log&&g.console.log(k)}})}}function f(b){var c;a++;try{c=b()}catch(d){}a--;return c}var d="_telligent_evolution_ui_render_add",l={},a=0,c={components:{},render:n,suppress:f,defer:function(a,b){var c=f(b);n(a);return c},data:function(a){if(!a)return{};a=e(a);var b=a.data("_telligent_evolution_ui_data");if(null===b||"undefined"===typeof b){var b=a.get(0),c={};if(b.dataset)c=b.dataset;else for(var d=0;d<b.attributes.length;d++){var h=
b.attributes[d];if(0===h.name.indexOf("data-")){var f=h.name.substring(5);c[f]=h.value}}c.configuration&&(c=e.extend({},c,{configuration:e.telligent.evolution.url.parseQuery(c.configuration)}));b=c;a.data("_telligent_evolution_ui_data",b)}return b}};e.telligent||(e.telligent={});e.telligent.evolution||(e.telligent.evolution={});e.telligent.evolution.ui=c;return e.extend({initiate:function(){e.each(["html","append","prepend"],function(c,d){e.fn[d]=b.wrap(e.fn[d],{after:function(){0==a&&e.telligent.evolution.ui.render(this)}})});
e.each(["after","before"],function(c,d){e.fn[d]=b.wrap(e.fn[d],{after:function(){0==a&&e.telligent.evolution.ui.render(this.parent())}})});e.each(["replaceWith"],function(c,d){e.fn[d]=b.wrap(e.fn[d],{filterArguments:function(a){return e(a)[0]?[e(a)]:[a]},after:function(b){0==a&&e.telligent.evolution.ui.render(b)}})})}},c)},jQuery,window);r("module.url",function(b,e,g){var m=null,n=function(b,a,c,d,e){if(!b)return b;var f=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(b);return b.replace(a,function(a,
h,g){if(" "==a)return c;if("."!=a||f||g==b.length-1||"."==b.substr(g+1,1)){h=[];h[h.length]=e;for(g=0;g<a.length;g++){var n=a.charCodeAt(g).toString(16)+"",m=n.length;4==m?(h.push(n.substr(2,2).toUpperCase()),h.push(n.substr(0,2).toUpperCase())):3==m?(h.push(n.substr(1,2).toUpperCase()),h.push("0"),h.push(n.substr(0,1).toUpperCase())):2==m&&(h.push(n.toUpperCase()),h.push("00"))}h[h.length]=e;return h.join("")}return d})},f=function(b,a,c,d){return b?b.replace(a,function(a,b,e){if(1==a.length){if(a==
c)return" ";if(a==d)return"."}else{a=a.substr(1,a.length-2);if(0!=a.length%4)return"";b=[];for(e=0;e<a.length;e+=4)b[b.length]=String.fromCharCode(parseInt(a.substr(e+2,2)+a.substr(e,2),16));return b.join("")}}):b},d={parseQuery:function(d){var a=d.split("?"),c={};d=(1<a.length?a[1]:d).split("#")[0].split("&");b.each(d,function(a,b){b=b.split("=");2===b.length&&(c[decodeURIComponent(b[0].replace(/\+/gi," "))]=decodeURIComponent(b[1].replace(/\+/gi," ")))});return c},serializeQuery:function(d){d=d||
{};var a=[];b.each(d,function(b,d){if(null!=d&&"function"===typeof d.toISOString)d=d.toISOString();else if(null==d||d==g)d="";a[a.length]=encodeURIComponent(b)+"="+encodeURIComponent(d)});return a.join("&")},modify:function(f){f=b.extend({url:e.location.href,query:null,hash:e.location.hash,protocol:e.location.protocol},f);var a=[f.url.split("?")[0].split("#")[0]],c;"string"===typeof f.query&&(f.query=d.parseQuery(f.query));(c=d.serializeQuery(b.extend(d.parseQuery(f.url),f.query)))&&0<c.length&&(a[a.length]=
"?"+c);f.hash&&0<f.hash.length&&(a[a.length]=(0!==f.hash.indexOf("#")?"#":"")+f.hash);return a.join("")},hashData:function(f,a){var c=!1,k="";b.isPlainObject(a)?(c=a.overrideCurrent,k=a.prefix||""):c=a;if(k){var g={},n;for(n in f)g[k+n]=f[n];f=g}if("undefined"===typeof f||"string"===typeof f){c="string"===typeof f?f:e.location.href;f={};var c=c.split("#"),q="";2<c.length&&(b.each(c,function(a,b){0<a&&(1<a&&(q+="#"),q+=b)}),c=[c[0],q]);2===c.length&&(f=d.parseQuery(c[1]));return f}c||(f=b.extend(d.hashData(),
f));e.location.href=e.location.href.split("#")[0]+"#"+d.serializeQuery(f)},encode:function(b){return encodeURIComponent(b)},decode:function(b){return decodeURIComponent(b)},encodePathComponent:function(b){return n(b,/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(b){return f(b,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(b){return n(b,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(b){return f(b,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,
"-",".")},navigateTo:function(d){var a=b("base");if(0<a.length){m||(m=b("<a></a>").css({position:"absolute",left:"-1000px"}),b("body").append(m));var c=m.attr({href:d})[0];try{e.document.createEvent?c.dispatchEvent(function(a){a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);return a}(document.createEvent("MouseEvents"))):c.dispatchEvent(new MouseEvent("click",{view:e,bubbles:!0,cancelable:!0}))}catch(k){(a=a.attr("target"))?e.open(d,a):e.document.location=d}}else e.document.location=
d}};b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});return b.telligent.evolution.url=d},jQuery,window);r("plugins","plugin.dynamicForm plugin.evolutionBookmark plugin.evolutionComposer plugin.evolutionFeature plugin.evolutionHighlight plugin.evolutionInlineTagEditor plugin.evolutionLike plugin.evolutionModerate plugin.evolutionPager plugin.evolutionResize plugin.evolutionStarRating plugin.evolutionTagTextBox plugin.evolutionTheater plugin.evolutionToggleLink plugin.evolutionTransform plugin.evolutionUserFileTextBox plugin.validation plugin.evolutionTextEditor plugin.evolutionScrollSlider plugin.evolutionMasonry plugin.evolutionTip plugin.evolutionTokenTextBox plugin.evolutionVote plugin.evolutionSqueezeText plugin.evolutionCodeEditor plugin.evolutionThreadReplies plugin.evolutionHtmlEditor plugin.evolutionProgressIndicator plugin.evolutionScrollable".split(" "),
function(){return{}});r("plugin.dynamicForm",function(b,e,g){var m=function(a){return b(a).data("dynamicForm")||{}},n=function(a,c){b(a).data("dynamicForm",c)},f=function(a){null!=a&&"function"===typeof a.toISOString&&(a.toString=a.toISOString);return a},d=function(a){return this.each(function(){n(this,b.extend(!0,{},{legacyStateRegistered:!1,fields:{}},m(this),a,{initialized:!0}))})},l={commitState:function(){var a=m(this);null!=a&&b.each(a.fields,function(a,d){d&&(d.v&&d.sid)&&b("#"+d.sid).val(f(d.v()))})},
registerState:function(a,c){var d=this,e=m(d);e.fields||(e.fields={});var g=e.fields[a];null==g&&(g=e.fields[a]={});g.sid=c;g.onchange||(g.onchange=[]);g.onchange.splice(0,0,function(a){b("#"+g.sid).val(a.val)});if(!e.legacyStateRegistered){var l=b(d).closest("form"),h=l[0].onsubmit;l[0].onsubmit=function(){var a=m(d);null!=a&&b.each(a.fields,function(a,c){c&&(c.v&&c.sid)&&b("#"+c.sid).val(f(c.v()))});return h?h():!0};e.legacyStateRegistered=!0}n(d,e)},register:function(a){var b=m(this);b.fields||
(b.fields={});var d=b.fields[a.id];null==d&&(d=b.fields[a.id]={});a.hasValue&&(d.hasValue=a.hasValue);a.val&&(d.v=a.val);n(this,b)},changed:function(a,c){var d=m(this),e=!1;d&&d.onchange&&(e||(c=f(c),e=!0),b.each(d.onchange,function(b,d){d({id:a,val:c})}));d&&(d.fields&&d.fields[a]&&d.fields[a].onchange)&&(e||(c=f(c),e=!0),b.each(d.fields[a].onchange,function(b,d){d({id:a,val:c})}))},onChange:function(a,c){var d=m(this);if("function"===typeof a)d.onchange||(d.onchange=[]),d.onchange.push(a);else{if(!Array.isArray(a)){var e=
[];null!=a&&e.push(a);a=e}d.fields||(d.fields={});b.each(a,function(a,b){var e=d.fields[b];e||(e=d.fields[b]={});e.onchange||(e.onchange=[]);e.onchange.push(c)})}n(this,d)},dataType:function(a){var b=m(this);return b&&b.fields&&b.fields[a]&&b.fields[a].t?b.fields[a].t:null},val:function(a,b){var d=m(this);return d&&d.fields&&d.fields[a]&&d.fields[a].v?f(d.fields[a].v(b)):null},hasValue:function(a){if(!Array.isArray(a)){var c=[];null!=a&&c.push(a);a=c}var d=0,e=m(this);if(!e.fields)return!1;b.each(a,
function(a,b){var c=e.fields[b];c&&(c.hasValue&&c.hasValue())&&d++});return d==a.length},hide:function(a,c){if(!Array.isArray(a)){var d=[];null!=a&&d.push(a);a=d}var e=m(this);if(!e.fields)return!1;b.each(a,function(a,d){var h=e.fields[d];h&&h.uid&&(h.hiddenBy||(h.hiddenBy=[]),0>h.hiddenBy.indexOf(c)&&h.hiddenBy.push(c),b("#"+h.uid).hide())});n(this,e)},show:function(a,c){if(!Array.isArray(a)){var d=[];null!=a&&d.push(a);a=d}var e=m(this);e.fields&&(b.each(a,function(a,d){var h=e.fields[d];if(h&&
h.uid){h.hiddenBy||(h.hiddenBy=[]);var k=h.hiddenBy.indexOf(c);0<=k&&h.hiddenBy.splice(k,1);0==h.hiddenBy.length&&b("#"+h.uid).show()}}),n(this,e))},getValues:function(){var a=m(this),c={};b.each(a.fields,function(a,b){b&&b.v&&(c[a]=f(b.v()))});return c},getValue:function(a){return l.val.apply(this,[a])},getType:function(a){return l.dataType.apply(this,[a])}};b.fn.dynamicForm=function(a){if(a in l)return l[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+
a+" does not exist on jQuery.fn.dynamicForm");else return d.apply(this,arguments)};return{}},jQuery,window);r("plugin.evolutionBookmark",function(b,e,g){var m=function(a){a.toggle=b("<a></a>").attr({href:"#"});a.element.append(a.toggle);a.toggle.evolutionToggleLink({onHtml:b.telligent.evolution.html.encode(n(a,a.settings.deleteBookmarkText)),offHtml:b.telligent.evolution.html.encode(n(a,a.settings.addBookmarkText)),processingHtml:b.telligent.evolution.html.encode(n(a,a.settings.processingText)),changeState:function(b){d(b,
a)},onTitle:n(a,a.settings.deleteBookmarkText),offTitle:n(a,a.settings.addBookmarkText),processingTitle:n(a,a.settings.processingText),onCssClass:a.settings.deleteBookmarkCssClass,offCssClass:a.settings.addBookmarkCssClass,processingCssClass:a.settings.processingCssClass,val:a.settings.initialState})},n=function(a,b){return b.replace(/\{content_type_name\}/gi,a.settings.contentTypeName)},f=function(a,c){b.telligent.evolution.messaging.publish("ui.bookmark",{contentId:a.settings.contentId,contentTypeId:a.settings.contentTypeId,
typeId:a.settings.typeId,bookmarked:c},{crossWindow:!0})},d=function(a,b){if(a)b.settings.onBookmark(b.settings.contentId,b.settings.contentTypeId,b.settings.typeId,function(){f(b,!0)});else b.settings.onUnbookmark(b.settings.contentId,b.settings.contentTypeId,b.settings.typeId,function(){f(b,!1)})},l=function(a){b.telligent.evolution.messaging.subscribe("ui.bookmark",function(b){b.contentId===a.settings.contentId&&b.contentTypeId===a.settings.contentTypeId&&b.typeId===a.settings.typeId&&a.toggle&&
a.toggle.evolutionToggleLink("val",b.bookmarked)})};b.fn.evolutionBookmark=function(a){var c=b.extend({},b.fn.evolutionBookmark.defaults,a||{});return this.each(function(){var a={element:b(this),toggle:null,settings:c};m(a);l(a)})};b.fn.evolutionBookmark.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,contentTypeName:"",onBookmark:function(a,b,d,e){},onUnbookmark:function(a,b,d,e){},deleteBookmarkText:"Unbookmark {content_type_name}",addBookmarkText:"Bookmark this {content_type_name}",
processingText:"...",addBookmarkCssClass:"internal-link favorite-off",deleteBookmarkCssClass:"internal-link favorite-on",processingCssClass:"internal-link processing"};return{}},jQuery,window);r("plugin.evolutionCodeEditor",["lib.util"],function(b,e,g,m){function n(a){if(!a)return a;var b=a.split("/");return 2>=b.length?b:"ace.js"!=b.pop()?a:b.join("/")}function f(a){if(!a)return a;a=a.replace(/\/snippets\//gi,"-snippets/");var b=a.split("/");if(2>=b.length)return a;e.each(y,function(a,c){b[b.length-
1]=b[b.length-1].replace(a,c)});return b.join("/")}function d(a){return e.ajax({url:a,dataType:"script",cache:!0}).then(function(){ace.config.set("basePath",n(a));var b=ace.config.moduleUrl;ace.config.moduleUrl=function(a,c){return f(b.apply(this,arguments))}})}function l(a){a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),
right:a.wrapper.css("right")};if(!a.expanded){a.wrapper.addClass("maximized");a.expanded=!0;e("body").css({overflow:"hidden"});a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),right:a.wrapper.css("right")};var b={width:"100%",height:"100%",position:"fixed",zIndex:2E4,left:0,top:0,bottom:0,right:0};a.wrapper.css(b);var c=
a.wrapper.get(0);c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);a.originalDimensions={maxLines:a.editor.renderer.$maxLines,minLines:a.editor.renderer.$minLines,desiredHeight:a.editor.renderer.$desiredHeight};delete a.editor.renderer.$maxLines;delete a.editor.renderer.$minLines;delete a.editor.renderer.desiredHeight;a.wrapper.find(".ace_editor, .ace_content").css({width:"100%",
height:"100%"});a.editor.resize();a.diffing&&(a.originalDiffContainerStyling={left:a.diffContainer.css("left"),top:a.diffContainer.css("top"),width:a.diffContainer.css("width"),height:a.diffContainer.css("height"),position:a.diffContainer.css("position")},a.diffContainer.css(b),a=a.differ.getEditors(),delete a.left.renderer.$maxLines,delete a.left.renderer.$minLines,delete a.left.renderer.desiredHeight,delete a.right.renderer.$maxLines,delete a.right.renderer.$minLines,delete a.right.renderer.desiredHeight,
a.left.resize(),a.right.resize())}}function l(a){if(!a.expanded){a.wrapper.addClass("maximized");a.expanded=!0;e("body").css({overflow:"hidden"});a.originalStyling={width:a.wrapper.css("width"),height:a.wrapper.css("height"),position:a.wrapper.css("position"),zIndex:a.wrapper.css("zIndex"),left:a.wrapper.css("left"),top:a.wrapper.css("top"),bottom:a.wrapper.css("bottom"),right:a.wrapper.css("right")};var b={width:"100%",height:"100%",position:"fixed",zIndex:2E4,left:0,top:0,bottom:0,right:0};a.wrapper.css(b);
if(a.supportsTrueFullScreen){var c=a.wrapper.get(0);c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}a.originalDimensions={maxLines:a.editor.renderer.$maxLines,minLines:a.editor.renderer.$minLines,desiredHeight:a.editor.renderer.$desiredHeight};delete a.editor.renderer.$maxLines;delete a.editor.renderer.$minLines;delete a.editor.renderer.desiredHeight;
a.wrapper.find(".ace_editor, .ace_content").css({width:"100%",height:"100%"});a.editor.resize();a.diffing&&(a.originalDiffContainerStyling={left:a.diffContainer.css("left"),top:a.diffContainer.css("top"),width:a.diffContainer.css("width"),height:a.diffContainer.css("height"),position:a.diffContainer.css("position")},a.diffContainer.css(b),a=a.differ.getEditors(),delete a.left.renderer.$maxLines,delete a.left.renderer.$minLines,delete a.left.renderer.desiredHeight,delete a.right.renderer.$maxLines,
delete a.right.renderer.$minLines,delete a.right.renderer.desiredHeight,a.left.resize(),a.right.resize())}}function a(a){if(a.expanded&&(a.originalStyling&&a.originalDimensions)&&(a.supportsTrueFullScreen&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),a.wrapper.removeClass("maximized"),a.expanded=!1,e("body").css({overflow:"auto"}),
a.wrapper.css(a.originalStyling),a.editor.renderer.$maxLines=a.originalDimensions.maxLines,a.editor.renderer.$minLines=a.originalDimensions.minlines,a.editor.renderer.desiredHeight=a.originalDimensions.desiredHeight,a.editor.resize(),a.diffing)){a.diffContainer.css(e.extend(a.originalDiffContainerStyling,{position:"absolute",top:0,left:0,zIndex:7}));var b=a.differ.getEditors();b.left.renderer.$maxLines=a.originalDimensions.maxLines;b.left.renderer.$minLines=a.originalDimensions.minlines;b.left.renderer.desiredHeight=
a.originalDimensions.desiredHeight;b.right.renderer.$maxLines=a.originalDimensions.maxLines;b.right.renderer.$minLines=a.originalDimensions.minlines;b.right.renderer.desiredHeight=a.originalDimensions.desiredHeight;b.left.resize();b.right.resize()}}function c(b){b.expanded=!1;b.fullScreenToggle.on("click",function(c){c.preventDefault();b.expanded?a(b):l(b);return!1})}function k(a,b){clearTimeout(a.setLineNumberTimeout);a.setLineNumberTimeout=setTimeout(function(){a.editor.resize(!0);a.editor.gotoLine(b,
0,!0);a.editor.scrollToLine(b,!0,!0,function(){});a.diffing&&!diffSourced&&(a.differ.getEditors().right.resize(!0),a.differ.getEditors().right.gotoLine(b,0,!0),a.differ.getEditors().right.scrollToLine(b,!0,!0,function(){}))},50)}function p(a){return a?a.replace(/\r\n/g,"\n").replace(/^((?:\s*\n)*)/,"").replace(/((?:\n\s*)*)$/,""):a}function u(a,b,c){c||(a.suppressChangeEvent=!0,g.clearTimeout(a.suppressChangeTimeout),a.suppressChangeTimeout=g.setTimeout(function(){a.suppressChangeEvent=!1},100));
a.editor.setValue(p(b),-1);a.isTextArea&&a.sourceElement.val(b);a.diffing&&!c&&a.differ.getEditors().right.setValue(p(b),-1)}function q(a){a.suppressChangeEvent||(a.sourceElement.trigger("evolutionCodeEditorChange"),a.isTextArea&&a.sourceElement.val(a.editor.getValue()).change())}function h(a){a.completerAdded&&(v=a,ace.config.loadModule("ace/ext/language_tools",function(b){v===a&&(b.setCompleters([b.snippetCompleter,b.textCompleter]),a.completerAdded=!1)}))}function w(a){a.autoComplete&&(v=a,ace.config.loadModule("ace/ext/language_tools",
function(b){if(v===a){var c={enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};if(a.differ){var d=a.differ.getEditors();d&&d.right&&d.right.setOptions(c)}a.editor&&a.editor.setOptions(c);a.autoComplete&&(b.setCompleters([b.snippetCompleter,b.textCompleter]),b.addCompleter({identifierRegexps:[/[a-zA-Z_0-9#\.\$\-\u00A2-\uFFFF]/],getCompletions:function(b,c,d,e,h){a.autoComplete({editor:b,session:c,pos:d,prefix:e}).then(function(a){h(null,a.results)})},getDocTooltip:function(a){a.doc&&
!a.docHTML&&(a.docHTML=a.doc)}}),a.completerAdded=!0)}}))}function s(a){if(A[a])return A[a];var b=a;a=(a||"").toLowerCase();a=a.replace(/[+-]/ig," ");a=a.replace(/ctrl/ig,"control");a=a.replace(/(opt|alt)/ig,"option");a=a.replace(/shft/ig,"shift");a=a.replace(/(cmd|meta)/ig,"command");a=e.trim(a.split(" ").sort().join(" "));return A[b]=a}var v=null,t=!1,x=!1,y={_:"_5F00_","-":"_2D00_"},z={light:"clouds",dark:"fusion"},A={},r={init:function(b){var f=e.extend({},e.fn.evolutionCodeEditor.defaults,b||
{});!1===t&&(t=d(f.editorUrl));f.baseUrl=n(f.editorUrl);return this.each(function(){var b=e(this).data("_code_editor_context"),d=!1;b||(d=!0,b={},e(this).data("_code_editor_context",b));e.extend(b,f);b.sourceElement=e(this).hide();b.supportsTrueFullScreen=(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)&&(this.requestFullscreen||this.msRequestFullscreen||this.mozRequestFullScreen||this.webkitRequestFullscreen);var l;if(l=!b.supportsTrueFullScreen)try{l=
g.self!==g.top}catch(n){l=!0}l&&(b.enableFullScreen=!1);e(document).on("mozfullscreenchange webkitfullscreenchange fullscreenchange MSFullscreenChange",function(){document.fullscreenElement||(document.webkitFullscreenElement||document.mozFullScreenElement)||a(b)});t.then(function(){var a=b.theme||"light";z[a]!==m&&(b.theme=z[a]);b.editorOptions={mode:0===(b.mode||"text").indexOf("ace/mode/")?b.mode||"text":"ace/mode/"+(b.mode||"text"),theme:0===(b.theme||"light").indexOf("ace/theme/")?b.theme||"light":
"ace/theme/"+(b.theme||"light"),showGutter:b.gutter===m?!0:b.gutter,showPrintMargin:!1,wrap:b.wordWrap};a=0<(b.sourceElement.attr("style")||"").length;b.isTextArea=b.sourceElement.is("textarea");b.readOnly===m&&(b.readOnly=!b.isTextArea);b.minLines===m||a||(b.editorOptions.minLines=b.minLines);b.maxLines&&!a?(b.editorOptions.maxLines=b.maxLines,b.editorOptions.autoScrollEditorIntoView=!0):(delete b.editorOptions.maxLines,delete b.editorOptions.autoScrollEditorIntoView);b.readOnly?e.extend(b.editorOptions,
{readOnly:!0,highlightGutterLine:!1,highlightActiveLine:!1}):e.extend(b.editorOptions,{readOnly:!1,highlightGutterLine:!0,highlightActiveLine:!0});d&&(a=e.grep((b.sourceElement.attr("class")||"").split(" "),function(a){return 0!==a.indexOf("ui-")}).join(" "),b.wrapper=e("<div></div>").hide().addClass("evolution-code-editor").addClass(a).attr("style",b.sourceElement.attr("style")).insertBefore(b.sourceElement),b.enableFullScreen&&(b.fullScreenToggle=e('<a href="#" class="fullscreen">Fullscreen</a>'),
b.fullScreenToggle.appendTo(b.wrapper),c(b)),b.innerElement=e("<div></div>").appendTo(b.wrapper).css({width:"100%",height:"100%"}).show(),b.isTextArea?b.innerElement.text(p(b.sourceElement.val())):b.innerElement.text(p(b.sourceElement.text())),b.editor=ace.edit(b.innerElement.get(0)),b.wrapper.show(),b.editor.on("change",function(a){q(b)}),b.editor.on("focus",function(a){w(b)}),b.editor.on("blur",function(a){h(b)}),e.each({right:"gotoright",left:"gotoleft",up:"golineup",down:"golinedown"},function(a,
c){var d=b.editor.commands.commands[c];b.editor.commands.removeCommand(d);var e=d.exec;b[a]&&(d.exec=function(){b[a].apply(this,b.sourceElement)&&e.apply(this,arguments)});b.editor.commands.addCommand(d)}),e.each(f.commandOverrides,function(a,c){b.editor.commands.on("exec",function(b){b.command&&(b.command.bindKey&&(s(b.command.bindKey.mac)==s(a)||s(b.command.bindKey.win)==s(a)))&&(c()||b.preventDefault())})}));a=e.grep(b.wrapper.attr("class").split(" "),function(a){return 0!==a.indexOf("theme-")}).join(" ");
b.wrapper.attr("class",a);b.wrapper.addClass("theme-"+b.theme);b.editor.setOptions(b.editorOptions);if(d&&!b.editorOptions.maxLines){var g=!b.wrapper.is(":visible"),l;g&&(l=b.wrapper.parentsUntil(":visible").last(),l.show());a=b.wrapper.height();g&&l.hide();32>a&&(b.editorOptions.minLines=b.minLines||1,b.editorOptions.maxLines=b.maxLines||20,b.editor.setOptions(b.editorOptions))}b.sourceComparison!==m&&null!==b.sourceComparison?(b.sourceComparison=p(b.sourceComparison),b.diffing=!0,!1===x&&(l=f.editorUrl.replace(/ace.js$/,
"acediff.js"),a=f.editorUrl.replace(/ace.js$/,"diffmatchpatch.js"),x=e.when.apply(e,[e.ajax({url:l,dataType:"script",cache:!0}),e.ajax({url:a,dataType:"script",cache:!0})])),x.then(function(){if(b.differ)h=b.differ.getEditors(),h.left.setValue(p(b.sourceComparison),-1),h.right.setOptions(b.editorOptions),h.left.setOptions(b.editorOptions),h.left.setReadOnly(!0),h.right.setReadOnly(b.readOnly);else{b.wrapper.css({position:"relative"});var a="left"+Math.floor(1E8*Math.random()),c="left"+Math.floor(1E8*
Math.random()),d="left"+Math.floor(1E8*Math.random());b.diffContainer=e('<div class="acediff-container"><div><div id="'+a+'" class="acediff-left-editor"></div></div><div id="'+c+'" class="acediff-gutter"></div><div><div id="'+d+'" class="acediff-right-editor"></div></div></div>');b.diffContainer.css({position:"absolute",top:0,left:0,width:b.wrapper.width(),height:b.wrapper.height(),zIndex:6});b.diffContainer.appendTo(b.wrapper);b.differ=new AceDiff({mode:b.editorOptions.mode,theme:b.editorOptions.theme||
"light",left:{id:a,content:p(b.sourceComparison),editable:!1,copyLinkEnabled:b.readOnly?!1:!0},right:{id:d,content:p(b.editor.getValue()),copyLinkEnabled:!1,editable:b.readOnly?!1:!0},classes:{gutterID:c}});var h=b.differ.getEditors();h.right.on("change",function(a){a=h.right.getValue();u(b,a,!0);q(b)})}})):b.diffing?(b.diffing=!1,l=b.differ.getEditors(),a=l.right.getValue(),l.left.destroy(),l.right.destroy(),b.differ.destroy(),b.diffContainer.remove(),b.suppressChangeEvent=!0,b.editor.setValue(p(a),
-1),b.suppressChangeEvent=!1,delete b.differ,delete b.diffContainer):b.diffing=!1;b.line&&k(b,b.line);b.sourceElement.trigger("evolutionCodeEditorReady")})})},focus:function(a){var b=e(this).data("_code_editor_context");return b?(a!==m&&(!0===a?b.editor.focus():b.editor.blur()),b.diffing?b.differ.getEditors().right.isFocused():b.editor.isFocused()):!1},val:function(a){var b=e(this).data("_code_editor_context");return b?a!==m?(u(b,a||""),a):b.editor.getValue():""},scrollTop:function(a){var b=e(this).data("_code_editor_context");
return b?a!==m?(b.editor.session.setScrollTop(a),b.diffing&&!diffSourced&&b.differ.getEditors().right.session.setScrollTop(a),a):b&&b.editor&&b.editor.session?b.editor.session.getScrollTop():0:0},wordWrap:function(a){var b=e(this).data("_code_editor_context");return b?a!==m?(b.editor.setOption("wrap",a),a):b.editor.getOption("wrap"):!1},line:function(a){var b=e(this).data("_code_editor_context");return b?a!==m?(k(b,a||""),a||1):(b.editor.getSelectionRange().start.row||0)+1:1},autoComplete:function(a){var b=
e(this).data("_code_editor_context");b&&(b.autoComplete=a,w(b))},fullscreen:function(b){var c=e(this).data("_code_editor_context");if(c)return b!==m?(b?l(c):a(c),b):c.expanded},selectedText:function(){var a=e(this).data("_code_editor_context");return a?a.editor.getSelectedText():""},__resize:function(){var a=e(this).data("_code_editor_context");a&&(a.diffing?(a.differ.getEditors().right.resize(),a.differ.getEditors().left.resize()):a.editor.resize())}};e.fn.evolutionCodeEditor=function(a){if(r[a])return r[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.evolutionCodeEditor");else return r.init.apply(this,arguments)};e.fn.evolutionCodeEditor.defaults={editorUrl:"",mode:m,theme:m,minLines:m,maxLines:m,readOnly:m,gutter:m,wordWrap:!1,enableFullScreen:!0,sourceComparison:m,autoComplete:m,commandOverrides:{}};return{}},jQuery,window);r("plugin.evolutionComposer",["events.textinput","module.html"],function(b,e,g,m,n){var f=function(a,b){a=
g(a);var c=a.data("__COMPOSER_CONTEXT");!c&&b&&(c=d(a,b),a.data("__COMPOSER_CONTEXT",c));return c},d=function(b,c){var d=g.extend({},g.fn.evolutionComposer.defaults,c||{}),d={input:b,settings:d,plugins:g.map(d.plugins,function(a){return"string"==typeof a?g.fn.evolutionComposer.plugins[a]:a}),ranges:[],activePlugin:!1};d.pluginContext=l(d);d.input.evolutionHighlight();a(d);return d},l=function(a){return{settings:a.settings,input:a.input,data:function(b,c){return"undefined"!==typeof c?a.input.data(b,
c):a.input.data(b)},val:function(b){return"undefined"!==typeof b?a.input.val(b):a.input.val()},release:function(){a.activePlugin.onDeactivate&&a.activePlugin.onDeactivate.call(a.input,a.pluginContext);a.activePlugin=!1},caretPosition:function(){return h(a.input)},currentWord:function(b){b=g.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},b||{});var c=b.caretPosition||h(a.input),d="",e=g(a.input).val(),k="",f=0,l=c,p=0;if(c<e.length&&"\n"!==e[c]&&"\t"!==e[c]){k=e.substring(c);
f=u(k);0>f&&(f=k.indexOf("\n"));0>f&&(f=k.indexOf("\t"));0>f&&(f=k.length);for(p=0;p<b.allowedWhiteSpaceAfterCaret;p++)if(0<f){var n=e.substring(c+f+1);nextWhiteSpaceIndex=u(n);nextWhiteSpaceIndex=-1===nextWhiteSpaceIndex?n.length:nextWhiteSpaceIndex;if(0<nextWhiteSpaceIndex)f+=nextWhiteSpaceIndex+1;else break}0<f&&(l=0,d+=k.substring(0,f))}if(0<c&&"\n"!==e[c-1]&&"\t"!==e[c-1]){k=e.substring(0,c);f=q(k);for(p=0;p<b.allowedWhiteSpaceBeforeCaret;p++)if(0<f)if(c=q(e.substring(0,f)),c!==f)f=c;else break;
f===k.length&&(f=k.lastIndexOf("\n"));f===k.length&&(f=k.lastIndexOf("\t"));f===k.length&&(f=k.length-1);f<k.length-1&&(l=f+1,d=k.substring(l)+d)}if(b.additionalWhiteSpaceSymbols)for(p=0;p<d.length;p++)if(-1==g.inArray(d[p],b.additionalWhiteSpaceSymbols)){d=d.substring(p);l+=p;break}return{value:d,start:l,stop:l+d.length}},replace:function(b,c,d){var e=a.input.val();a.input.val(e.substring(0,b)+d+e.substring(c))},clearHighlights:function(b){var c=[];g.each(a.ranges,function(a,d){b&&d.className===
b||c.push(d)});a.ranges=c;a.input.evolutionHighlight({ranges:a.ranges})},addHighlight:function(b){a.ranges.push(b)},renderHighlights:function(){a.input.evolutionHighlight({ranges:a.ranges})}}},a=function(a){a.input.on({keypress:function(b){c(a,"onkeypress",b)},keydown:function(b){c(a,"onkeydown",b)},textinput:function(b){k(a,b);c(a,"oninput",b);p(a,!1)}})},c=function(a,b,c){var d=!0;a.activePlugin&&a.activePlugin[b]&&(d=a.activePlugin[b].call(c.target,a.pluginContext,c));d?a[b]&&((d=a[b].call(c.target,
c))||c.preventDefault()):c.preventDefault()},k=function(a,b){a.activePlugin||g.each(a.plugins,function(b,c){if(c.shouldActivate&&!0===c.shouldActivate.call(a.input,a.pluginContext))return a.activePlugin=c,c.onActivate&&c.onActivate.call(a.input,a.pluginContext),!1})},p=function(a,b){g.each(a.plugins,function(c,d){d.onTransform&&d.onTransform.call(a.input,a.pluginContext,b)})},u=function(a){var b=[];g.each([" ","\t","\n"],function(c,d){var e=a.indexOf(d);0<=e&&b.push(e)});b.sort();return 0<b.length?
b[0]:-1},q=function(a){var b=[];g.each([" ","\t","\n"],function(c,d){var e=a.lastIndexOf(d);0<=e&&b.push(e)});b.sort();return 0<b.length?b[b.length-1]:-1},h=function(a){a=a.get(0);if(a.selectionStart)return a.selectionStart;if(document.selection){var b=document.selection.createRange();if(null===b)return 0;a=a.createTextRange();var c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0},w=function(a){if("undefined"!==typeof g.fn.evolutionResize)a.input.evolutionResize().on("evolutionResize",
function(){a.input.evolutionHighlight("resize",a.input.width(),a.input.height())})},s={init:function(a){return this.filter("textarea").each(function(){var b=g(this),c=f(b,a);w(c);c.input.evolutionHighlight("resize",c.input.width(),c.input.height());if(null!==c){g.each(c.plugins,function(a,d){d.init&&d.init.call(b,c.pluginContext)});c.settings.focus&&setTimeout(function(){b.trigger("focus")},10);var d=g.trim(c.input.val());0<d.length&&s.val.call(c.input,d)}})},val:function(a){if("undefined"!==typeof a){var b=
f(this);b&&(b.input.val(e.decode(a)),p(b,!0),b.input.trigger("input"))}else{var b=f(this),c="";b&&(c=b.input.val(),g.each(b.plugins,function(a,d){d.val&&(c=d.val.call(b.input,c,b.pluginContext))}));return c}return this},onkeydown:function(a){var b=f(this);b&&(b.onkeydown=a);return this},oninput:function(a){var b=f(this);b&&(b.oninput=a);return this},resize:function(a,b){var c=f(this);c&&c.input.evolutionHighlight("resize",a,b);return this},release:function(){var a=f(this);a&&a.activePlugin&&(a.activePlugin.onDeactivate&&
a.activePlugin.onDeactivate.call(a.input,a.pluginContext),a.activePlugin=!1);return this}};g.fn.evolutionComposer=function(a){if(s[a])return s[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)g.error("Method "+a+" does not exist on jQuery.evolutionComposer");else return s.init.apply(this,arguments)};g.fn.evolutionComposer.defaults={plugins:[],focus:!1};g.fn.evolutionComposer.plugins={};return{}},jQuery,window);r("plugin.evolutionFeature",function(b,e,g){var m=function(b,
d){return d.replace(/\{content_type_name\}/gi,b.settings.contentTypeName)},n=function(e){b.telligent.evolution.messaging.subscribe("ui-feature",function(d){d.value?e.toggle.empty().append(b.telligent.evolution.html.encode(m(e,e.settings.editFeatureText))):e.toggle.empty().append(b.telligent.evolution.html.encode(m(e,e.settings.addFeatureText)));e.toggle.trigger("content-resized")})};b.fn.evolutionFeature=function(e){var d=b.extend({},b.fn.evolutionFeature.defaults,e||{});return this.each(function(){var e=
{element:b(this),toggle:null,settings:d};e.toggle=b("<a></a>").attr({href:e.settings.panelUrl});e.element.append(e.toggle);e.settings.initialState?e.toggle.append(b.telligent.evolution.html.encode(m(e,e.settings.editFeatureText))):e.toggle.append(b.telligent.evolution.html.encode(m(e,e.settings.addFeatureText)));e.toggle.trigger("content-resized");n(e)})};b.fn.evolutionFeature.defaults={contentId:"",contentTypeId:"",typeId:"",panelUrl:"",initialState:!1,contentTypeName:"",editFeatureText:"Edit featured",
addFeatureText:"Feature"};return{}},jQuery,window);r("plugin.evolutionHighlight",function(b,e,g){var m=function(a,d){var e=a.data("_HIGHLIGHTER_CONTEXT");if("undefined"===typeof e||null===e)e={selection:a.filter("textarea"),settings:b.extend({},b.fn.evolutionHighlight.defaults,d||{})},n(e),a.data("_HIGHLIGHTER_CONTEXT",e);return e},n=function(a){a.wrapper=b("<div></div>");a.mirror=b("<div></div>");var d={position:"relative",width:a.selection.outerWidth(),height:a.selection.outerHeight()};b.each(["margin-left",
"margin-right","margin-top","margin-bottom"],function(b,e){d[e]=a.selection.css(e);a.selection.css(e,0)});var e={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:a.selection.css("backgroundColor"),color:"transparent",width:a.selection.width(),height:a.selection.height(),overflow:"hidden",whiteSpace:"normal"};b.each(a.settings.styles,function(b,d){e[d]=a.selection.css(d)});
var f={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",width:a.selection.width(),height:a.selection.height()};a.wrapper.css(d).addClass("highlighter");a.mirror.css(e);a.selection.css(f);a.mirror.css("color",a.mirror.css("background-color"));a.selection.before(a.wrapper);a.wrapper.append(a.selection);a.wrapper.append(a.mirror)},f=/\s\s/gi,d=/\n/gi,l=function(a){var e={};b.each(a.settings.ranges,function(a,c){e[c.start]=e[c.start]||[];e[c.start].push(b.extend({},c,
{index:a}));e[c.stop]=e[c.stop]||[];e[c.stop].push(c)});var l=b.telligent.evolution.html.encode(a.selection.val());newValue=[];for(var n=spanDepth=0;n<l.length;n++)"undefined"!==typeof e[n]&&b.each(e[n],function(a,b){b.start===n?(newValue[newValue.length]='<span class="'+b.className+'" style="white-space:normal;" data-index="'+b.index+'">',spanDepth++):(newValue[newValue.length]="</span>",spanDepth--)}),newValue[newValue.length]=l.charAt(n);0<spanDepth&&(newValue[newValue.length]="</span>");var l=
newValue.join("").replace(d,"<br />").replace(f,"&nbsp; "),q=document.createElement("span");q.innerHTML=l;a.mirror.empty().get(0).appendChild(q);a.selection.off("click").on("click",function(d){b("span",a.mirror).each(function(){var e=b(this),f=e.data("index");if(f!==g){var k=e.offset();k.top<=d.pageY&&(k.top+e.height()>=d.pageY&&k.left<=d.pageX&&k.left+e.width()>=d.pageX)&&a.selection.trigger("evolutionRangeClick",a.settings.ranges[f])}})})},a={init:function(a){var d=m(this,a);d.settings=b.extend({},
b.fn.evolutionHighlight.defaults,a||{});l(d);return this},clear:function(){var a=m(this,null);if(null!==a)return a.mirror.html(""),this},resize:function(a,b){var d=m(this,null);if(null!==d){var e={width:a,height:b};d.mirror.css(e);d.selection.css(e);d.wrapper.css({width:d.selection.outerWidth(),height:d.selection.outerHeight()});return this}},css:function(a){var b=m(this,null);if(null!==b)return b.wrapper.css(a),this}};b.fn.evolutionHighlight=function(c){if(a[c])return a[c].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof c&&c)b.error("Method "+c+" does not exist on jQuery.evolutionHighlight");else return a.init.apply(this,arguments)};b.fn.evolutionHighlight.defaults={ranges:[],styles:"border-top-width border-top-style border-bottom-width border-bottom-style border-right-width border-right-width-value border-right-style border-right-style-value border-left-width border-left-width-value border-left-style border-left-style-value font-family font-size font-size-adjust font-stretch font-style font-variant font-weight padding-bottom padding-left padding-right padding-top letter-spacing line-height text-align text-indent word-spacing".split(" ")};
return{}},jQuery,window);r("plugin.evolutionHtmlEditor",["lib.util","lib.storageProxy","lib.lruCache","module.notifications"],function(b,e,g,m,n,f,d){function l(a){var b=[];b.push(a.contentTypeId||"");b.push(a.submittable?"1":"0");b.push(a._tokens&&0<a._tokens.length?"1":"0");b.push(a._enableLegacyTokens?"1":"0");b.push(a.autoResize?"1":"0");b.push(!0===a.enableFileUpload?"1":!1===a.enableFileUpload?"0":"");return b.join("|")}function a(a){if(!a.contentTypeId)return null;null==y&&((a=n.telligent.evolution.url.parseQuery(f.location.href+
""))&&a._pcurl?y=a._pcurl:(y=f.location.href+"",a=y.indexOf("#"),0<=a&&(y=y.substr(0,a)),a=y.indexOf("?"),0<=a&&(y=y.substr(0,a)),a=n.telligent.evolution.site.getBaseUrl(!0),0==y.indexOf(a)&&(y="~/"+y.substr(a.length))));return y}function c(b){return n.Deferred(function(c){var e=l(b),h=x[e];if(h!==d)c.resolve(h);else{var f={ContentTypeId:b.contentTypeId||"",Submittable:b.submittable?"1":"0",HasTokens:b._tokens&&0<b._tokens.length?"1":"0",EnableLegacyTokens:b._enableLegacyTokens?"1":"0",AutoResize:b.autoResize?
"1":"0",EnableFileUpload:!0===b.enableFileUpload?"1":!1===b.enableFileUpload?"0":"",_u:n.telligent.evolution.user.accessing.id},k=a(b);null!=k&&(f._pcurl=k);n.telligent.evolution.get({url:r.scriptBaseUrl+"config.js?_="+r.editorConfigVersionKey,data:f,cache:!0}).then(function(a){a=a.editorConfiguration||{};if(a.protect)for(var b=0;b<a.protect.length;b++)a.protect[b]=RegExp(a.protect[b],"g");h={editorConfiguration:a};x[e]=h;c.resolve(h)})["catch"](function(){c.reject()})}}).promise()}function k(a){var b=
new e({id:n.telligent.evolution.user.accessing.id,isSystemAccount:n.telligent.evolution.user.accessing.isSystemAccount});z=new g({size:5,load:function(){return b.get(t)},persist:function(a){b.set(t,a)}});return n.Deferred(function(a){n.ajax({url:r.scriptBaseUrl+"tinymce.min.js?_="+r.versionKey,dataType:"script",cache:!0}).then(function(){n.ajax({url:r.scriptBaseUrl+"telligent/telligent.tinymce.min.js?_="+r.versionKey,dataType:"script",cache:!0}).then(function(){n.ajax({url:r.scriptBaseUrl+"langs/"+
r.language+".js?_="+r.versionKey,dataType:"script",cache:!0}).then(function(){try{tinymce.EditorManager.baseURL=r.scriptBaseUrl}catch(b){}a.resolve()})["catch"](function(){a.reject()})})["catch"](function(){a.reject()})})["catch"](function(){a.reject()})})}function p(a,b){b&&(f.clearTimeout(a.updateBookmarkHandle),a.updateBookmarkHandle=f.setTimeout(function(){b.selection&&(b._currentBookmark=b.selection.getBookmark(2))},100))}function u(a,b){try{n(document).on("beforecustomizepage",function(){b&&
b.remove()})}catch(c){}var d=n(a.elm);b.on("change SetContent NodeChange keyup",function(){p(a,b);f.clearTimeout(a.changedHandle);a.changedHandle=f.setTimeout(function(){try{var c=b.getContent();c!=a.lastSourceValue&&(a.lastSourceValue=c,d.val(c).trigger("change"),q(a,b,c))}catch(e){}},1E3)});a.onErrorHandler=function(){q(a,b)};m.on("error",a.onErrorHandler);a.lastSourceValue=d.val();a.sourceChangeHandle=f.setInterval(function(){var c=d.val();c!=a.lastSourceValue&&(a.lastSourceValue=c,b.setContent(a.lastSourceValue))},
1E3);b.on("Remove",function(){f.clearInterval(a.sourceChangeHandle);m.off("error",a.onErrorHandler)});b.on("blur",function(){b.save()});b.on("Init",function(c){if(!v){c=n("head link").filter(function(a,b){var c=n(b).prop("href");return c&&0<=c.indexOf("/tinymce/")});var d=n('head style[id="ace_editor.css"]');0<d.length&&c.insertBefore(d);c.filter(":last").after('<link rel="stylesheet" type="text/css" href="'+r.scriptBaseUrl+"telligent/telligent.tinymce.ui.css?_="+r.versionKey+'" />');v=!0}h(a,b);
a.initialized=!0;n(a.elm).trigger({type:"evolutionHtmlEditorReady"})});b.on("keydown",function(b){return a.elm.dispatchEvent(new KeyboardEvent(b.type,{altKey:b.altKey,"char":b["char"],charCode:b.charCode,code:b.code,ctrlKey:b.ctrlKey,isComposing:b.isComposing,key:b.key,keyCode:b.keyCode,keyIdentifier:b.keyIdentifier,keyLocation:b.keyLocation,locale:b.locale,location:b.location,metaKey:b.metaKey,repeat:b.repeat,shiftKey:b.shiftKey,which:b.which}))},!0);b.on("LoadContent",function(){b._oldContentValue=
b.getContent();"<p>&nbsp;</p>"==b._oldContentValue&&(b._oldContentValue="");try{b.getWin().document.addEventListener("keydown",function(){b.getWin().focus()})}catch(a){}})}function q(a,b,c,e){var h,f;a=a.contextid;if(A){try{for(f=localStorage.length-1;0<f;f--)h=localStorage.key(f),0==h.indexOf("TinyAutoSave")&&localStorage.removeItem(h)}catch(k){}A=!1}try{if(a){if(null===c||c===d)c=b.getContent()||"";if(e||0<c.replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length)0<c.length&&131072>c.length?z.set(a,
c):z.del(a)}}catch(g){}}function h(a,b){try{var c=a.contextid;if(c){var d=z.get(c);d&&0==b.getContent().replace(/\s|&nbsp;|<\/?p[^>]*>|<br[^>]*>/gi,"").length&&b.setContent(d)}}catch(e){}}function w(a){return a?(a.getContent()||"").replace(/(?:^\W*<p[^>]*>(?:&nbsp;)?<\/p>|<p[^>]*>(?:&nbsp;)?<\/p>\W*$)/gi,""):""}var s=!1,v=!1,t="evolutionHtmlEditor-UnsavedContent",x={},y=null,z=null,A=!0,r={scriptBaseUrl:"/tinymce/",versionKey:"",contextQueryString:"",mediaMaxWidth:320,mediaMaxHeight:240,defaultMediaWidth:0,
defaultMediaHeight:0,directionality:"ltr",language:"en",contentCssUrl:"/tinymce/telligent/telligent.tinymce.content.css",directUploadContext:"",directUploadUrl:"",autoLinkPattern:null,editorConfigVersionKey:""},B={init:function(a){var b=n.extend({},n.fn.evolutionHtmlEditor.defaults,a||{});!1===s&&(s=k(this.get(0)));var e=f.location+"";try{f.parent&&(f.parent.$&&f.parent.$.fn.glowModal)&&(e=f.parent.location+"")}catch(h){}return this.each(function(){var a=n.extend({},b);a.elm=this;a.initialized=!1;
a.elm.id!==d&&0!=a.elm.id.length&&(a.id=a.elm.id,a.contextid=f.location+"#"+a.id,n(a.elm).data("_html_editor_context",a),s.then(function(){c(a).then(function(b){var c=tinymce.EditorManager.get(a.id);if(c)try{tinymce.EditorManager.remove(c)}catch(d){}c={selector:"#"+a.id,relative_urls:!1,setup:function(b){u(a,b)},evolution_contenttypeid:a.contentTypeId,theme:"modern",skin:"telligent",resize:"true",object_resizing:"table,img,.mceInsertMediaItem",language:r.language,document_base_url:e,images_dataimg_filter:function(){return!1},
anchor_bottom:!1,anchor_top:!1,content_css:r.contentCssUrl,directionality:r.directionality,toc_class:"table-of-contents",evolution_mediaMaxWidth:r.mediaMaxWidth,evolution_mediaMaxHeight:r.mediaMaxHeight,evolution_defaultMediaWidth:r.defaultMediaWidth,evolution_defaultMediaHeight:r.defaultMediaHeight,evolution_customtokens:a._tokens||[0],evolution_contextQueryString:r.contextQueryString,evolution_directUploadContext:r.directUploadContext,evolution_directUploadUrl:r.directUploadUrl,enhancements_placeholder:a.placeholder,
submittable_prehtml:a.beforeSubmitHtml,submittable_posthtml:a.afterSubmitHtml,submit_enabletoggle:a.enableEnterToSubmitToggle,submit_entermessage:a.enterToSubmitPrompt,submit_buttontext:a.submitLabel,submit_onsubmit:function(b){b=w(b);if(a.onSubmit)a.onSubmit(b);n(a.elm).trigger({type:"evolutionHtmlEditorSubmit",html:b})},submit_entertosubmit:a.submittable,autoLinkPattern:r.autoLinkPattern};b.editorConfiguration&&n.extend(c,b.editorConfiguration);b=-1<a.height.indexOf("px")?parseInt(a.height,10):
NaN;a.autoResize?(c.autoresize_bottom_margin=1,c.autoresize_overflow_padding=0,isNaN(b)||(c.autoresize_min_height=b,c.height=b+25,c.min_height=b)):isNaN(b)||(c.height=b,c.min_height=b);tinymce.EditorManager.init(c)})}))})},focus:function(){var a=n(this).data("_html_editor_context");if(a)try{tinyMCE.get(a.id).plugins.enhancements.focusAndView()}catch(b){}return this},val:function(a){if(a===d){var b=n(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id),e=w(c);q(b,c,"",!0);return e}catch(h){}return""}return this.each(function(){var b=
n(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);c.execCommand("mceSetContent",!1,a);q(b,c,null,!0);c.selection.collapse()}catch(d){}})},saveCursorPosition:function(){return this.each(function(){var a=n(this).data("_html_editor_context");if(a)try{p(a,tinyMCE.get(a.id))}catch(b){}})},insert:function(a){return this.each(function(){var b=n(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);if(c){if(c&&c._currentBookmark)try{c.selection.moveToBookmark(c._currentBookmark)}catch(d){}c.execCommand("mceInsertContent",
!1,a);q(b,c,null,!0)}}catch(e){}})},moveTo:function(a){return this.each(function(){var b=n(this).data("_html_editor_context");if(b)try{var c=tinyMCE.get(b.id);c&&c.plugins.enhancements.moveTo(a)}catch(d){}})},ready:function(a){var b=n(this),c=b.data("_html_editor_context");return 0<b.length?(a&&(b.on("evolutionHtmlEditorReady",a),c&&c.initialized&&a()),c&&c.initialized):!1},context:function(a){if(a===d){var b=n(this).data("_html_editor_context");if(b)try{return b.contextid}catch(c){}return""}return this.each(function(){var b=
n(this).data("_html_editor_context");if(b)try{var c=a;c&&0!=c.length||(c=f.location+"#"+b.id);if(b.contextid!=c){var d=null;try{d=tinyMCE.get(b.id)}catch(e){d=null}if(d){b.contextid=null;try{d.execCommand("mceSetContent",!1,"")}catch(k){}b.contextid=c;h(b,d)}else b.contextid=c}}catch(g){}})},remove:function(){return this.each(function(){var a=n(this).data("_html_editor_context");if(a){try{var b=tinyMCE.get(a.id);b&&(b.selection.collapse(),b.fire("blur",{focusedEditor:null}))}catch(c){}f.clearTimeout(a.changedHandle);
f.clearTimeout(a.updateBookmarkHandle);f.clearTimeout(a.sourceChangeHandle);try{tinyMCE.remove(a.id),n(this).data("_html_editor_context",null)}catch(d){}}})}};n.fn.evolutionHtmlEditor=function(a){if(B[a])return B[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)n.error("Method "+a+" does not exist on jQuery.evolutionHtmlEditor");else return B.init.apply(this,arguments)};n.fn.evolutionHtmlEditor.defaults={width:"100%",height:"300px",contentTypeId:null,enterToSubmitPrompt:null,
submitLabel:null,beforeSubmitHtml:null,afterSubmitHtml:null,autoResize:!1,enableEnterToSubmitToggle:!1,placeholder:null,submittable:!1,enableFileUpload:null,_tokens:{},_enableLegacyTokens:!1};return{configure:function(a){n.extend(r,a)}}},jQuery,window);r("plugin.evolutionInlineTagEditor",function(b,e,g){var m={},n=function(d,a){if(d.internal.isInitialized){for(var c=a.split(/[,;]/g),e=[],f=0;f<c.length;f++){var g=b.trim(c[f]);g&&(e[e.length]=g)}d.settings.onSave(e,function(){d.settings.currentTags=
e})}},f=function(e){return this.each(function(){var a={settings:b.extend({},b.fn.evolutionInlineTagEditor.defaults,e||{}),internal:{state:b(this)}};b(this).data("evolutionTagInlineEditor_context",a);b(this).html()||b(this).text(a.settings.editButtonText);d(a)})},d=function(d){var a=b("<div></div>").addClass(d.settings.editorCssClass).attr("style","display: none;"),c=b('<label for="tag-area"></label>').hide(),e=b('<textarea id="tag-area"></textarea>').attr("cols","40").attr("rows","2");if(d.settings.allTags&&
0<d.settings.allTags.length)var f=b('<input type="button" />').val(d.settings.selectTagsText);var g=b('<input type="button" />').val(d.settings.saveTagsText),q=b('<input type="button" />').val(d.settings.cancelText),h=b('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');h.find("td").eq(1).append(g);h.find("td").eq(1).append(q);f&&h.find("td").first().append(f);
a.append(c);a.append(e);a.append(h);e.evolutionTagTextBox({allTags:d.settings.allTags});a.glowPopUpPanel({cssClass:d.settings.editorCssClass,position:"updown",zIndex:500,hideOnDocumentClick:!1});b(d.internal.state).on("click.evolutionInlineTagEditor",function(c){a.glowPopUpPanel("hide").glowPopUpPanel("show",b(this));e.val(0<d.settings.currentTags.length?d.settings.currentTags.join(", "):"");return!1});g.on("click.evolutionInlineTagEditor",function(b){n(d,e.attr("value"));a.glowPopUpPanel("hide");
return!1});q.on("click.evolutionInlineTagEditor",function(b){a.glowPopUpPanel("hide");return!1});if(f)f.on("click.evolutionInlineTagEditor",function(a){e.evolutionTagTextBox("openTagSelector");return!1});d.internal.state.after(a);d.internal.isInitialized=!0};b.fn.evolutionInlineTagEditor=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionInlineTagEditor");else return f.apply(this,
arguments)};b.extend(b.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(b,a){}}});return{}},jQuery,window);r("plugin.evolutionLike",function(b,e,g){var m=!1,n=!1,f=function(b){var c=b.settings.format;b.hasCount&&(c=c.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>'));b.hasToggle&&(c=c.replace(/\{toggle\}/gi,'<span class="like-toggle"><a href="#" class="internal-link"></a></span>'));
b.hasMessage&&(c=c.replace(/\{message\}/gi,'<span class="like-message"></span>'));b.element.html(c);b.hasCount&&(b.countWrapper=b.element.find("span.like-count"),b.countWrapper.html(b.settings.initialCount),b.countWrapper.attr("data-count",b.settings.initialCount));b.hasToggle&&(b.toggleLink=b.element.find("span.like-toggle a"),b.toggleLink.evolutionToggleLink({onHtml:b.settings.unlikeText,offHtml:b.settings.likeText,onTitle:"",offTitle:"",processingHtml:"...",changeState:function(c){a(c,b)},onCssClass:"internal-link like-on",
offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:"true"===b.settings.initialState}));b.hasMessage&&(b.messageWrapper=b.element.find("span.like-message"),b.messageWrapper.html(b.settings.initialMessage))},d=function(a,b){var c="";if(0<b.count){var d=0;b.accessingLikes?1===b.count?c=a.settings.whoLikesAccessingText:2===b.count?(c=a.settings.whoLikesAccessingTwoText,d=-1):2<b.count&&(c=a.settings.whoLikesAccessingMultipleText,d=-1):1===b.count?c=a.settings.whoLikesOtherText:
2===b.count?(d=-1,c=a.settings.whoLikesOtherTwoText):2<b.count&&(d=-1,c=a.settings.whoLikesOtherMultipleText);c=c.replace(/\{count\}/gi,b.count+d);c=c.replace(/\{user_profile_url\}/gi,b.latestUserProfileUrl);c=c.replace(/\{user_display_name\}/gi,b.latestUserDisplayName)}return c},l=function(a,c,e){var f=d(a,{count:c.count,accessingLikes:e,latestUserProfileUrl:null!=c.latestLike&&null!=c.latestLike.User?c.latestLike.User.ProfileUrl:null,latestUserDisplayName:null!=c.latestLike&&null!=c.latestLike.User?
c.latestLike.User.DisplayName:null});b.telligent.evolution.messaging.publish("ui.like",{contentId:a.settings.contentId,contentTypeId:a.settings.contentTypeId,typeId:a.settings.typeId,count:c.count,liked:e,message:f},{crossWindow:!0})},a=function(a,b){if(a)b.settings.onLike(b.settings.contentId,b.settings.contentTypeId,b.settings.typeId,function(a){l(b,a,!0)});else b.settings.onUnlike(b.settings.contentId,b.settings.contentTypeId,b.settings.typeId,function(a){l(b,a,!1)})},c=function(a,c){return b.telligent.evolution.get({url:b.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/like.json",data:{ContentId:c.contentId,TypeId:c.typeId},cache:!1}).then(function(a){return null!=a.Like})},k=function(a){n||(n=!0,b.telligent.evolution.messaging.subscribe("like.created",function(b){p(a,b,!0)}),b.telligent.evolution.messaging.subscribe("like.deleted",function(b){p(a,b,!1)}))},p=function(a,e,f){c(a,e).then(function(c){c=d(a,{count:e.total,accessingLikes:c,latestUserProfileUrl:e.latestUser.profileUrl,latestUserDisplayName:e.latestUser.displayName});b.telligent.evolution.messaging.publish("ui.like",
{contentId:e.contentId,contentTypeId:e.contentTypeId,typeId:e.typeId,count:e.total,liked:f,message:c})})},u=function(a){b.telligent.evolution.messaging.subscribe("ui.like",function(b){b.contentId===a.settings.contentId&&(b.contentTypeId===a.settings.contentTypeId&&b.typeId===a.settings.typeId)&&(a.hasToggle&&a.toggleLink.evolutionToggleLink("val",b.liked),a.hasCount&&(a.countWrapper.html(b.count),a.countWrapper.attr("data-count",b.count)),a.hasMessage&&a.messageWrapper.html(b.message))})};b.fn.evolutionLike=
function(a){var c=b.extend({},b.fn.evolutionLike.defaults,a||{});return this.each(function(){var a={element:b(this),settings:c,hasCount:0<=c.format.indexOf("{count}"),hasToggle:0<=c.format.indexOf("{toggle}"),hasMessage:0<=c.format.indexOf("{message}")};f(a);u(a);k(a)})};b.fn.evolutionLike.delegatePopups=function(a){if(!m){m=!0;var c=b.extend({},b.fn.evolutionLike.defaults,a||{}),d=b.telligent.evolution.template.compile(c.likersTemplate),e=b.telligent.evolution.template.compile(c.likersPopupTemplate),
f=function(a,b,d){c.onList(a.contentId,a.contentTypeId,a.typeId,function(a){d(a)},a.pageSize,b)},k=function(a,k){var g=0,l=b(d(a)),p=b(e({likers:l,hasMorePages:a.hasMorePages,showMoreText:c.modalShowMoreText})),n=p.find("ul"),m=p.find(".show-more"),q=c.onOptions(b(k).closest(c.delegatedSelector));n.html(l);m.on("click",function(a){a.preventDefault();g++;f(q,g,function(a){n.append(d(a));a.hasMorePages?m.show():m.hide();n.scrollTop(n[0].scrollHeight)})});b.glowModal({title:c.modalTitleText,html:p,width:450,
height:"100%"})};(function(){b(c.containerSelector).on("click",c.delegatedSelector+" .who-likes",function(a){var d=b(this);a=c.onOptions(b(d).closest(c.delegatedSelector));f(a,0,function(a){k(a,d)})})})()}};b.fn.evolutionLike.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:!1,initialMessage:"",initialCount:0,format:"",onLike:function(a,b,c,d){},onUnlike:function(a,b,c,d){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',
whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',
modalTitleText:"People who like this",modalShowMoreText:"Show more",onList:function(a,b,c,d){},onOptions:function(a){},containerSelector:"",delegatedSelector:"",delay:500,likersTemplate:' <% foreach(likers, function(liker) { %>      <li class="content-item">          <div class="full-post-header"></div>          <div class="full-post">              <span class="avatar">                  <a href="<%: liker.profileUrl %>"  class="internal-link view-user-profile">                      <% if(liker.avatarHtml) { %>                          <%= liker.avatarHtml %>                      <% } else { %>                          <img src="<%: liker.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" />                      <% } %>                  </a>              </span>              <span class="user-name">                  <a href="<%: liker.profileUrl %>" class="internal-link view-user-profile"><%= liker.displayName %></a>              </span>          </div>          <div class="full-post-footer"></div>      </li>  <% }); %> ',
likersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= likers %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> '};return{}},jQuery,window);r("plugin.evolutionMasonry",["lib.util"],function(b,e,g,m){function n(a){return e(document.createElement("div")).html("&nbsp;").addClass(a.columnClass).css({"float":"left",
minHeight:"1px",overflow:"hidden"})}function f(a){for(var b=0;b<a.columns.length;b++)e(a.columns[b]).empty()}function d(a){for(var b=null,c=null,d=0;d<a.columns.length;d++)if(null===b||null===c)b=a.columns[d],c=a.columns[d].height();else{var e=a.columns[d].height();e<c&&(b=a.columns[d],c=e)}return b}function l(a,b){var c=d(a);b.rendered?b.rendered.appendTo(c):(b.rendered=e(b.original).appendTo(c),k(e(b.rendered).get(0),function(){b.reflowFromHere=!0;a.reflow()}))}function a(a,b){a.rendering=!0;var c;
b?c=b:(c=a.children,f(a));e.each(c,function(b,c){var d=e(c.original).find("img").first();if(0<d.length&&!d.get(0).complete)d.on("load",function(){l(a,c)});else l(a,c)});a.rendering=!1}function c(b,c){c=c||{};b.scrollTop=e(g).scrollTop();if(c.reflow){for(var d=!1,f=[],k=0;k<b.children.length;k++)b.children[k].reflowFromHere&&(delete b.children[k].reflowFromHere,d=!0),d&&(b.children[k].rendered&&b.children[k].rendered.detach(),f.push(b.children[k]));a(b,f)}else{if(c.resize)for(k=0;k<b.children.length;k++)b.children[k].rendered&&
b.children[k].rendered.detach();b.container.empty();b.columns=[];var f=d=0,k=n(b),l=!1;k.height(1200).appendTo(b.container);f=b.container.width();k.height(0).remove();for(var p=50;d<f&&0<p;){p--;var m=n(b);l?k.before(m):m.appendTo(b.container);d+=m.outerWidth(!0);d<=f?b.columns.push(m):m.remove();l||(k.appendTo(b.container),l=!0)}l&&k.remove();a(b,null)}e(g).scrollTop(b.scrollTop)}function k(a,b){if(MutationObserver){var c=e(a);c.data("observed")||(c.data("observed",!0),(new MutationObserver(function(){var a=
c.data("masonryLastHeight"),d=c.height();a&&a==d||(c.data("masonryLastHeight",d),b())})).observe(a,{childList:!0,subtree:!0,attributes:!0}))}}function p(a){return this.each(function(){var b=e.extend({},e.fn.evolutionMasonry.defaults,a||{});b.container=e(this);b.children=b.container.children().detach().toArray().map(function(a){return{original:a}});var d;b.reflow=function(){g.clearTimeout(d);d=g.setTimeout(function(){c(b,{reflow:!0})},50)};c(b);var f;e(window).on("resized",function(a,d){clearTimeout(f);
f=setTimeout(function(){b.rendering||d&&0<Math.abs(d.oldWidth-d.newWidth)&&c(b,{resize:!0})},100)});b.container.data(u,b)})}var u="_evolutionMasonry_context",q={append:function(b){if(b&&0!=b.length){var c=e(b).filter("div");return this.each(function(){var b=e(this).data(u);if(b){var d=[];c.each(function(){var a={original:this};d.push(a);b.children.push(a)});a(b,d)}})}},empty:function(){return this.each(function(){var a=e(this).data(u);a&&(a.container.empty(),a.children=[],c(a))})}};e.fn.evolutionMasonry=
function(a){if(a in q)return q[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)e.error("Method "+a+" does not exist on jQuery.fn.evolutionMasonry");else return p.apply(this,arguments)};e.fn.evolutionMasonry.defaults={columnClass:"masonry-column"};return e.fn.evolutionMasonry},jQuery,window);r("plugin.evolutionModerate",function(b,e,g){var m=b.telligent.evolution,n=function(b){b.settings.onReport(b.settings.contentId,b.settings.contentTypeId,function(e){m.messaging.publish("ui.reportabuse",
{contentId:b.settings.contentId,contentTypeId:b.settings.contentTypeId});showNotification(b,e.Report)})},f=function(b){b.hideTimer&&(clearTimeout(b.hideTimer),b.hideTimer=null)};buildModerationLink=function(d){d.moderationLink=b(m.template.compile(d.settings.moderationLinkTemplate)({linkClassName:d.settings.linkClassName,resources:{moderateLinkText:d.settings.moderateLinkText}})).appendTo(d.element)};buildModerationPopup=function(d){d.popup=b("<div></div>").glowPopUpPanel({cssClass:"content-moderation",
position:"downleft",zIndex:1E3,hideOnDocumentClick:!0});d.popup.on({glowPopUpPanelShown:function(b){d.moderationLink.addClass("open")},glowPopUpPanelHidden:function(b){d.moderationLink.removeClass("open")}})};buildModerationMenuContent=function(d,e){d.settings.onGetAdditionalLinks(function(a){var c=[],c=d.settings.supportsAbuse?d.settings.initialState?a.concat([{href:"#",className:"evolutionModerateFlagged",text:d.settings.reportedLinkText}]):a.concat([{href:"#",className:"evolutionModerateFlag",
text:d.settings.reportLinkText}]):a;a=b(m.template.compile(d.settings.moderationMenuTemplate)({links:c}));a.on("mouseleave",function(a){hideMenu(d)});a.on("mouseenter",function(a){f(d)});a.on("click","a",function(a){var c=b(a.target);c.hasClass("evolutionModerateFlag")?(a.preventDefault(),n(d)):c.hasClass("evolutionModerateFlagged")?a.preventDefault():("#"===c.attr("href")&&a.preventDefault(),d.element.trigger("evolutionModerateLinkClicked",a.target))});e(a)})};showMenu=function(b){b.popup||buildModerationPopup(b);
buildModerationMenuContent(b,function(e){f(b);b.popup.glowPopUpPanel("html",e).glowPopUpPanel("show",b.moderationLink)})};hideMenu=function(b){b.hideTimer||(b.hideTimer=setTimeout(function(){b.popup.glowPopUpPanel("hide");b.hideTimer=null},200))};formatNotificationMessage=function(b,e){return b.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,e&&e.AuthorUser&&e.AuthorUser.DisplayName?e.AuthorUser.DisplayName:"")};showNotification=function(b,e){var a=m.template.compile(b.settings.notificationTemplate)({resources:{reportedNotificationMessageText:formatNotificationMessage(b,
e),undoLinkText:b.settings.undoLinkText},contextId:b.contextId});m.notifications.show(a,{type:"moderation",duration:b.settings.notificationDuration,cssClass:""})};handleFlagMessages=function(b){m.messaging.subscribe("ui.reportabuse",function(e){b.settings.contentId===e.contentId&&b.settings.contentTypeId===e.contentTypeId&&(b.settings.initialState=!0)})};init=function(d){buildModerationLink(d);d.moderationLink.on({mouseenter:function(b){b.preventDefault();d.popup&&d.popup.glowPopUpPanel("isShown")?
hideMenu(d):showMenu(d);f(d)},mouseleave:function(e){b(e.relatedTarget).is(".content-moderation")||0!==b(e.relatedTarget).closest(".content-moderation").length||hideMenu(d)}});handleFlagMessages(d)};b.fn.evolutionModerate=function(d){var e=b.extend({},b.fn.evolutionModerate.defaults,d||{});return this.each(function(){var a={element:b(this),settings:e};init(a)})};b.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:!1,linkClassName:"",onReport:function(b,e,a){},onGetAdditionalLinks:function(b){b([])},
notificationDuration:5E3,moderateLinkText:"moderate",supportsAbuse:!0,reportLinkText:"Report as abusive",reportedLinkText:"Reported as abusive",reportedNotificationMessageText:"{NAME}'s post has been reported. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',
notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"};return{}},jQuery,window);r("plugin.evolutionPager",function(b,e,g){var m={},n={},f={},d=function(a){var c=[],d=a.settings,e=function(a){var c={};c[d.pageKey]=a;a={url:d.baseUrl,query:c};d.hash&&0<d.hash.length&&(a[d.hash]=d.hash);return b.telligent.evolution.url.modify(a)};0===d.totalItems||0===d.pageSize?a=0:(a=Math.floor(d.totalItems/d.pageSize),0<d.totalItems%d.pageSize&&(a+=1));if(1<a){d.showFirst&&3<=d.currentPage&&
a>d.numberOfPagesToDisplay&&(c[c.length]={type:"first",selected:!1,page:1,url:e(1)});d.showPrevious&&0<d.currentPage&&(c[c.length]={type:"previous",selected:!1,page:d.currentPage,url:e(d.currentPage)});if(d.showIndividualPages){var f;f=a<d.numberOfPagesToDisplay||0>d.currentPage-Math.floor(d.numberOfPagesToDisplay/2)?0:d.currentPage+Math.floor(d.numberOfPagesToDisplay/2)>=a?a-d.numberOfPagesToDisplay:d.currentPage-Math.floor(d.numberOfPagesToDisplay/2);var k;k=Math.floor(d.numberOfPagesToDisplay/
2);0===d.numberOfPagesToDisplay%2&&(k-=1);for(k=a<d.numberOfPagesToDisplay||d.currentPage+k>=a?a-1:0>d.currentPage-Math.floor(d.numberOfPagesToDisplay/2)?d.numberOfPagesToDisplay-1:d.currentPage+k;f<=k;f++)c[c.length]={type:"page",selected:d.currentPage===f,page:f+1,url:e(f+1)}}d.showNext&&d.currentPage+1<a&&(c[c.length]={type:"next",selected:!1,page:d.currentPage+2,url:e(d.currentPage+2)});d.showLast&&d.currentPage+3<a&&a>d.numberOfPagesToDisplay&&(c[c.length]={type:"last",selected:!1,page:a,url:e(a)})}return c},
l=function(a){var b=a.template({links:a.links});a.selection.html(b)},a=function(a){if(!a.settings.refreshOnAnyHashChange)return null;var c=b.telligent.evolution.url.hashData(),d=null,e;for(e in c)0==e.indexOf(a.settings.pageKey)&&(d=d||{},d[e.substr(a.settings.pageKey.length)]=c[e]);return d},c=function(c){var d=parseInt(b.telligent.evolution.url.hashData()[c.settings.pageKey],10),e=a(c);e&&(d=d||1);isNaN(d)||d===c.settings.currentPage||f[c.settings.pageKey]||(f[c.settings.pageKey]=!0,c.settings.onPage(d,
function(a){c.currentPageIndex=d;q(c,d,0,a,!1)},e||{}))},k=function(a){b(a.selection).on("click","a",function(c){c.preventDefault();c=b(this);var d={};d[a.settings.pageKey]=c.data("page");b.telligent.evolution.url.hashData(d)})},p=function(c){m[c.settings.pageKey]||(m[c.settings.pageKey]=!0,c.currentPageIndex=parseInt(b.telligent.evolution.url.hashData()[c.settings.pageKey],10),isNaN(c.currentPageIndex)&&(c.currentPageIndex=c.settings.currentPage),b(window).on("hashchange",function(d){d=parseInt(b.telligent.evolution.url.hashData()[c.settings.pageKey],
10);if(a(c)||!isNaN(d)&&c.currentPageIndex!=d){c.newPageIndex=d;var e={currentPage:c.currentPageIndex||1,newPage:c.newPageIndex||1,container:c.settings.pagedContentContainer};b.telligent.evolution.messaging.publish(c.settings.pagedContentPagingEvent,e);c.selection.trigger("evolutionPagerPaging",e);c.currentPageIndex=d}}))},u=function(c){n[c.settings.pagedContentPagingEvent]&&(c.currentPageIndex=parseInt(b.telligent.evolution.url.hashData()[c.settings.pageKey],10),b.telligent.evolution.messaging.unsubscribe(n[c.settings.pagedContentPagingEvent]));
n[c.settings.pagedContentPagingEvent]=b.telligent.evolution.messaging.subscribe(c.settings.pagedContentPagingEvent,function(b){f[c.settings.pageKey]||(f[c.settings.pageKey]=!0,c.settings.onPage(b.newPage,function(a){c.currentPageIndex=b.newPage;q(c,b.newPage,b.currentPage,a,!0)},a(c)||{}))})},q=function(a,c,e,k,g){var p=function(){var d={page:c,container:a.settings.pagedContentContainer};b.telligent.evolution.messaging.publish(a.settings.pagedContentPagedEvent,d);a.selection.trigger("evolutionPagerPaged",
d)};!g||"slide"!==a.settings.transition&&"fade"!==a.settings.transition?(b(a.settings.pagedContentContainer).html(k),p(),f[a.settings.pageKey]=!1):(g="fade","slide"===a.settings.transition&&(g=c<e?"slideRight":"slideLeft"),e=b(a.settings.pagedContentContainer),k=b("<div></div>").attr("id",e.attr("id")).html(k).hide().insertAfter(a.settings.pagedContentContainer),e.glowTransition(k,{type:g,duration:a.settings.transitionDuration,complete:function(){b(a.settings.pagedContentContainer).css({width:"",
height:"",overflow:"hidden"});p();f[a.settings.pageKey]=!1}}));a.settings.currentPage=c-1;a.links=d(a);l(a)};b.fn.evolutionPager=function(a){a=b.extend({},b.fn.evolutionPager.defaults,a||{});var e={selection:this,settings:a,template:b.telligent.evolution.template.compile(a.template)};e.links=d(e);l(e);a.onPage&&(a.pagedContentContainer&&0<a.pagedContentContainer.length)&&(u(e),p(e),k(e),c(e));return this};b.fn.evolutionPager.defaults={currentPage:0,pageSize:10,totalItems:0,showPrevious:!1,showNext:!1,
showFirst:!0,showLast:!0,showIndividualPages:!0,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(a,b){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,refreshOnAnyHashChange:!1,template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false"><span>&#171;</span></a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false"><span>&#60;</span></a>     <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>"><span><%= link.page %></span></a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false"><span>&#62;</span></a>     <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false"><span>&#187;</span></a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
return{}},jQuery,window);r("plugin.evolutionProgressIndicator",["module.notifications","lib.globalConfiguration"],function(b,e,g,m,n){function f(b){var d=g.extend({},g.fn.evolutionProgressIndicator.defaults,{beforeUnloadMessageTip:e.beforeUnloadMessageTip,beforeUnloadMessageLabel:e.beforeUnloadMessageLabel,pendingTip:e.pendingTip},b||{});u=u||g.telligent.evolution.template.compile(p);return this.each(function(){g(this).append(u(d));d.wrapper=g(this).find(".progress-indicator");d.percentLabel=g(this).find(".progress-percent").first();
d.percentLabelSmaller=g(this).find(".progress-percent-smaller").first();d.log=g(this).find(".progress-log").first();d.graphWrapper=g(this).find(".progress-graph-wrapper").first();d.graph=g(this).find(".progress-graph").first();d.graphLeft=g(this).find(".progress-graph .left").first();d.graphRight=g(this).find(".progress-graph .right").first();d.pending=g(this).find(".progress-pending").first();d.beforeUnloadMessage=g(this).find(".progress-note").first();d.showPending?(d.pending.show(),d.percentLabel.hide(),
d.percentLabelSmaller.hide()):a(d);d.warnBeforeUnload?d.warnBeforeUnload&&(d.beforeUnloadMessage.show(),g.telligent.evolution.administration&&g.telligent.evolution.administration.panelWrapper&&g.telligent.evolution.administration.panelWrapper()&&0<g.telligent.evolution.administration.panelWrapper().length?g.telligent.evolution.administration.navigationConfirmation.enable():g.telligent.evolution.navigationConfirmation.enable()):c(d);d.includeLatestMessage&&!d.includeAllMessages&&d.wrapper.addClass("latest-message");
d.includePercentComplete||d.graphWrapper.hide();g(this).data(k,d)})}function d(a,b){if(a.includePercentComplete){var c=Math.round(100*b);a.percentLabel.html(c);a.wrapper.addClass(a.progressClass);50<c?(a.graph.css({clip:"rect(auto, auto, auto, auto)"}),a.graphLeft.css({transform:"rotate("+Math.round(360*b)+"deg)"}),a.graphRight.css({transform:"rotate(180deg)",display:"block"})):(a.graph.css({clip:"rect(0, 1em, 1em, 0.5em)"}),a.graphLeft.css({transform:"rotate("+Math.round(360*b)+"deg)"}),a.graphRight.css({display:"none"}))}}
function l(a,b){a.includeAllMessages?a.log.append(g("<li></li>").text(b)):a.includeLatestMessage?a.log.empty().append(g("<li></li>").text(b)):a.log.hide()}function a(a){a.pending.hide();a.percentLabelSmaller.show();a.percentLabel.show()}function c(a){a.beforeUnloadMessage.hide();g.telligent.evolution.administration&&g.telligent.evolution.administration.panelWrapper&&g.telligent.evolution.administration.panelWrapper()&&0<g.telligent.evolution.administration.panelWrapper().length?g.telligent.evolution.administration.navigationConfirmation.disable():
g.telligent.evolution.navigationConfirmation.disable()}var k="evolutionProgressIndicator_context",p='\t<div class="progress-indicator">\t\t<div class="progress-graph-wrapper">\t\t\t<span class="progress-label">\t\t\t\t<span class="progress-percent">0</span><span class="progress-percent-smaller">%</span>\t\t\t\t<span class="progress-pending ui-loading ui-tip" data-tip="<%= pendingTip %>" data-width="32" data-height="32"></span>\t\t\t</span>\t\t\t<div class="progress-graph">\t\t\t\t<div class="left half"></div>\t\t\t\t<div class="right half"></div>\t\t\t</div>\t\t\t<div class="progress-shadow"></div>\t\t</div>\t\t<span class="progress-note ui-tip" data-tip="<%= beforeUnloadMessageTip %>"><%= beforeUnloadMessageLabel %></span>\t\t<ul class="progress-log"></ul>\t</div>',
u,q={progress:function(b){var c=this.data(k);if(null!==c)return this.each(function(){a(c);c.finalized||b.percentComplete!==n&&null!==b.percentComplete&&d(c,b.percentComplete);b.message&&0<b.message.length&&l(c,b.message)})},complete:function(b){var e=this.data(k);if(null!==e)return a(e),c(e),e.finalized=!0,this.each(function(){d(e,1);e.wrapper.addClass(e.completeClass)})},error:function(b){var d=this.data(k);if(null!==d)return a(d),c(d),d.finalized=!0,this.each(function(){d.wrapper.addClass(d.errorClass);
d.includeLatestMessage||d.includeAllMessages?l(d,b):g.telligent.evolution.notifications.show(b,{type:"error"})})}};g.fn.evolutionProgressIndicator=function(a){if(a in q)return q[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)g.error("Method "+a+" does not exist on jQuery.fn.evolutionProgressIndicator");else return f.apply(this,arguments)};g.fn.evolutionProgressIndicator.defaults={includePercentComplete:!0,includeLatestMessage:!0,includeAllMessages:!1,progressClass:"progress-indicator-progress",
completeClass:"progress-indicator-complete",errorClass:"progress-indicator-error",warnBeforeUnload:!1,showPending:!1,beforeUnloadMessageTip:null,beforeUnloadMessageLabel:null,pendingTip:null};return{}},jQuery,window);r("plugin.evolutionResize",function(b,e,g){function m(){if(!f){f=!0;var a=b("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");1>=Math.abs(a.prop("scrollHeight")-a.height())&&(n=0);a.remove()}}var n=null,f=!1,d=function(a){a.area.css({height:"auto"}).css({height:a.area.prop("scrollHeight")-
(null===n?a.offset:n)});var b=a.area.outerHeight();b!==a.oldHeight&&(b>=a.maxHeight?a.area.css({overflow:"visible"}):a.area.css({overflow:"hidden"}),a.area.trigger("evolutionResize",{newHeight:b,oldHeight:a.oldHeight}),a.oldHeight=b)},l=function(a){return parseInt(a.replace("px",""),10)};b.fn.evolutionResize=function(){m();return this.filter("textarea").each(function(){var a=b(this).css({resize:"none",overflow:"hidden"}),c={area:a,oldHeight:a.height(),maxHeight:l(a.css("max-height")),offset:a.innerHeight()!==
a.height()?l(a.css("padding-top"))+l(a.css("padding-bottom")):0};a.on("input keydown keyup",function(){d(c)});d(c)})};return{}},jQuery,window);r("plugin.evolutionScrollable",function(b,e,g){function m(c){return this.each(function(){var d=b(this),g=b.extend({},b.fn.evolutionScrollable.defaults,c||{},{selection:d,loadingEnabled:!0});g.pageIndex=g.initialPageIndex;g.wrapper||(g.wrapper=l(this));g.target||(g.target=d);g.wrapperIsGlobal=g.wrapper.get(0)==document||g.wrapper.get(0)==e;var p=0;g.wrapperIsGlobal?
p=g.wrapper.outerHeight()-g.target.offset().top:"absolute"==g.wrapper.css("position")||"fixed"==g.wrapper.css("position")?(p=g.wrapper.get(0).scrollHeight-(g.target.offset().top-g.wrapper.offset().top+g.target.outerHeight()),0>p&&(p=0)):p=g.wrapper.get(0).scrollHeight-(g.wrapper.offset().top-g.target.offset().top+g.target.outerHeight());g.wrapper.on("scrollend",{prefill:!1,delay:80,padding:p+150},function(){a(g)&&(0<g.batch&&0<g.pageIndex&&0==g.pageIndex%g.batch)&&(k(g),a(g,!1));h(g);!g.topIndicatorElement||
(g.topIndicatorShown||g.scrolling)||(g.topIndicatorElement.fadeIn(g.animationDuration),g.topIndicatorShown=!0);n(g)});f(g);d.data(s,g)})}function n(b,c){a(b)&&b.load&&(a(b,!1),u(b),b.load(b.pageIndex).then(function(e){!e||e instanceof jQuery&&0===e.length||"string"==typeof e&&0===e.trim().length?(a(b,!1),q(b)):(b.pageIndex++,!0!==e&&b.target.append(e),q(b),a(b,!0),c&&(c.prefilling&&b.pageIndex<b.prefill-1&&!d(b))&&n(b,c))})["catch"](function(){q(b);a(b,!1)}))}function f(a){a.target.empty();0<a.prefill&&
!d(a)&&n(a,{prefilling:!0})}function d(a){height=a.target.offset().top-(a.wrapperIsGlobal?0:a.wrapper.offset().top)+a.target.get(0).scrollHeight-(a.loadingIndicatorElement?a.loadingIndicatorElement.outerHeight():0);return height>(a.wrapperIsGlobal?b(window).height():a.wrapper.height())}function l(a){a=b(a);var c=a.css("position"),d="absolute"===c,e=/(auto|scroll)/,h=a.add(a.parents()).filter(function(){var a=b(this);return d&&"static"===a.css("position")?!1:e.test(a.css("overflow")+a.css("overflow-y")+
a.css("overflow-x"))}).eq(-1);return"fixed"!==c&&h.length?h:b(a[0].ownerDocument||document)}function a(a,b){b!==g&&(a.loadingEnabled=b);return a.loadingEnabled}function c(c){!c.loadMoreIndicatorElement&&c.loadMoreIndicator&&(c.loadMoreIndicatorElement=b(c.loadMoreIndicator(c)).hide().appendTo(c.selection).on("click",function(b){p(c);a(c,!0);n(c);return!1}))}function k(a){c(a);a.loadMoreIndicatorElement&&a.loadMoreIndicatorElement.appendTo(a.selection).show()}function p(a,b){a.loadMoreIndicatorElement&&
(a.loadMoreIndicatorElement.hide().appendTo(a.selection),b&&(a.loadMoreIndicatorElement.remove(),a.loadMoreIndicatorElement=null))}function u(a){!a.loadingIndicatorElement&&a.loadingIndicator&&(a.loadingIndicatorElement=b(a.loadingIndicator(a)).css({visibility:"hidden"}).appendTo(a.selection));a.loadingIndicatorElement&&a.loadingIndicatorElement.appendTo(a.selection).css({visibility:"visible"})}function q(a,b){a.loadingIndicatorElement&&(a.loadingIndicatorElement.css({visibility:"hidden"}).appendTo(a.selection),
b&&(a.loadingIndicatorElement.remove(),a.loadingIndicatorElement=null));p(a,b)}function h(a){!a.topIndicatorElement&&(a.wrapperIsGlobal&&a.topIndicator)&&(a.topIndicatorElement=b(a.topIndicator(a)).css({position:"fixed",bottom:"10px",right:"10px"}).appendTo("body").hide().on("click",function(){w(a);a.scrolling=!0;b("html, body").animate({scrollTop:0},{duration:a.animationDuration,complete:function(){a.scrolling=!1}})}))}function w(a,b){a.topIndicatorElement&&(a.topIndicatorElement.fadeOut(a.animationDuration),
a.topIndicatorShown=!1,b&&(a.topIndicatorElement.remove(),a.topIndicatorElement=null))}var s="evolutionScrollable_context",v={reset:function(){var b=this.data(s);if(null!==b)return this.each(function(){b.target.empty();b.pageIndex=0;q(b,!0);w(b,!0);a(b,!0);b.wrapper.scrollTop(0);f(b)})},loadMoreVisible:function(a){var b=this.data(s);if(null!==b)return this.each(function(){a!==g&&(a?k(b):p(b))})}};b.fn.evolutionScrollable=function(a){if(a in v)return v[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionScrollable");else return m.apply(this,arguments)};b.fn.evolutionScrollable.defaults={load:null,target:null,wrapper:null,initialPageIndex:0,prefill:10,batch:10,animationDuration:250,loadMoreLabel:"Load More",returnToTopLabel:"Return to Top",loadMoreIndicator:function(a){return"<span class='scrollable-load-more'>"+a.loadMoreLabel+"</span>"},loadingIndicator:function(a){return"<span class='scrollable-loading ui-loading' data-width='26' data-height='26'></span>"},
topIndicator:function(a){return"<span class='scrollable-top'>"+a.returnToTopLabel+"</span>"}};return{}},jQuery,window);r("plugin.evolutionScrollSlider",["lib.util"],function(b,e,g,m){var n=!1,f=function(d){var a=d.window.height()>=d.document.height(),c=function(){var a=d.document.height(),b=d.window.height(),c=d.window.scrollTop();return(a-c-b)/a};d.window.on("scroll.evolutionScrollSlider",b.requestAnimationFrameThrottle(function(){a=!0}));setInterval(function(){a&&(a=!1,!n&&1-c()>=d.revealAt?(n=
!0,d.document.trigger("evolutionScrollSliderShow")):n&&1-c()<d.revealAt&&(n=!1,d.document.trigger("evolutionScrollSliderHide")))},d.bounceDelay)},d=function(b){var a=e("<div></div>").hide().addClass(b.className).css({width:b.width,minHeight:b.height,maxHeight:0.7*b.window.height(),position:"fixed",bottom:b.offsetBottom,right:"0px"}).appendTo("body"),c=function(){b.load(function(c){c&&(a.html(c),e.fn.evolutionTransform.accelerated()?a.hide().evolutionTransform({left:a.width()+b.offsetRight,opacity:0},
{duration:0}).show().evolutionTransform({left:-1*b.offsetRight,opacity:1},{duration:200}):a.css({right:-a.width()}).show().animate({right:b.offsetRight},{duration:b.animationDuration}))})},d=function(){e.fn.evolutionTransform.accelerated()?a.evolutionTransform({opacity:0},{duration:100,complete:function(){a.hide()}}):a.animate({right:-a.width()},{duration:b.animationDuration,complete:function(){a.hide()}})};b.document.on("evolutionScrollSliderShow.evolutionScrollSlider",function(){c()}).on("evolutionScrollSliderHide.evolutionScrollSlider",
function(){d()})};e.evolutionScrollSlider=function(b){b=e.extend({},e.evolutionScrollSlider.defaults,b||{},{window:e(window),document:e(document)});b.document.off(".evolutionScrollSlider");b.window.off(".evolutionScrollSlider");f(b);d(b)};e.evolutionScrollSlider.hide=function(){e(document).trigger("evolutionScrollSliderHide")};e.evolutionScrollSlider.defaults={load:function(b){b(null)},width:400,height:75,className:"slider-content",animationDuration:250,offsetBottom:25,offsetRight:25,bounceDelay:150,
revealAt:0.8};return{}},jQuery,window);r("plugin.evolutionStarRating",function(b,e,g){var m=[],n=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",f=function(a,b){return 1==b%2?a.settings.imagesPathUrl+"star-right-on."+n:a.settings.imagesPathUrl+"star-left-on."+n},d=function(a,b){return 1==b%2?a.settings.imagesPathUrl+"star-right-off."+n:a.settings.imagesPathUrl+"star-left-off."+n};_cacheImages=function(a){var b,e,g;for(g=0;2>g;g++)e=f(a,g),_isImageCached(e)||(b=new Image,b.src=e,m[m.length]=b),e=d(a,
g),_isImageCached(e)||(b=new Image,b.src=e,m[m.length]=b)};_isImageCached=function(a,b){var d;for(d=0;d<m.length;d++)if(m[d].src==b)return!0;return!1};_getItemTitle=function(a,b,d){return"object"==typeof a.settings.titles?a.settings.titles[b].replace("{0}",d):a.settings.titles?a.settings.titles.replace("{0}",d):d};_getValue=function(a){return"undefined"!==typeof a.internal.value?a.internal.value:a.settings.value};_setValue=function(a,b){a.internal.isInitialized&&!a.settings.isReadOnly&&(a.internal.value=
b,a.settings.allowMultipleSelections||(a.settings.isReadOnly=!0),a.internal.savingValue=!0,a.settings.onRate(b))};_showValue=function(a,c){var e,g=2*a.settings.maxRating;c=2*c-1;var l="img"==a.settings.starElement;for(e=0;e<g;e++)e<=c?l?b(a.internal.state.find("img").get(e)).attr("src",f(a,e)).removeClass().addClass("star-on-"+(0==e%2?"left":"right")):b(a.internal.state.find("span").get(e)).removeClass().addClass("star-on-"+(0==e%2?"left":"right")):l?b(a.internal.state.find("img").get(e)).attr("src",
d(a,e)).removeClass().addClass("star-off-"+(0==e%2?"left":"right")):b(a.internal.state.find("span").get(e)).removeClass().addClass("star-off-"+(0==e%2?"left":"right"))};_mouseOver=function(a,b){a.internal.isInitialized&&!a.settings.isReadOnly&&(a.internal.state.addClass(a.settings.overClass),_showValue(a,b))};_mouseOut=function(a,b){a.internal.isInitialized&&!a.settings.isReadOnly&&(a.internal.state.removeClass(a.settings.overClass),_showValue(a,b))};_init=function(a){return this.each(function(){var c=
{settings:b.extend({},b.fn.evolutionStarRating.defaults,a||{}),internal:{state:b(this)}};c.settings.imagesPathUrl||(c.settings.imagesPathUrl=b.telligent.evolution.site.getBaseUrl()+"utility/images/");_cacheImages(c);b(this).data("evolutionStarRating_context",c);_initialize(c)})};_initialize=function(a){a.internal.state.addClass(a.settings.starClass).css("white-space","nowrap").find("a").off(".evolutionStarRating").end().empty().on("mouseleave",function(){_showValue(a,_getValue(a))});a.settings.isReadOnly&&
a.internal.state.addClass(a.settings.readOnlyClass);var c,e=2*a.settings.maxRating,g="undefined"===typeof a.settings.ratingCount,l="img"==a.settings.starElement;for(c=0;c<e;c++)(function(){var e,h;h=l?b("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"}):b("<span></span>");a.settings.isReadOnly||(e=b('<a href="#" />').css({textDecoration:"none"}).append(h));var k=(c+1)/2;k<=a.settings.value?l?h.attr("src",f(a,c)).addClass("star-on-"+(0==c%2?
"left":"right")):h.addClass("star-on-"+(0==c%2?"left":"right")):l?h.attr("src",d(a,c)).addClass("star-off-"+(0==c%2?"left":"right")):h.addClass("star-off-"+(0==c%2?"left":"right"));if(!a.settings.isReadOnly){if(a.settings.useHalfStars)n=_getItemTitle(a,c,k);else var k=Math.ceil(k),n=_getItemTitle(a,k,k);g&&e.attr("title",n).addClass("ui-tip");l&&h.attr("alt",n);e.data("rating-value",k).on("click.evolutionStarRating",function(b){_setValue(a,e.data("rating-value"));return!1}).on("focus.evolutionStarRating",
function(b){_mouseOver(a,e.data("rating-value"))}).on("mouseover.evolutionStarRating",function(b){_mouseOver(a,e.data("rating-value"))}).on("blur.evolutionStarRating",function(b){_mouseOut(a,e.data("rating-value"))}).on("mouseout.evolutionStarRating",function(b){_mouseOut(a,e.data("rating-value"))})}l&&h.attr("align","absmiddle").attr("border",0);e?a.internal.state.append(e):a.internal.state.append(h)})();_setMessage(a);a.internal.isInitialized=!0};_setMessage=function(a){if(a.settings.ratingMessageFormat&&
!isNaN(parseInt(a.settings.ratingCount))&&!isNaN(parseInt(a.settings.value))){var b=a.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(10*a.settings.value)/10).replace(/\{max_rating\}/gi,a.settings.maxRating).replace(/\{count\}/gi,a.settings.ratingCount);a.internal.state.attr("title",b).attr("aria-label",b)}};var l={val:function(a){var b=this.data("evolutionStarRating_context");return null!==b?"undefined"!==typeof a?(b.internal.value=a,_showValue(b,a),a):_getValue(b):0},readOnly:function(a){var b=
this.data("evolutionStarRating_context");if(null!==b)if("undefined"!==typeof a)(b.settings.isReadOnly=a)?b.internal.state.find("a").css({cursor:"default"}):b.internal.state.find("a").css({cursor:"pointer"});else return b.settings.isReadOnly;return!0},option:function(a,c){if("object"===typeof a)return this.each(function(){var c=b(this).data("evolutionStarRating_context");null!=c&&(c.settings=b.extend({},c.settings,a),_init.apply(b(this),[c.settings]))});if("undefined"!==typeof a&&"undefined"!==typeof c)return this.each(function(){var d=
b(this).data("evolutionStarRating_context");null!=d&&(d.settings[a]=c,_init.apply(b(this),[d.settings]))});if("undefined"!==typeof a){var d=this.data("evolutionStarRating_context");return null!==d?d.settings[a]:null}}};b.fn.evolutionStarRating=function(a){if(a in l)return l[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionStarRating");else return _init.apply(this,arguments)};b.extend(b.fn.evolutionStarRating,
{defaults:{value:0,maxRating:5,imagesPathUrl:"",starElement:"img",useHalfStars:!1,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:"Terrible Poor Fair Average Good Excellent".split(" "),isReadOnly:!1,allowMultipleSelections:!0,ratingCount:void 0,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(a){}}});return{}},jQuery,window);r("plugin.evolutionTagTextBox",function(b,e,g){var m={openTagSelector:function(){var a=this.data("evolutionTagTextBox");
if(a){window.__tagEditor={SetSelectedTags:function(b){f(a,b)},GetAllTagsWithEncoding:function(){for(var c=[],d=a.settings.allTags,e=b("<div></div>"),f=0;f<d.length;f++)e.text(d[f]),c[f]=[d[f],e.html()];return c},GetSelectedTags:function(){return d(a)}};var c=b.telligent.evolution.ensureRemoteUrlEncoding(a.settings.selectTagsModalUrl);"~/"==c.substr(0,2)&&(c=b.telligent.evolution.site.getBaseUrl()+c.substr(2));window.Telligent_Modal?window.Telligent_Modal.Open(c,400,350,null):b.glowModal&&b.glowModal(c,
{width:400,height:350})}},val:function(a){if(a===g)return(a=this.data("evolutionTagTextBox"))?d(a).join(","):"";var c=[];0<=a.indexOf(";")&&(a=a.replace(/;/g,","));a=a.split(/,/g);for(var e=0;e<a.length;e++){var l=b.trim(a[e]);l&&c.push(l)}return this.each(function(){var a=b(this).data("evolutionTagTextBox");a&&f(a,c)})}},n=function(a){return this.each(function(){var c={settings:b.extend({},b.fn.evolutionTagTextBox.defaults,a||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],
previousValue:"",currentTag:"",currentTagPosition:0}},d=b(this);0<=d.val().indexOf(";")&&d.val(d.val().replace(/;/g,","));for(var e=d.val().split(/,/g),f=[],g=0;g<e.length;g++){var h=b.trim(e[g]);h&&f.push(b.telligent.evolution.html.encode(h))}d.data("evolutionTagTextBox",c);d.glowLookUpTextBox({emptyHtml:"",maxValues:100,selectedLookUpsHtml:f,minimumLookUpLength:0,onGetLookUps:function(a,d){window.clearTimeout(c.suggestTimeout);d&&a.glowLookUpTextBox("updateSuggestions",[a.glowLookUpTextBox("createLookUp",
"",'<span class="ui-loading" width="48" height="48"></span>','<span class="ui-loading" width="48" height="48"></span>',!1)]);c.suggestTimeout=window.setTimeout(function(){l(c,d).then(function(c){for(var e=[],h=!1,f=0;f<c.length;f++)c[f].toLowerCase()==d.toLowerCase()?h=!0:e.push(a.glowLookUpTextBox("createLookUp",c[f],b.telligent.evolution.html.encode(c[f]),b.telligent.evolution.html.encode(c[f]),!0));d&&(h?e.unshift(a.glowLookUpTextBox("createLookUp",d,b.telligent.evolution.html.encode(d),b.telligent.evolution.html.encode(d),
!0)):e.unshift(a.glowLookUpTextBox("createLookUp",d,'<em class="new-tag">'+b.telligent.evolution.html.encode(d)+"</em>",'<em class="new-tag">'+b.telligent.evolution.html.encode(d)+"</em>",!0)));a.glowLookUpTextBox("updateSuggestions",e)})},500)}}).on("glowLookUpTextBoxChange",function(){d.trigger("change")})})},f=function(a,c){for(var d=b(a.internal.state);0<d.glowLookUpTextBox("count");)d.glowLookUpTextBox("removeByIndex",0);for(var e=0;e<c.length;e++){var f=d.glowLookUpTextBox("createLookUp",c[e],
b.telligent.evolution.html.encode(c[e]),b.telligent.evolution.html.encode(c[e]),!0);d.glowLookUpTextBox("add",f)}},d=function(a){var c=[];a=b(a.internal.state);for(var d=a.glowLookUpTextBox("count"),e=0;e<d;e++){var f=a.glowLookUpTextBox("getByIndex",e);f&&c.push(f.Value)}return c},l=function(a,c){return b.Deferred(function(e){var f,g,l,h,n=d(a);if(a.settings.applicationId)b.telligent.evolution.get({url:b.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/aggregatetags.json",data:{ApplicationId:a.settings.applicationId,
TagNameFilter:c,PageSize:c?20:100,PageIndex:0,MinimumContentCount:0,TypeId:a.settings.typeId,SortBy:"ContentCount",SortOrder:"Descending"}}).then(function(a){var c=[];for(f=0;f<a.AggregateTags.length;f++){l=!1;h=b.telligent.evolution.html.decode(a.AggregateTags[f].Name);for(g=0;g<n.length&&!l;g++)n[g].toLowerCase()==h.toLowerCase()&&(l=!0);l||c.push(h)}e.resolve(c)})["catch"](function(){e.resolve([])});else{var m=a.settings.allTags,v=[];for(f=0;f<m.length&&(!c||20>=v.length);f++)if(0===m[f].toLowerCase().indexOf(c.toLowerCase())){l=
!1;for(g=0;g<n.length&&!l;g++)n[g].toLowerCase()==m[f].toLowerCase()&&(l=!0);l||v.push(m[f])}e.resolve(v)}}).promise()};b.fn.evolutionTagTextBox=function(a){if(a in m)return m[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionTagTextBox");else return n.apply(this,arguments)};b.extend(b.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/tagselector?TagEditor=__tagEditor",applicationId:null,
typeId:null}});return{}},jQuery,window);r("plugin.evolutionTextEditor",function(b,e,g){var m=function(a){return b(a).data("__EVOLUTIONTEXTEDITOR_CONTEXT")},n=function(a){var c="";a.isReadOnly?c=a.readOnlyView.html():b.telligent.evolution.put({url:b.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/html/fromtext.json",data:{text:a.editor.evolutionComposer("val")},dataType:"json",async:!1,success:function(a){c=a.Html}});return c},f=function(a,c){b.telligent.evolution.put({url:b.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/text/fromhtml.json",data:{html:c},dataType:"json",async:!1,success:function(b){b.TextConversion.IsDataLost?(a.isReadOnly||(a.readOnlyView.css("height",a.editor.height()+"px"),a.readOnlyView.css("width",a.editor.width()+"px"),a.isReadOnly=!0,a.readOnlyView.show(),a.editorWrapper.hide()),a.readOnlyView.html(c),a.editor.val("<!html>"+c)):(a.isReadOnly&&(a.isReadOnly=!1,a.readOnlyView.hide(),a.editorWrapper.show()),a.editor.evolutionComposer("val",b.TextConversion.Text),a.editor.trigger("input"))}})},
d=function(a){var c=function(){var d=a.editorWrapper.offset(),f=a.editorWrapper.height();if(!a.isReadOnly)if(f){var h=b(e),g=h.scrollTop(),h=h.height(),l=Math.max(0,h-b("body").height());g+h<d.top+f?b("body, html").animate({scrollTop:(f>h-l?d.top-l:d.top-(h-f-5))+"px"},200,"swing",function(){a.editor.focus()}):g+l>d.top?b("body, html").animate({scrollTop:d.top-l+"px"},200,"swing",function(){a.editor.focus()}):a.editor.focus()}else e.clearTimeout(a.attemptFocusHandle),a.attemptFocusHandle=e.setTimeout(function(){c()},
50)};c()},l=function(a,b,c){a.editor.evolutionComposer("resize",b,c);isNaN(parseInt(b,10))||a.readOnlyView.css("width",b+"px");isNaN(parseInt(c,10))||a.readOnlyView.css("height",c+"px")},a=function(a){var b=a.width,c=a.height;"%"==a.cssWidth.substr(a.cssWidth.length-1)&&(b=a.editorWrapper.parent().width()*(parseInt(a.cssWidth,10)/100)-parseInt(a.editor.css("padding-left"),10)-parseInt(a.editor.css("padding-right"),10)-(a.editor.outerWidth()-a.editor.innerWidth()),l(a,b,c))},c={init:function(a){return this.each(function(){var c=
b(this),d,e;if(!c.data("__EVOLUTIONTEXTEDITOR_CONTEXT")){var h=c.css("width"),g=c.css("height"),l=c.innerWidth()-parseInt(c.css("padding-left"),10)-parseInt(c.css("padding-right"),10),n=c.innerHeight()-parseInt(c.css("padding-top"),10)-parseInt(c.css("padding-bottom"),10),t=c.val(),x=b('<div class="text-editor-wrapper"></div>');x.insertAfter(c);x.append(c);if(a.onSubmit){var r="cb_"+(new Date).getTime(),z=[];z.push('<div class="text-editor-submit-panel">');z.push(a.beforeSubmitHtml||"");a.enableToggle&&
(z.push('<span class="text-editor-submit-panel-message">'),z.push('<input type="checkbox" id="'+r+'_enable" />'),z.push('<label for="'+r+'_enable">'+(a.submitEnterMessage||"Press enter to send")+"</label>"),z.push("</span>"));z.push('<button type="button" class="text-editor-submit-panel-button" id="'+r+'_submit">');z.push(a.submitButtonText||"Send");z.push("</button>");z.push(a.afterSubmitHtml||"");z.push("</div>");x.append(z.join(""));d=x.find("#"+r+"_enable");e=x.find("#"+r+"_submit")}r=b('<div class="text-editor-read-only" style="overflow: auto; padding: 2px; border: 1px solid; box-sizing: border-box"></div>').hide();
r.on("click",function(){a.readOnlyMessage&&alert(a.readOnlyMessage)});r.insertAfter(x);c.evolutionComposer({plugins:a.plugins,focus:!1}).data("__EVOLUTIONTEXTEDITOR_CONTEXT",{editorWrapper:x,editor:c,readOnlyView:r,isReadOnly:!1,onKeyDowns:[],onChanges:[],cssWidth:h,cssHeight:g,width:l,height:n});c.evolutionComposer("oninput",function(a){var b=m(c);if(b&&b.onChanges&&0<b.onChanges.length)for(var d=0;d<b.onChanges.length;d++)try{b.onChanges[d](a)}catch(e){}return!0});if(a.onSubmit){if(a.enableToggle){c.evolutionComposer("onkeydown",
function(b){if(13!=b.keyCode||!d.is(":checked")||b.shiftKey||b.altKey){var e=m(c);if(e&&e.onKeyDowns&&0<e.onKeyDowns.length)for(var f=0;f<e.onKeyDowns.length;f++)try{e.onKeyDowns[f](b)}catch(h){}return!0}if(a.onSubmit)a.onSubmit();return!1});h=a.enterToSubmit;null!=window.localStorage&&null!==window.localStorage.getItem("tinymce-entertosubmit")&&(h="true"==window.localStorage.getItem("tinymce-entertosubmit"));h?d.prop("checked",!0):d.prop("checked",!1);var A=function(){d.is(":checked")?e.hide():e.show();
null!=window.localStorage&&window.localStorage.setItem("tinymce-entertosubmit",d.is(":checked").toString())};d.on("change",function(){A();return!0});A()}e.on("click",function(b){if(a.onSubmit)a.onSubmit();return!1})}else c.evolutionComposer("onkeydown",function(a){var b=m(c);if(b&&b.onKeyDowns&&0<b.onKeyDowns.length)for(var d=0;d<b.onKeyDowns.length;d++)try{b.onKeyDowns[d](a)}catch(e){}return!0});setTimeout(function(){c.evolutionComposer("resize",l,n)},50);0<b.trim(t).length&&f(m(c),t)}})},val:function(a){if("undefined"!==
typeof a){var b=m(this);if(b)return f(b,a)}else return(b=m(this))?n(b):"";return this},focus:function(){var b=m(this);b&&(a(b),d(b));return this},onKeyDown:function(a){var b=m(this);b&&b.onKeyDowns.push(a);return this},onChange:function(a){var b=m(this);b&&b.onChanges.push(a);return this},resize:function(a,b){var c=m(this);c&&l(c,a,b);return this},appendTo:function(b){var c=m(this);c?(c.editorWrapper.appendTo(b),a(c)):this.appendTo(b);return this}};b.fn.evolutionTextEditor=function(a){if(c[a])return c[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.evolutionTextEditor");else return c.init.apply(this,arguments)};return{}},jQuery,window);r("plugin.evolutionSqueezeText",function(b,e,g){function m(a){return parseFloat(b(a).css("font-size"))}function n(a){return parseFloat(b(a).css("letter-spacing"))}function f(a,c){b(a).css("font-size",c)}function d(a,c){b(a).css("letter-spacing",c)}var l={minSize:9,minSpacing:-0.5,enableSpacing:!0,
resetOnFailure:!1,truncateOnFailure:!0,onFailure:function(){}};b.fn.evolutionSqueezeText=function(a){var c=b.extend({},l,a||{});return this.each(function(){b(this).css({"white-space":"nowrap",overflow:"hidden"});if(!(this.scrollWidth<=this.offsetWidth)){var a=c.enableSpacing?1:2,e=c.minSpacing,g=c.minSize,l=n(this),h=m(this),w=h,s=l,v=l,t=h,r=0,y,z;for(z=0;50>z;z++)if(1===a&&c.enableSpacing){if(this.scrollWidth<=this.offsetWidth){y=l;var A=n(this);y=A+(y-A)/2}else y=e,A=n(this),y+=(A-y)/2;d(this,
y);this.scrollWidth<=this.offsetWidth?e=y:l=y;if(0.01>=Math.abs(y-c.minSpacing)&&2>r)r++,a=2,l=v=s,e=c.minSpacing,d(this,s);else if(0.01>=Math.abs(v-y))break;else v=y}else if(2===a)if(this.scrollWidth<=this.offsetWidth?(y=h,A=m(this),y=A+(y-A)/2):(y=g,A=m(this),y+=(A-y)/2),f(this,y),this.scrollWidth<=this.offsetWidth?g=y:h=y,0.01>=Math.abs(y-c.minSize)&&c.enableSpacing&&2>r)r++,a=1;else if(0.01>=Math.abs(t-y))if(c.enableSpacing&&2>r)r++,a=1;else break;else t=y;this.scrollWidth<=this.offsetWidth||
(c.resetOnFailure&&(f(this,w),d(this,s)),c.truncateOnFailure&&b(this).css("text-overflow","ellipsis"),c.onFailure&&c.onFailure.apply(this))}})};b.fn.evolutionSqueezeText.defaults=l;return{}},jQuery,window);r("plugin.evolutionTheater",["lib.globalConfiguration"],function(b,e,g,m){var n={show:function(f){var d=e.extend({},n.defaults,f||{});f=b.previewClose;var l=e('<div class="theater-mask"></div>').css("opacity","0").appendTo("body"),a=e('<div class="theater-loading"><span class="ui-loading"></span></div>').appendTo(l),
c=e('<div class="theater-container"></div>').css("opacity","0").appendTo(l),k=e('<div class="theater-content-container"></div>').appendTo(c),p=e('<div class="theater-content"></div>').appendTo(k),m=e('<a href="#" class="theater-close">'+f+"</a>").appendTo(l),q=null,h=function(b,e){q=b;b(function(b){e?e(p,b):p.html(b);g.setTimeout(function(){a.hide();d.loaded(p);c.css("opacity","1")},50)})},w=function(){l.css("opacity","0");window.setTimeout(function(){l.remove()},100);m.off("._evolution_theater");
c.off("._evolution_theater");e(document).off("._evolution_theater");e(document).off("._evolution_theater");e("body").css("overflow","")};n.refresh=function(a){h(q,a)};n.hide=function(){w()};(function(){e("body").css({overflow:"hidden"});e(document).off(".evolutionTheater").on("pointerstart._evolution_theater",".theater-mask",function(a){a=this.scrollTop;var b=this.scrollHeight,c=a+this.offsetHeight;0===a?this.scrollTop=1:c===b&&(this.scrollTop=a-1)}).on("pointermove._evolution_theater",{passive:!1},
function(a){for(var b=a.target,c=!1;null!==b;){if(b.classList&&b.classList.contains("theater-mask")){c=!0;break}b=b.parentNode}c||a.preventDefault()})})();m.on("click._evolution_theater",function(a){a.preventDefault();w()});c.on("click._evolution_theater",function(a){a.target===c.get(0)&&w()});e(document).on("keydown._evolution_theater",function(a){27===a.which&&w()});l.css("opacity","1");h(d.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},loaded:function(){}}};
e.evolutionTheater=n;return{}},jQuery,window);r("plugin.evolutionThreadReplies.controller",["plugin.evolutionThreadReplies.model","plugin.evolutionThreadReplies.navigator","plugin.evolutionThreadReplies.repliesView","plugin.evolutionThreadReplies.votersPopup","plugin.evolutionThreadReplies.utility"],function(b,e,g,m,n,f,d,l){function a(a){a.model=new b({onListReplies:a.onListReplies,onListVoters:a.onListVoters,onAddReply:a.onAddReply,onEditReply:a.onEditReply,onGetReply:a.onGetReply,onVoteReply:a.onVoteReply,
onFilterChange:a.onFilterChange,onTyping:a.onTyping,onInit:a.onInit,onTypingStarted:function(b){a.view.indicateTyping({typing:!0,parentId:b.parentId,authorDisplayName:b.authorDisplayName});a.typingTimeouts=a.typingTimeouts||{};d.clearTimeout(a.typingTimeouts[b.parentId]);delete a.typingTimeouts[b.parentId];a.typingTimeouts[b.parentId]=d.setTimeout(function(){a.view.indicateTyping({typing:!1,parentId:b.parentId,authorDisplayName:b.authorDisplayName})},1.5*b.delay)},onReplyCreated:function(b,c){var d=
b.forceRender;if(!d){if(b.authorId==f.telligent.evolution.user.accessing.id)return;a.view.indicateTyping({typing:!1,parentId:b.parentId});if(a.interacting){a.view.indicateNewReplies({parentId:b.parentId,replyId:b.replyId});return}if(!a.view.isContainerVisible({parentId:b.parentId})||a.interacting){a.view.indicateNewReplies({parentId:b.parentId,replyId:b.replyId});return}}a.model.getReply({replyId:b.replyId}).then(function(c){c=a.view.renderReplies({replies:[c],highlightNew:!0,permaLinked:b.replyId,
includeExplicitLoaders:!0,sortBy:a.sortBy,sortOrder:a.sortOrder,onlyIfVisible:!d}).added;t(a);d?a.view.scrollTo({replyId:b.replyId}):c||a.view.indicateNewReplies({parentId:b.parentId,replyId:b.replyId})})},onReplyUpdated:function(b){w(a,b.replyId)||a.view.isReplyRendered({replyId:b.replyId})&&a.model.getReply({replyId:b.replyId}).then(function(c){!1!==c.isApproved&&a.view.renderReplies({replies:[c],highlightNew:!0,permaLinked:b.replyId,highlightPermaLinked:!0})})},onVote:function(b){a.view.updateVotes({replyId:b.replyId,
yesVotes:b.yesVotes,noVotes:b.noVotes,value:b.value})},onReplyDeleted:function(b){w(a,b.replyId)||c(a,b.replyId,b.deleteChildren)},onAttemptDelete:function(b){h(a,b.replyId);c(a,b.replyId,b.deleteChildren)},onShowReplyForm:function(b){a.view.showReplyForm(b)},onAttemptTyping:n.throttle(function(b){a.model.type({parentId:b.parentId})},1500),onAttemptCreate:function(b){b&&(b.body&&0!=f.trim(b.body).length)&&(a.view.hideReplyForms(),h(a),a.model.addReply({parentId:b.parentId,body:b.body,data:b.data}).then(function(c){!1!==
c.isApproved&&(a.view.renderReplies({replies:[c],sortBy:b.sortBy||a.sortBy,sortOrder:b.sortOrder||a.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,highlightNew:!0,permaLinked:c.id,includeExplicitLoaders:!0}),a.view.scrollTo({replyId:c.id}))}))},onAttemptUpdate:function(b){b&&(b.body&&0!=f.trim(b.body).length)&&(h(a,b.replyId),a.view.hideReplyForms(),a.model.editReply({replyId:b.replyId,body:b.body,data:b.data}).then(function(b){!1!==b.isApproved&&a.view.renderReplies({replies:[b],
highlightPermaLinked:!0,permaLinked:b.id})}))},shouldHandleLiveMutations:function(){return null==a.filter}})}function c(a,b,c){a.view.isReplyRendered({replyId:b})?c?a.view.removeReply({replyId:b}):a.model.getReply({replyId:b}).then(function(c){a.view.renderReplies({replies:[c],permaLinked:b})}):a.view.indicateRemovedReplies({replyId:b})}function k(a){a.flattenedSortOrder="CreatedDate"==a.sortBy?a.sortOrder:"Ascending";a.navigator=new e({onParseReplyId:a.onParseReplyId,onGenerateReplyUrl:a.onGenerateReplyUrl,
replySortByQueryStringKey:a.replySortByQueryStringKey,replyFilterQueryStringKey:a.replyFilterQueryStringKey,replySortOrderQueryStringKey:a.replySortOrderQueryStringKey,defaultReplyIdQueryStringValue:a.defaultReplyIdQueryStringValue,defaultReplySortByQueryStringValue:a.defaultReplySortByQueryStringValue,defaultReplySortOrderQueryStringValue:a.defaultReplySortOrderQueryStringValue,initialSortBy:a.sortBy,initialSortOrder:a.sortOrder,initialFilter:a.filter,onLoadReply:function(b){return a.model.listReplies({replyId:b.replyId})},
onLoadReplies:function(b){a.view.empty();a.view.showLoading();return a.model.listReplies({sortBy:b.replySortBy,sortOrder:b.replySortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,filter:b.replyFilter})},onRenderReply:function(b,c,d){d.resetFilter&&(a.model.filterChange(d),a.view.empty());a.view.renderReplies({replies:b,permaLinked:c,sortBy:d.sortBy,sortOrder:d.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder});a.view.scrollTo({replyId:c,
highlight:!0})},onRenderReplies:function(b,c){a.model.filterChange(c);a.view.empty();a.view.renderReplies({replies:b,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,appendOnly:!0})},onAdjustGlobalSort:function(b){a.sortBy=b.sortBy;a.filter=b.filter;a.sortOrder=b.sortOrder;a.flattenedSortOrder="CreatedDate"==b.sortBy?b.sortOrder:"Ascending"}})}function p(a){f(a.container).empty().show();a.view=new g({wrapper:a.wrapper,container:a.container,
loadMoreTemplate:a.loadMoreTemplate,newRepliesTemplate:a.newRepliesTemplate,replyTemplate:a.replyTemplate,typingIndicatorTemplate:a.typingIndicatorTemplate,replyListTemplate:a.replyListTemplate,replyFormTemplate:a.replyFormTemplate,pageSize:a.pageSize,flattenedDepth:a.flattenedDepth,threadUrl:a.threadUrl,loadOnScroll:a.loadOnScroll,delayLoadOnScroll:a.delayLoadOnScroll,highlightClassName:a.highlightClassName,loadMoreSelector:a.loadMoreSelector,containerSelector:a.containerSelector,replySelector:a.replySelector,
permalinkSelector:a.permalinkSelector,loadMorePreviousSelector:a.loadMorePreviousSelector,renderedContentSelector:a.renderedContentSelector,loadMoreNextSelector:a.loadMoreNextSelector,loadMoreLinkSelector:a.loadMoreLinkSelector,newReplySelector:a.newReplySelector,submitReplySelector:a.submitReplySelector,cancelReplySelector:a.cancelReplySelector,onEditorAppendTo:a.onEditorAppendTo,onEditorRemove:a.onEditorRemove,onEditorVal:a.onEditorVal,onEditorFocus:a.onEditorFocus,baseLoadIndicatorsOnSiblings:a.baseLoadIndicatorsOnSiblings,
highlightTimeout:1E3*a.highlightNewReplySeconds,onGetFilter:function(){return a.filter}})}function u(a){a.voterPopup=new m({modalTitleText:a.text.peopleWhoVoted,modalShowMoreText:a.text.more,noVotesText:a.text.noVotes,loadVoters:function(b){return a.model.listVoters(b)}});a.voterPopup.handleVoterPopupRequests({container:a.container})}function q(a){r.subscribe("ui.replies.navigate",function(b){a.navigator.navigate({url:b.url})});r.subscribe("ui.replies.loadpage",function(b){a.model.listReplies({parentId:b.parentId,
startReplyId:b.startReplyId,endReplyId:b.endReplyId,flattenedDepth:a.flattenedDepth-b.currentDepth+1,sortBy:b.sortBy,sortOrder:b.sortOrder,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,filter:b.filter,explicitPageIndex:b.explicitPageIndex}).then(function(c){0==a.view.renderReplies({replies:c.replies,sortBy:b.sortBy,sortOrder:b.sortOrder,offsetElement:b.offsetElement,flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder,loadDirection:b.loadDirection,
explicitContainer:b.explicitContainer,loadInline:b.loadInline}).addedCount&&a.noRepliesMessage&&f.telligent.evolution.notifications.show(a.noRepliesMessage)})});r.subscribe("ui.replies.delete",function(b){if(a.onDeletePrompt)a.onDeletePrompt({replyId:f(b.target).data("id")})});r.subscribe("ui.replies.edit.cancel",function(b){a.view.hideReplyForms()});r.subscribe("ui.replies.edit",function(b){var c=f(b.target).data("id");a.model.getReply({replyId:c}).then(function(b){f.fn.uilinks.hide();a.view.renderEdit({replyId:c,
reply:b})})});r.subscribe("ui.replies.interaction.start",function(){a.interacting=!0});r.subscribe("ui.replies.interaction.stop",function(){a.interacting=!1});r.subscribe("ui.replies.cancel",function(){a.view.hideReplyForms()});r.subscribe("ui.replies.new",function(b){var c=f(b.target).data("replyid");a.model.listReplies({replyId:c,includeSiblings:!0}).then(function(b){a.view.renderReplies({replies:b.replies,permaLinked:c,sortBy:a.sortBy,sortOrder:a.sortOrder,highlightNew:!0,includeExplicitLoaders:!0,
flattenedSortBy:a.flattenedSortBy,flattenedSortOrder:a.flattenedSortOrder});a.view.scrollTo({replyId:c})}).fail(function(){a.view.indicateRemovedReplies({replyId:c})})});r.subscribe("ui.replies.vote.message",function(a){a=f(a.target);f.fn.evolutionTip.hide();a.hasClass("selected")?r.publish("ui.replies.unvote",{replyId:a.data("replyid")}):r.publish("ui.replies.vote",{replyId:a.data("replyid"),value:a.data("value")})});r.subscribe("ui.replies.vote",function(b){a.model.voteReply({replyId:b.replyId,
value:b.value}).then(function(c){a.view.updateVotes({replyId:b.replyId,yesVotes:c.yesVotes,noVotes:c.noVotes,value:c.value})})});r.subscribe("ui.replies.unvote",function(b){a.model.voteReply({replyId:b.replyId}).then(function(c){a.view.updateVotes({replyId:b.replyId,value:null})})})}function h(a,b,c){b=b||"root";a.blockedReplies||(a.blockedReplies={});a.blockedReplies[b]||(a.blockedReplies[b]=d.setTimeout(function(){delete a.blockedReplies[b]},c||2E3))}function w(a,b){return a.blockedReplies&&a.blockedReplies[b||
"root"]}function s(a){var b={sortBy:a.sortBy,sortOrder:a.sortOrder,filter:a.filter,initial:!0};a.replyId&&(b.replyId=a.replyId);a.replyOffsetId&&a.replyOffsetDirection&&("Previous"==a.replyOffsetDirection?b.endReplyId=a.replyOffsetId:b.startReplyId=a.replyOffsetId);return b}function v(a){var b=s(a);b.includeSiblings=!0;return a.model.listReplies(b).then(function(a){return a})}function t(a){a.headerContentRendered||(a.headerContentRendered=!0,a.headerContent&&a.view.appendHeaderContent(a.headerContent))}
var r=f.telligent.evolution.messaging,y={};return function(b){var c=f.extend({},y,b||{});c.replyId&&c.loadOnScroll&&(c.delayLoadOnScroll=!0);a(c);k(c);b=v(c);p(c);u(c);q(c);c.view.showLoading();b.then(function(a){a.replies&&0<a.replies.length&&t(c);c.view.empty();if(c.includeFirstPageOnPermalinks&&c.replyId&&!a.initialPage){var b=s(c);delete b.replyId;c.model.listReplies(b).then(function(b){f.telligent.evolution.ui.defer(f(".content-list.threaded").get(0),function(){c.view.renderReplies({replies:b.replies,
sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,appendOnly:!0});c.view.renderReplies({replies:a.replies,permaLinked:c.replyId,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,includeExplicitLoaders:!0})});setTimeout(function(){c.preFocus&&c.view.showReplyForm({replyId:c.replyId,focus:!0});c.view.scrollTo({replyId:c.replyId,highlight:!0})},300)})}else c.view.renderReplies({replies:a.replies,
permaLinked:a.initialPage?!1:c.replyId,sortBy:c.sortBy,sortOrder:c.sortOrder,flattenedSortBy:c.flattenedSortBy,flattenedSortOrder:c.flattenedSortOrder,appendOnly:!0}),c.replyId&&setTimeout(function(){c.preFocus&&c.view.showReplyForm({replyId:c.replyId,focus:!0});c.view.scrollTo({replyId:c.replyId,highlight:!0})},300);c.model.filterChange(s(c))});return{}}},jQuery,window);r("plugin.evolutionThreadReplies",["plugin.evolutionThreadReplies.controller"],function(b,e,g,m){var n={replyId:null,sortBy:null,
sortOrder:null,flattenedSortBy:null,flattenedSortOrder:null,replyOffsetId:null,replyOffsetDirection:null,preFocus:!1,headerContent:null,replyIdQueryStringKey:null,replySortByQueryStringKey:null,replyFilterQueryStringKey:null,replySortOrderQueryStringKey:null,threadUrl:"",pageSize:0,loadOnScroll:!1,onListReplies:function(b){},onListVoters:function(b){},onAddReply:function(b){},onEditReply:function(b){},onGetReply:function(b){},onVoteReply:function(b){},onFilterChange:function(b){},onDeletePrompt:function(b){},
onEditorAppendTo:function(b){},onEditorRemove:function(b){},onEditorVal:function(b){},onEditorFocus:function(b){},onInit:function(b){},replyTemplate:null,loadMoreTemplate:null,typingIndicatorTemplate:null,newRepliesTemplate:null,replyListTemplate:null,replyFormTemplate:null,highlightClassName:"new",loadMoreSelector:".load-more",loadMoreLinkSelector:".load-more a",loadMoreNextSelector:".load-more.next",loadMorePreviousSelector:".load-more.previous",containerSelector:"ul.content-list.threaded",replySelector:"li.threaded.content-item",
permalinkSelector:".reply-permalink",newReplySelector:"a.new-reply",submitReplySelector:"a.submit-new-reply",cancelReplySelector:"a.cancel-new-reply",renderedContentSelector:".rendered-content",wrapper:"",container:"",includeFirstPageOnPermalinks:!1,baseLoadIndicatorsOnSiblings:!1,highlightNewReplySeconds:4};e.fn.evolutionThreadedReplies=function(f){var d=e.extend({},n,f||{});return e(this).each(function(){new b(d)})};e.fn.evolutionThreadedReplies.defaults=n;return{}},jQuery,window);r("plugin.evolutionThreadReplies.model",
function(b,e,g){function m(b){if(b.onInit)b.onInit({raiseTypingStart:function(d){if(b.shouldHandleLiveMutations()&&b.onTypingStarted)b.onTypingStarted(d)},raiseReplyCreated:function(d){if(b.shouldHandleLiveMutations()&&b.onReplyCreated)b.onReplyCreated(d)},raiseReplyUpdated:function(d){if(b.onReplyUpdated)b.onReplyUpdated(d)},raiseVote:function(d){if(b.onVote)b.onVote(d)},raiseReplyDeleted:function(d){if(b.onReplyDeleted)b.onReplyDeleted(d)},attemptDelete:function(d){if(b.onAttemptDelete)b.onAttemptDelete(d)},
attemptTyping:function(d){if(b.onAttemptTyping)b.onAttemptTyping(d)},attemptCreate:function(d){if(b.onAttemptCreate)b.onAttemptCreate(d)},attemptUpdate:function(d){if(b.onAttemptUpdate)b.onAttemptUpdate(d)},showReplyForm:function(d){if(b.onShowReplyForm)b.onShowReplyForm(d||{})}})}var n={onListReplies:function(b){},onListVoters:function(b){},onAddReply:function(b){},onEditReply:function(b){},onGetReply:function(b){},getReply:function(b){},onTyping:function(b){},onInit:function(b){},onTypingStarted:function(b){},
onReplyCreated:function(b){},onReplyUpdated:function(b){},onVote:function(b){},onReplyDeleted:function(b){}};return function(e){var d=b.extend({},n,e||{});m(d);return{listReplies:function(b){if(d.onListReplies)return d.onListReplies(b)},listVoters:function(b){if(d.onListVoters)return d.onListVoters(b)},addReply:function(b){if(d.onAddReply)return d.onAddReply(b)},editReply:function(b){if(d.onEditReply)return d.onEditReply(b)},getReply:function(b){if(d.onGetReply)return d.onGetReply(b)},voteReply:function(b){if(d.onVoteReply)return d.onVoteReply(b)},
filterChange:function(b){if(d.onFilterChange)return d.onFilterChange(b)},type:function(b){if(d.onTyping)return d.onTyping(b)}}}},jQuery,window);r("plugin.evolutionThreadReplies.navigator",function(b,e,g){function m(f){var d=b.telligent.evolution.url.parseQuery(e.location.href),l=b.extend({replySortBy:f.defaultReplySortByQueryStringValue,replySortOrder:f.defaultReplySortOrderQueryStringValue,replyFilter:null},{replySortBy:d[f.replySortByQueryStringKey],replyFilter:d[f.replyFilterQueryStringKey],replySortOrder:d[f.replySortOrderQueryStringKey]});
if(f.onParseReplyId){var a=f.onParseReplyId();a!==g&&(null!==a&&!1!==a)&&(l.replyId=a)}var c=l.replyId&&f.currentFilter;f.currentSortBy=l.replySortBy;f.currentSortOrder=l.replySortOrder;f.currentFilter=l.replyFilter;l.replySortBy&&l.replySortOrder&&d[f.replySortByQueryStringKey]&&d[f.replySortOrderQueryStringKey]?(f.onAdjustGlobalSort({sortBy:l.replySortBy,sortOrder:l.replySortOrder,filter:l.replyFilter}),f.onLoadReplies(l).then(function(a){if(a&&a.replies&&f.onRenderReplies)f.onRenderReplies(a.replies,
{sortBy:l.replySortBy,sortOrder:l.replySortOrder,filter:l.replyFilter})})):l.replyId&&(f.onAdjustGlobalSort({sortBy:l.replySortBy,sortOrder:l.replySortOrder,filter:l.replyFilter}),f.onLoadReply(l).then(function(a){if(a&&a.replies&&f.onRenderReply)f.onRenderReply(a.replies,l.replyId,{sortBy:l.replySortBy,sortOrder:l.replySortOrder,filter:l.replyFilter,resetFilter:c})}))}var n={onParseReplyId:function(){},onGenerateReplyUrl:function(){},replySortByQueryStringKey:"",replyFilterQueryStringKey:"",replySortOrderQueryStringKey:"",
defaultReplySortByQueryStringValue:null,defaultReplySortOrderQueryStringValue:null,onLoadReply:function(b){},onLoadReplies:function(b){},onRenderReply:function(b,d){},onRenderReplies:function(b){}};return function(f){var d=b.extend({},n,f||{});b.extend(d,{currentSortBy:f.initialSortBy,currentSortOrder:f.initialSortOrder,currentFilter:f.initialFilter});var l=e.location.pathname;b(e).on("popstate",function(a){e.location.pathname!=l&&m(d);l=e.location.pathname});return{navigate:function(a){if(a.url)history.pushState({},
"",a.url);else{a.replyId&&(delete a.replySortOrder,delete a.replySortBy,delete a.replyFilter);var c={},f=null;a.replyId&&null!==a.newUrl&&a.newUrl!==g?f=d.onGenerateReplyUrl(a.replyId):(a.replySortBy&&(c[d.replySortByQueryStringKey]=a.replySortBy),a.replySortOrder&&(c[d.replySortOrderQueryStringKey]=a.replySortOrder),a.replyFilter&&(c[d.replyFilterQueryStringKey]=a.replyFilter),f=b.telligent.evolution.url.modify({url:e.location.href,query:c}));history.pushState({},"",f)}m(d)}}}},jQuery,window);r("plugin.evolutionThreadReplies.indicatorRegistrarView",
["plugin.evolutionThreadReplies.indicatorView"],function(b,e,g,m){var n={container:null,onGetExistingRenderedReply:function(b){},template:null};return function(f){var d=e.extend({},n,f||{},{indicators:{},offscreenIndicator:null});return{increment:function(f){var a=d.indicators[f.parentId];if(!a){var c=d.onGetExistingRenderedReply(f.parentId);c&&0<c.length&&(a=new b({container:c.find(".new-replies-wrapper").first(),template:d.template}),d.indicators[f.parentId]=a)}a&&a.increment(e.extend(f,{width:d.container.width()}));
a&&a.isVisible()||(d.offscreenIndicatorContainer=d.offscreenIndicatorContainer||e("<div></div>").prependTo(d.container),d.offscreenIndicator||(d.offscreenIndicator=new b({container:d.offscreenIndicatorContainer,offscreen:!0,template:d.template}),d.indicators.offscreen=d.offscreenIndicator),d.offscreenIndicator.increment(e.extend(f,{width:d.container.width()})));e.telligent.evolution.notifications.unread("+1",{isLocal:!0,namespace:"evolutionThreadReplies"})},isIndicating:function(b){return(b=d.indicators[b])?
b.isIndicating():!1},decrement:function(b){e.each(d.indicators,function(a,c){c.decrement(e.extend(b,{width:d.container.width()}))||(c.remove(),delete c[a])});e.telligent.evolution.notifications.unread("-1",{isLocal:!0,namespace:"evolutionThreadReplies"})}}}},jQuery,window);r("plugin.evolutionThreadReplies.indicatorView",["plugin.evolutionThreadReplies.utility"],function(b,e,g,m){var n={container:null,offscreen:!1,parentId:null,template:null};return function(f){var d=e.extend({},n,f||{},{replyStack:[]});
return{increment:function(b){var a=b.replyId.toString();0<d.replyStack.indexOf(a)||(d.replyStack.push(a),d.container.empty(),b=e(d.template({newReplies:d.replyStack.length,replyId:d.replyStack[0],offscreen:d.offscreen,width:b.width||100})),d.container.append(b))},decrement:function(b){var a=d.replyStack.indexOf(b.replyId.toString());0<=a&&d.replyStack.splice(a,1);return 0<d.replyStack.length?(d.container.empty(),b=e(d.template({newReplies:d.replyStack.length,replyId:d.replyStack[0],offscreen:d.offscreen,
width:b.width||100})),d.container.append(b),!0):!1},isIndicating:function(){return d.replyStack&&0<d.replyStack.length},isVisible:function(){return b.isFullyVisible(document,d.container,100)},remove:function(){d.container.empty()}}}},jQuery,window);r("plugin.evolutionThreadReplies.repliesView",["plugin.evolutionThreadReplies.indicatorRegistrarView","plugin.evolutionThreadReplies.utility","lib.util"],function(b,e,g,m,n,f){function d(a){m(document).on("scrollend",function(){if(!a.scrolling&&!a.loadingPage){var b=
a.container.find(a.loadMoreNextSelector+" a").last(),c=!1;b.parents(a.replySelector).each(function(){var b=m(this).next(a.replySelector);b&&0<b.length&&(c=!0)});c||b.trigger("click")}})}function l(a){a.wrapper=m(a.wrapper);a.container=m(a.container);a.headerContainer=m('<div class="reply-header"></div>').appendTo(a.container);t(a);a.replyTemplate=m.telligent.evolution.template(a.replyTemplate);a.loadMoreTemplate=m.telligent.evolution.template(a.loadMoreTemplate);a.typingIndicatorTemplate=m.telligent.evolution.template(a.typingIndicatorTemplate);
a.newRepliesTemplate=m.telligent.evolution.template(a.newRepliesTemplate);a.replyListTemplate=m.telligent.evolution.template(a.replyListTemplate);a.replyFormTemplate=m.telligent.evolution.template(a.replyFormTemplate);a.loadOnScroll&&!a.delayLoadOnScroll&&d(a);a.newRepliesIndicatorRegistrar=new b({container:a.container,onGetExistingRenderedReply:function(b){return a.root?s(a,a.root,b):null},template:a.newRepliesTemplate})}function a(a){a.wrapper.on("click","a.navigable",function(a){a.stopPropagation();
a.preventDefault();a=m(this).attr("href");m.telligent.evolution.messaging.publish("ui.replies.navigate",{url:a});return!1});a.wrapper.on("click",a.loadMoreLinkSelector,function(b){b.preventDefault();a.delayLoadOnScroll&&(a.loadOnScroll&&!a.loadOnScrollInited)&&(a.loadOnScrollInited=!0,d(a));var c=!1;"inline"==m(b.target).data("inline")&&(c=!0);var e=m(this).closest(a.replySelector).data("id"),h=m(this).closest(a.containerSelector),f=m(this).hasClass("previous")?"previous":"next",g=null,l=null;if("previous"==
f)g=m(this).closest(a.loadMoreSelector).next(a.replySelector);else{var g=m(this).closest(a.loadMoreSelector).prev(a.replySelector),n=g.find(".explicitpager");n&&0<n.length&&(l=n.data("explicitpageindex"))}n=k(a,h);a.loadingPage=!0;m.telligent.evolution.messaging.publish("ui.replies.loadpage",{parentId:e,startReplyId:"next"==f&&g&&0<g.length?g.data("id"):null,endReplyId:"previous"==f&&g&&0<g.length?g.data("id"):null,offsetElement:g,currentDepth:n,sortBy:h.data("sortby"),sortOrder:h.data("sortorder"),
filter:h.data("filter"),explicitPageIndex:l,loadDirection:f,explicitContainer:h,loadInline:c});m(b.target).closest("li").addClass("loading");return!1});a.wrapper.on("click",a.newReplySelector,function(b){b.preventDefault();b=m(b.target);0==b.closest(a.replySelector).find(">.newreply .reply-form").length?(C(a,b.closest(a.replySelector).data("id"),!0),b.data("label-cancel")&&b.html(b.data("label-cancel"))):(A(a),b.data("label-reply")&&b.html(b.data("label-reply")));return!1});var b=e.debounce(function(){m.telligent.evolution.messaging.publish("ui.replies.interaction.stop")},
2E3,function(){c(a)}),h=e.debounce(function(){a.container.find("li.content-item."+a.highlightClassName).each(function(){var b=m(this);b.data("_unhighlighting")||(b.data("_unhighlighting",!0),n.setTimeout(function(){b.removeClass(a.highlightClassName)},a.highlightTimeout))})},250);m(n).on("scroll",g.requestAnimationFrameThrottle(function(){b();h()}))}function c(a){m.telligent.evolution.messaging.publish("ui.replies.interaction.start")}function k(a,b){var c=b.data("depth");if(null==c||c==f)c=b.parents(a.containerSelector).length+
1,b.data("depth",c);return c}function p(a,b,c){c.addClass(a.highlightClassName);e.isPartiallyVisible(document,c)&&n.setTimeout(function(){c.removeClass(a.highlightClassName)},a.highlightTimeout)}function u(a,b,c,d){b&&(c&&d)&&(c.addClass("pending"),b[d.direction](c))}function q(a,b){b.find(a.loadMoreSelector+".pending").each(function(){var c=m(this),d=c.find("a").first(),e=c.hasClass("previous")?"Previous":"Next",h=null,h="Previous"==e?c.next(a.replySelector):c.prev(a.replySelector),f=c.closest(a.containerSelector),
g=k(a,f),l=a.threadUrl;1<g&&(l=f.closest(a.replySelector).find(a.permalinkSelector).first().attr("href"));e=m.telligent.evolution.url.modify({url:l,query:{ReplyOffsetId:h&&0<h.length?h.data("id"):null,ReplyOffsetDirection:e,ReplySortBy:b.data("sortby"),ReplySortOrder:b.data("sortorder")}});d.attr("href",e);c.removeClass("pending")})}function h(a,b,c,d,f,g){var l=!1,n=!1,q=null,r=null;f.permaLinked&&(f.includeExplicitLoaders&&0<c.length)&&(n=!0);if(n){var t=a.baseLoadIndicatorsOnSiblings,x;x=null;
x=b.children(a.loadMoreNextSelector+"");null!==x&&0<x.length&&(q=x,a.baseLoadIndicatorsOnSiblings&&(t=!0));t&&(a.baseLoadIndicatorsOnSiblings?(t=c[0].PreviousSiblingCount,x=b.children(a.replySelector).length,t>x&&(t=v(a,b,"previous",{inlineOnly:!0}),t&&0!=t.length&&document.contains(t[0])||(r=v(a,b,"previous",{createOnly:!0}),u(a,b,r,{direction:"append"})))):(t=v(a,b,"previous",{inlineOnly:!0}),t&&0!=t.length&&document.contains(t[0])||(r=v(a,b,"previous",{createOnly:!0}),u(a,b,r,{direction:"append"}))))}for(t=
0;t<c.length;t++){x=c[t];var y=s(a,b,x.id);if(y){f.loadInline&&0<y.next("li.load-more[data-inline]").length&&(l=!0);x.isDeleted&&y.addClass("deleted");y.data("createddate",x.createdDate);y.data("yesvotes",x.yesVotes);y.data("novotes",x.noVotes);y.data("model",x);var z=y.find(".rendered-content").first();z.empty().append(x.body);z.get(0).className="rendered-content "+x.status}else{if(g&&0==d&&0==t||!n&&f.permaLinked&&!f.touchedPermaLink){var A=v(a,b,"previous");a.baseLoadIndicatorsOnSiblings?0<x.PreviousSiblingCount?
u(a,b,A,{direction:"prepend"}):A.remove():u(a,b,A,{direction:"prepend"})}A=k(a,b);x.sortBy=A>a.flattenedDepth+1?f.flattenedSortBy:f.sortBy;x.sortOrder=A>a.flattenedDepth+1?f.flattenedSortOrder:f.sortOrder;a:{var B=a,y=b,C=x,M=f.appendOnly,z=f.onlyIfVisible;C.filter=B.filter;var A=m(B.replyTemplate(C)),K=void 0,K=C,L=A;L.data(F+"votes",K.yesVotes-K.noVotes);L.data(F+"createdDate",K.createdDateTicks||m.telligent.evolution.parseDate(K.createdDate).getTime());if(M)y.append(A),K=H.down;else if(M=y.children(B.replySelector),
B=w(B,M,C,A),B<M.length){if(z&&!e.isBottomVisible(document,m(M.get(B)))){A=!1;break a}y=A.get(0);z=M.get(B);z.parentNode.insertBefore(y,z);K=H.up}else{if(z&&!e.isBottomVisible(document,y)){A=!1;break a}y.append(A);K=H.down}A={renderedReply:A,appendDirection:K}}if(A)A.appendDirection===H.down&&null!==q?q.remove():A.appendDirection===H.up&&null!==r&&r.remove();else return r&&r.remove(),!1;f.addedCount++;y=A.renderedReply;y.data("model",x);f.permaLinked&&!f.touchedPermaLink&&(z=v(a,b,"next"),a.baseLoadIndicatorsOnSiblings?
0<x.NextSiblingCount?(B=y.nextAll(a.replySelector),x.NextSiblingCount>B.length&&u(a,b,z,{direction:"append"})):z.remove():u(a,b,z,{direction:"append"}));x.id==f.permaLinked&&(f.touchedPermaLink=!0);f.highlightNew&&p(a,b,y)}f.highlightPermaLinked&&x.id==f.permaLinked&&p(a,b,y);a.newRepliesIndicatorRegistrar.decrement({replyId:x.id});if(x.children&&0<x.children.length&&(y=y.find(a.containerSelector).first(),!h(a,y,x.children,d+1,f)))return!1}f.loadInline&&(g=v(a,b,"previous",{inlineOnly:!0}),a.baseLoadIndicatorsOnSiblings?
(l=c[0],g.prevAll(a.replySelector).length>=l.PreviousSiblingCount&&g.remove()):(c.length<a.pageSize||l)&&g.remove());l=0===d&&f.loadDirection?"previous"==f.loadDirection?"previous":"down":A&&A.appendDirection==H.up?"previous":"down";if(!f.loadInline||0<d)c.length>=a.pageSize?(c=v(a,b,l),a.baseLoadIndicatorsOnSiblings?"previous"==l?(l=b.children(a.replySelector).first().data("model"))&&0<l.PreviousSiblingCount&&u(a,b,c,{direction:"prepend"}):(l=b.children(a.replySelector).last().data("model"))&&0<
l.NextSiblingCount&&u(a,b,c,{direction:"append"}):"previous"==l?u(a,b,c,{direction:"prepend"}):u(a,b,c,{direction:"append"})):f.permaLinked||v(a,b,l).remove();return!0}function w(a,b,c,d){var h="Ascending"==c.sortOrder?1:-1;return e.determineInsertionIndex(b,d,function(a,b){a=m(a);b=m(b);if("CreatedDate"==c.sortBy)return aDate=a.data(F+"createdDate"),bDate=b.data(F+"createdDate"),aDate<bDate?-1*h:aDate>bDate?1*h:0;aDate=a.data(F+"createdDate");bDate=b.data(F+"createdDate");aVotes=a.data(F+"votes");
bVotes=b.data(F+"votes");return aVotes<bVotes?-1*h:aVotes>bVotes?1*h:aDate<bDate?-1:aDate>bDate?1:0},{equivalentBefore:!1})}function s(a,b,c){return(a=b.find('li.content-item[data-id="'+c+'"]').first())&&a.length?a:null}function v(a,b,c,d){d=m.extend({createOnly:!1,inlineOnly:!1},d||{});var e=null;d&&!d.createOnly&&(e="previous"==c?b.children(a.loadMorePreviousSelector+(d.inlineOnly?"[data-inline]":"")):b.children(a.loadMoreNextSelector+(d.inlineOnly?"[data-inline]":"")));return e&&0<e.length?(d&&
!d.inlineOnly&&e.detach(),e):m(a.loadMoreTemplate({previous:"previous"==c,loadInline:d&&d.createOnly}))}function t(a){a.onEditorRemove();delete a.root;var b=a.container.children(".reply-header").detach();a.container.empty().append(b)}function r(a,b){var c=s(a,a.container,b.replyId);c&&0<c.length&&(clearTimeout(a.currentlyScrollingTiemeout),a.scrolling=!0,b.highlight&&(a.container.find(".permalinked").removeClass("permalinked"),c.addClass("permalinked")),c=c.find(a.renderedContentSelector).first(),
e.scrollToElementIfNotVisible(document,c,130),a.currentlyScrollingTiemeout=setTimeout(function(){a.scrolling=!1},1E3))}function y(a){a.fadeOut(500,function(){a.remove()})}function z(a,b){a.root.find('li.content-item[data-parentid="'+b+'"]').each(function(){var b=m(this);z(a,b.data("id"));var c=b.prev(a.loadMorePreviousSelector);y(c);y(b)})}function A(a){a.onEditorRemove();a.container.find(".reply-form").each(function(){m(this).closest(".threaded.content-item").removeClass("hide-content").removeClass("edit")}).remove();
a=a.wrapper.find(a.newReplySelector);a.data("label-reply")&&a.html(a.data("label-reply"))}function C(a,b){A(a);var d=null;if((d=s(a,a.root,b).find(".newreply").first())&&0!=d.length){var e=d.find(".reply-form").first();0==e.length&&(e=m(a.replyFormTemplate({editingReplyId:null})),d.append(e));a.onEditorAppendTo({container:e.find(".editor").first()});a.onEditorFocus();c(a)}}var B={replyTemplate:null,loadMoreTemplate:null,typingIndicatorTemplate:null,newRepliesTemplate:null,highlightClassName:"new",
wrapper:null,container:null,highlightTimeout:4E3,flattenedDepth:null,loadOnScroll:!1,threadUrl:""},F="_evolutionThreadReplies:",H={up:1,down:2};return function(b){var d=m.extend({},B,b||{});l(d);a(d);return{renderReplies:function(a){return m.telligent.evolution.ui.defer(m(".content-list.threaded").get(0),function(){d.container.find(d.loadMoreSelector).removeClass("loading");var b=d.loadingPage=!1;d.root||(b=!0,d.root=m(d.replyListTemplate({sortBy:0==d.flattenedDepth?a.flattenedSortBy:a.sortBy,sortOrder:0==
d.flattenedSortOrder?a.flattenedSortOrder:a.sortOrder,filter:d.filter===f?d.onGetFilter():d.filter})).appendTo(d.container));var c=a.explicitContainer?a.explicitContainer:d.root;if(!a.explicitContainer&&a.replies&&0<a.replies.length&&a.replies[0].parentId){var e=s(d,d.root,a.replies[0].parentId);e&&(c=e.find(d.containerSelector).first())}e=k(d,c)-1;!a.explicitContainer&&e>d.flattenedDepth&&(c=c.parents(d.containerSelector).first());a.addedCount=0;b=h(d,c,a.replies,0,a,b);q(d,c);return{added:b,addedCount:a.addedCount}})},
empty:function(){return t(d)},scrollTo:function(a){return r(d,a)},indicateTyping:function(a){if(!d.newRepliesIndicatorRegistrar.isIndicating(a.parentId)){var b=s(d,d.root,a.parentId),b=null!==b?b.find(".typing-status-wrapper").first():d.wrapper.find(".typing-status-wrapper").first();a.typing?b.empty().append(d.typingIndicatorTemplate({displayName:a.authorDisplayName})):b.empty()}},indicateNewReplies:function(a){d.root&&s(d,d.root,a.parentId);d.newRepliesIndicatorRegistrar.increment({parentId:a.parentId,
replyId:a.replyId})},indicateRemovedReplies:function(a){d.newRepliesIndicatorRegistrar.decrement({replyId:a.replyId})},updateVotes:function(a){var b=s(d,d.root,a.replyId);b&&0<b.length&&(b=b.find(".votes").first(),!0===a.value?(b.find("a.vote").removeClass("selected"),b.find(".up").first().addClass("selected")):!1===a.value?(b.find("a.vote").removeClass("selected"),b.find(".down").first().addClass("selected")):null===a.value&&b.find("a.vote").removeClass("selected"),a.yesVotes!==f&&a.noVotes!==f&&
(a=a.yesVotes-a.noVotes,b.find(".vote.current").html(0<a?"+"+a:a)))},renderEdit:function(a){var b=s(d,d.root,a.replyId);if(b&&0<b.length){b.addClass("hide-content").addClass("edit");A(d);var b=b.find(".edit-form").first(),e=b.find(".reply-form").first();0==e.length&&(e=m(d.replyFormTemplate({editingReplyId:a.replyId})),b.append(e));d.onEditorAppendTo({container:e.find(".editor").first()});d.onEditorVal({val:a.reply.rawBody,meta:a.reply});d.onEditorFocus();c(d)}},isContainerVisible:function(a){d.root?
(a=s(d,d.root,a.parentId),a&&0!=a.length||(a=d.root),a=e.isPartiallyVisible(document,a)):a=!1;return a},isReplyRendered:function(a){a=d.root?(a=s(d,d.root,a.replyId))&&0<a.length:!1;return a},hideReplyForms:function(){return A(d)},removeReply:function(a){d.onEditorRemove();if(d.root){var b=s(d,d.root,a.replyId);if(0<b.length){var c=b.prev(d.loadMorePreviousSelector);y(c)}y(b);z(d,a.replyId);d.newRepliesIndicatorRegistrar.decrement({replyId:a.replyId});a=void 0}else a=!1;return a},showReplyForm:function(a){return C(d,
a.replyId)},appendHeaderContent:function(a){d.headerContainer.append(a)},showLoading:function(){d.container.append('<span class="ui-loading" data-width="48" data-height="48"></span>')}}}},jQuery,window);r("plugin.evolutionThreadReplies.utility",function(b,e,g){var m={throttle:function(b,f){var d,g;return function(){var a=this,c=(new Date).getTime(),k=arguments;d&&d+(f||50)>c?(e.clearTimeout(g),g=e.setTimeout(function(){d=c;b.apply(a,k)},f||50)):(d=c,b.apply(a,k))}},debounce:function(b,e,d){var g;
return function(){var a=this,c=arguments;d&&!g&&d.apply(a,c);clearTimeout(g);g=null;g=setTimeout(function(){b.apply(a,c);clearTimeout(g);g=null},e||10)}},determineInsertionIndex:function(b,e,d,g){if(null==b||0===b.length||null===e)return 0;var a=0,c=b.length,k,m;k=d(e,b[a]);m=c-1===a?k:d(e,b[c-1]);if(0>k)return a;if(0===k)return g&&g.equivalentBefore?a:a+1;if(0<m)return c;if(0===m)return g&&g.equivalentBefore?c-1:c;for(;a<c;){k=Math.floor((a+c)/2);m=d(b[k],e);if(0===m)return g&&g.equivalentBefore?
k:k+1;0>m?a=k+1:c=k}return a},isPartiallyVisible:function(g,f,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():f.getBoundingClientRect();return 0<l.top-d&&l.top+d<=(e.innerHeight||document.documentElement.clientHeight)||0<l.bottom-d&&l.bottom+d<=(e.innerHeight||document.documentElement.clientHeight)}g=b(g);l=f.offset().top;f=l+f.height();var a=g.offset().top;g=a+g.height();return l+d>=a&&l-d<=g||f-d<=g&&f+
d>=a},isFullyVisible:function(g,f,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():f.getBoundingClientRect();return 0<l.top-d&&l.top+d<=(e.innerHeight||document.documentElement.clientHeight)&&0<l.bottom-d&&l.bottom+d<=(e.innerHeight||document.documentElement.clientHeight)}g=b(g);l=f.offset().top;f=l+f.height();var a=g.offset().top;g=a+g.height();return l+d>=a&&f-d<=g},isBottomVisible:function(g,f,d){d=d||
0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():f.getBoundingClientRect();return 0<l.bottom-d&&l.bottom+d<=(e.innerHeight||document.documentElement.clientHeight)}g=b(g);l=g.scrollTop();g=l+g.height();f=f.offset().top+f.height();return f-d<=g&&f+d>=l},isTopVisible:function(g,f,d){d=d||0;if(g==document||g instanceof jQuery&&(g.get(0)==document||g.is("body"))){var l=f instanceof jQuery?f.get(0).getBoundingClientRect():
f.getBoundingClientRect();return 0<l.top-d&&l.top+d<=(e.innerHeight||document.documentElement.clientHeight)}g=b(g);l=g.scrollTop();g=l+g.height();f=f.offset().top;return f+d<=g&&f-d>=l},scrollToElementIfNotVisible:function(e,f,d,g){d=d||0;g=g||100;m.isFullyVisible(e,f,d)||(e=b(e),e.get(0)==document&&(e=b("html, body")),e.stop().animate({scrollTop:f.offset().top-d},g))}};return m},jQuery,window);r("plugin.evolutionThreadReplies.votersPopup",function(b,e,g){var m={votersTemplate:' <% if(voters && voters.length > 0) { %> \t<% foreach(voters, function(voter) { %> \t\t<li class="content-item"> \t\t\t<div class="full-post-header"></div> \t\t\t<div class="full-post"> \t\t\t\t<span class="avatar"> \t\t\t\t\t<a href="<%: voter.profileUrl %>"  class="internal-link view-user-profile"> \t\t\t\t\t\t<% if(voter.avatarHtml) { %> \t\t\t\t\t\t\t<%= voter.avatarHtml %> \t\t\t\t\t\t<% } else { %> \t\t\t\t\t\t\t<img src="<%: voter.avatarUrl %>" alt="" border="0" width="32" height="32" style="width:32px;height:32px" /> \t\t\t\t\t\t<% } %> \t\t\t\t\t</a> \t\t\t\t</span> \t\t\t\t<span class="user-name"> \t\t\t\t\t<a href="<%: voter.profileUrl %>" class="internal-link view-user-profile"><%= voter.displayName %></a> \t\t\t\t</span> \t\t\t</div> \t\t\t<div class="full-post-footer"></div> \t\t</li> \t<% }); %> <% } else { %> \t<li> \t\t<span class="content"><%= noVotesText %></span> \t</li> <% } %>',
votersPopupTemplate:' <div class="who-likes-list">      <div class="content-list-header"></div>      <ul class="content-list"><%= voters %></ul>      <div class="content-list-footer"></div>      <% if(hasMorePages) { %>          <a href="#" class="show-more"><%= showMoreText %></a>     <% } %>  </div> ',noVotesText:"No Votes",delegatedSelector:".votes .current",modalTitleText:"",modalShowMoreText:"More",loadVoters:function(b){}};return function(e){var f=b.extend({},m,e||{}),d=b.extend({},m,e||{}),
g=b.telligent.evolution.template.compile(d.votersTemplate),a=b.telligent.evolution.template.compile(d.votersPopupTemplate),c=function(a,c,d){f.loadVoters({replyId:a.replyid,pageIndex:c}).then(function(a){b.telligent.evolution.batch(function(){b.each(a.Users,function(a,c){b.telligent.evolution.get({url:b.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/ui/image.json",data:{url:c.AvatarUrl,maxWidth:32,maxHeight:32,resizeMethod:"ZoomAndCrop"}}).then(function(a){c.userAvatarHtml=a.Html})})}).then(function(){d({voters:b.map(a.Users,
function(a){return{displayName:a.DisplayName,profileUrl:a.ProfileUrl,avatarHtml:a.userAvatarHtml}}),hasMorePages:(a.PageIndex+1)*a.PageSize<a.TotalCount})})})},k=function(e,f){var k=0,h=b(g(b.extend(e,{noVotesText:d.noVotesText||m.noVotesText}))),n=b.telligent.evolution.ui.data(b(f)),s=b(a({voters:h,hasMorePages:e.hasMorePages,showMoreText:d.modalShowMoreText})),v=s.find("ul"),t=s.find(".show-more");v.html(h);t.on("click",function(a){a.preventDefault();k++;c(n,k,function(a){v.append(g(a));a.hasMorePages?
t.show():t.hide();v.scrollTop(v[0].scrollHeight)})});b.glowModal({title:d.modalTitleText,html:s,width:450,height:"100%"})};return{handleVoterPopupRequests:function(a){b(a.container).on("click",d.delegatedSelector,function(a){a.preventDefault();var d=b(this);a=b.telligent.evolution.ui.data(b(d));c(a,0,function(a){k(a,d)});return!1})}}}},jQuery,window);r("plugin.evolutionTip",["module.html"],function(b,e,g,m){function n(b,g){f();for(var m=e(b),h=["data-"+g.attribute,"title","alt"],n,s,v=0;v<h.length;v++){n=
h[v];var t=m.attr(n);if(t&&0<e.trim(t).length){s=e("<div>"+(t||"")+"</div>").text();break}}s&&0!=s.length&&(d={attribute:n,content:s,element:m,options:g,ui:e(g.template({content:s})).css({position:"absolute",top:-500,left:-500}).appendTo("body")},"title"!=d.attribute&&"alt"!=d.attribute||d.element.attr(d.attribute,""),s=e(window),n=e(document).scrollTop(),h=m.offset(),targetWidth=m.outerWidth(),targetHeight=m.outerHeight(),windowWidth=s.outerWidth(),windowHeight=s.outerHeight(),tipWidth=d.ui.outerWidth(),
tipHeight=d.ui.outerHeight(!0),g.horizontal?m=g.horizontal:(m=c.center,h.left-tipWidth/2<=a?m=c.left:windowWidth-(h.left+targetWidth+tipWidth/2)<=a&&(m=c.right)),g.vertical?s=g.vertical:(s=k.above,targetHeight+h.top-tipHeight-n<=a&&(s=k.below)),n=m==c.right?h.left+targetWidth-tipWidth:m==c.left?h.left:h.left+targetWidth/2-tipWidth/2,h=s==k.above?h.top-tipHeight:h.top+targetHeight,d.options.shown=!0,d.ui.addClass(s).addClass(m).css({left:n,top:h,"z-index":1E6}),clearInterval(l),l=setInterval(function(){d&&
d.element&&d.element.is(":visible")||f()},200))}function f(){d&&(d.ui.remove(),"title"!=d.attribute&&"alt"!=d.attribute||d.element.attr(d.attribute,b.encode(d.content)),d.options.shown=!1);clearInterval(l)}var d,l,a=30,c={left:"left",center:"center",right:"right"},k={above:"above",below:"below"};e.fn.evolutionTip=function(a){var b=e.extend({},e.fn.evolutionTip.defaults,a||{});b.template=e.telligent.evolution.template.compile(b.template);return this.off("._evolutionTip").on("mouseenter._evolutionTip mouseover._evolutionTip focus._evolutionTip",
function(a){a.originalEvent&&(a.originalEvent._evolutionTipHandled||b.shown||n(this,b),a.originalEvent._evolutionTipHandled=!0)}).on("mouseleave._evolutionTip blur._evolutionTip",function(){b.shown&&f()})};e.fn.evolutionTip.hide=function(){f()};e.fn.evolutionTip.defaults={template:'<div class="tip"><%: content %></div>',attribute:"tip"};return{}},jQuery,window);r("plugin.evolutionToggleLink",function(b,e,g){var m={val:function(d){if(void 0===d){var e=this.data("evolutionToggleLink");return e?e.settings.val:
!1}return this.each(function(){var a=b(this).data("evolutionToggleLink");a&&(a.settings.val=d,a.internal.processing=!1,f(a))})}},n=function(d){return this.each(function(){var e={settings:b.extend({},b.fn.evolutionToggleLink.defaults,d||{}),internal:{state:b(this),processing:!1}};e.internal.state.data("evolutionToggleLink",e).on("click",function(a){!e.internal.processing&&e.settings.changeState&&(e.internal.processing=!0,f(e),e.settings.changeState(!e.settings.val));return!1});f(e)})},f=function(b){b.internal.processing?
b.internal.state.attr("class",b.settings.processingCssClass).attr("title",b.settings.processingTitle).html(b.settings.processingHtml):b.settings.val?b.internal.state.attr("class",b.settings.onCssClass).attr("title",b.settings.onTitle).html(b.settings.onHtml):b.internal.state.attr("class",b.settings.offCssClass).attr("title",b.settings.offTitle).html(b.settings.offHtml)};b.fn.evolutionToggleLink=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&
d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionToggleLink");else return n.apply(this,arguments)};b.extend(b.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:!1}});return{}},jQuery,window);r("plugin.evolutionTokenTextBox",function(b,e,g){function m(a){var b=a.internal.textbox.val(),d="",e=0;a.internal.tokens.sort(function(a,b){return a.start-b.start});
for(var f=0;f<a.internal.tokens.length;f++){var g=a.internal.tokens[f];g.start>e&&(d+=b.substr(e,g.start-e));d+=g.value;e=g.stop}e<b.length&&(d+=b.substr(e));a.internal.state.val(d);a.internal.lastLength=a.internal.textbox.val().length;a.internal.textbox.evolutionHighlight({ranges:a.internal.tokens})}function n(a){var b=a.internal.textbox.get(0);if(b.selectionStart)return b.selectionStart;if(document.selection){a=document.selection.createRange();if(null===a)return 0;var b=b.createTextRange(),d=b.duplicate();
b.moveToBookmark(a.getBookmark());d.setEndPoint("EndToStart",b);return d.text.length}return 0}function f(a){for(var b=/\$\{token:([0-9a-f]{8,8}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{4,4}-[0-9a-f]{12,12})(?::([^}]*))?\}/gi,e,f=0,g="",l=a.internal.state.val(),h=[],n=0;e=b.exec(l);){var s=e.index;s>f&&(g+=l.substr(f,s-f));f=e[0];s=d[f];!s&&a.settings.previewToken&&(s=a.settings.previewToken(f));s||(s=f);h.push({start:e.index-n,stop:e.index-n+s.length,value:f,text:s,className:a.settings.highlightClassName});
n+=f.length-s.length;g+=s;f=b.lastIndex}f<l.length&&(g+=l.substr(f));a.internal.tokens=h;a.internal.textbox.val(g);m(a)}var d={},l={init:function(a){return b(this).each(function(){a.tokenPlaceholders&&(d=b.extend({},d,a.tokenPlaceholders),delete a.tokenPlaceholders);var c={settings:b.extend({},b.fn.evolutionTokenTextBox.defaults,a),internal:{state:b(this),textbox:b(this).clone().removeAttr("id").removeAttr("name").css("box-sizing","content-box"),lastLength:b(this).val().length,tokens:[]}};c.internal.state.after(c.internal.textbox).hide().data("_evolutionTokenTextBox",
c);c.internal.textbox.on("evolutionRangeClick",function(a,f){e.evolutionInsertEditTokenOptions={dataTypeIds:c.settings.tokenDataTypeIds,token:f.value,save:function(a,e){d[a]=e;var h=c.internal.textbox.val(),h=h.substr(0,f.start)+e+h.substr(f.stop);c.internal.textbox.val(h);var g=f.stop,k=e.length-f.text.length;f.stop=f.start+e.length;f.value=a;f.text=e;b.each(c.internal.tokens,function(){this.start>=g&&(this.start+=k,this.stop+=k)});m(c)},del:function(){var a=c.internal.textbox.val(),a=a.substr(0,
f.start)+a.substr(f.stop),d=f.stop-f.start,e=f.start;c.internal.textbox.val(a);c.internal.tokens=b.grep(c.internal.tokens,function(a){return a.start!=e});b.each(c.internal.tokens,function(){this.start>=e&&(this.start-=d,this.stop-=d)});m(c)}};b.glowModal(c.settings.insertEditTokenUrl,{width:c.settings.insertEditTokenModalWidth,height:c.settings.insertEditTokenModalHeight})});c.internal.textbox.evolutionResize().on("evolutionResize",function(){c.internal.textbox.evolutionHighlight("resize",c.internal.textbox.outerWidth(),
c.internal.textbox.outerHeight())});c.internal.textbox.on("keydown",function(a){var d=n(c),e=!1,f=null;(37>a.which||40<a.which)&&b.each(c.internal.tokens,function(){(this.start<d||this.start==d&&46==a.which)&&(this.stop>d||this.stop==d&&8==a.which)&&(e=!0,f=this)});if(e){if(8==a.which||46==a.which){var h=c.internal.textbox.val(),h=h.substr(0,f.start)+h.substr(f.stop),g=f.stop-f.start,l=f.start;c.internal.textbox.val(h);c.internal.tokens=b.grep(c.internal.tokens,function(a){return a.start!=l});b.each(c.internal.tokens,
function(){this.start>=l&&(this.start-=g,this.stop-=g)});m(c);h=c.internal.textbox.get(0);h.createTextRange?(h=h.createTextRange(),h.move("character",d>l?d-g:d),h.select()):h.selectionStart&&(h.focus(),h.setSelectionRange(d>l?d-g:d,d>l?d-g:d))}a.preventDefault();a.stopPropagation();return!1}});c.internal.textbox.on("keyup",function(){var a=c.internal.textbox.val().length;if(a!=c.internal.lastLength){var d=a-c.internal.lastLength;c.internal.lastLength=a;var e=n(c);b.each(c.internal.tokens,function(){this.start>=
e-1&&(this.start+=d,this.stop+=d)});m(c)}});f(c)})},val:function(a){if(a===g){var c=b(this).data("_evolutionTokenTextBox");return c?c.internal.state.val():""}return b(this).each(function(){var c=b(this).data("_evolutionTokenTextBox");c&&(c.internal.state.val(a),f(c))})},insertToken:function(){return b(this).each(function(){var a=b(this).data("_evolutionTokenTextBox");a&&(e.evolutionInsertEditTokenOptions={dataTypeIds:a.settings.tokenDataTypeIds,token:"",save:function(c,e){d[c]=e;var f=n(a);a.internal.textbox.val(a.internal.textbox.val().substr(0,
f)+e+a.internal.textbox.val().substr(f));b.each(a.internal.tokens,function(){this.start>=f&&(this.start+=e.length,this.stop+=e.length)});a.internal.tokens.push({start:f,stop:f+e.length,value:c,text:e,className:a.settings.highlightClassName});m(a)},del:function(){}},b.glowModal(a.settings.insertEditTokenUrl,{width:a.settings.insertEditTokenModalWidth,height:a.settings.insertEditTokenModalHeight}))})},tokenDataTypeIds:function(a){if(a===g){var c=b(this).data("_evolutionTokenTextBox");return c?c.settings.tokenDataTypeIds:
[]}return b(this).each(function(){var c=b(this).data("_evolutionTokenTextBox");c&&(c.settings.tokenDataTypeIds=a||[])})}};b.fn.evolutionTokenTextBox=function(a){if(l[a])return l[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.evolutionHighlight");else return l.init.apply(this,arguments)};b.fn.evolutionTokenTextBox.defaults={highlightClassName:"token-highlight",insertEditTokenUrl:"",previewToken:function(a){return a},insertEditTokenModalWidth:400,
insertEditTokenModalHeight:500,tokenDataTypeIds:[],tokenPlaceholders:null};return{}},jQuery,window);r("plugin.evolutionTransform",function(b,e,g){function m(){var a=(document.body||document.documentElement).style,b="Moz webkit Webkit Khtml O ms".split(" ");if("string"==typeof a.transition)return!0;for(var c=0;c<b.length;c++)if("string"==typeof a[b[c]+"Transition"])return!0;return!1}function n(v,t){if(!this||0==this.length)return this;var x=v||{};t=t||{};var y=[],z,A,C=null,B=null,F=null,H=null;v=
[];null===w&&(w=m());this.each(function(){if(3!==this.nodeType){var m=b(this),J=!1,L=null,N=function(){e.clearTimeout(L);J||(J=!0,m.css({transition:"all 0s"}).off(".evolutionTransform"),t.complete&&t.complete())};m.off(".evolutionTransform").on("transitionend.evolutionTransform webkitTransitionEnd.evolutionTransform oTransitionEnd.evolutionTransform MSTransitionEnd.evolutionTransform",function(){N()});if(!w)return x.x&&(x.left=x.x),x.y&&(x.y=x.y),m.css(x);for(var G in n.defaults)t[G]||(t[G]=n.defaults[G]);
for(var E in x)G=x[E],E===f||E===l?(z=G,delete x[E]):E===d||E===a?(A=G,delete x[E]):E===c?(C=G,delete x[E]):E===k?(B=G,delete x[E]):E===p?(F=G,delete x[E]):E===r?(H=G,delete x[E]):(E==q?0===G?x[E]=1E-5:1===G&&(x[E]=0.99999):"number"===typeof G&&0==G%1&&(x[E]=G+"px"),y[y.length]=E);if(z!=g||A!=g)v[v.length]="translate3d("+(z||0)+"px, "+(A||0)+"px, 0px)";C!=g&&(v[v.length]="rotateZ("+C+"deg)");B!=g&&(v[v.length]="rotateX("+B+"deg)");F!=g&&(v[v.length]="rotateY("+F+"deg)");H!=g&&(v[v.length]="scale("+
H+")");0<v.length&&(G=s+"transform",mergedTransforms=v.join(" "),y[y.length]=G,x[G]=mergedTransforms,x.transform=mergedTransforms);G=b.fn.evolutionTransform.animationEnabled?t.duration/1E3+"s "+t.easing:"";transition=y.join(" "+G+", ")+" "+G;b.noop(this.offsetHeight);if(F||B)h=h||b("body").get(0),h.style[s+"perspective"]=t.perspective,h.style.perspective=t.perspective;this.style[s+"transition"]=transition;this.style.transition=transition;for(E in x)this.style[E]=x[E];L=e.setTimeout(function(){N()},
t.duration+100)}});return this}var f="x",d="y",l="left",a="top",c="rotate",k="rotateX",p="rotateY",r="scale",q="opacity",h,w=null,s=function(){if(!("getComputedStyle"in window))return"";var a=window.getComputedStyle(document.documentElement,"");return"-"+(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1]+"-"}();n.defaults={duration:0,easing:"linear",perspective:250,complete:null};b.fn.evolutionTransform=n;b.fn.evolutionTransform.animationEnabled=!0;b.fn.evolutionTransform.accelerated=
function(){null===w&&(w=m());return w};return{}},jQuery,window);r("plugin.evolutionUserFileTextBox",function(b,e,g){var m={},n=1,f=function(d){return this.each(function(){var e={settings:b.extend({},b.fn.evolutionUserFileTextBox.defaults,d||{}),internal:{state:this,preview:null,select:null,remove:null}};b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"c"},success:function(a){e.internal.contextid=a.uploadContextId;e.internal.uploadurl=a.uploadUrl;a=b("<div></div>").attr("class",e.settings.cssClass);
e.internal.preview=b("<div></div>").attr("class",e.settings.previewCssClass);a.append(e.internal.preview);e.internal.select=b('<a href="#" class="upload"></a>').attr("id","userfiletextbox_"+(new Date).getTime()+"_"+n++).html(e.settings.selectText).glowUpload({fileFilter:null,uploadUrl:e.internal.uploadurl,renderMode:"link"}).on("glowUploadBegun",function(a){e.uploading=!0;e.internal.select.html("0%")}).on("glowUploadComplete",function(a,c){e.internal.select.html(e.settings.selectText);c&&0<c.name.length&&
b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"f",ContextId:e.internal.contextid,FileName:c.name},success:function(a){e.internal.state.value=a.url;e.uploading=!1;e.internal.preview.html(a.previewHtml).slideDown(100);e.internal.remove.show()}})}).on("glowUploadFileProgress",function(a,b){e.internal.select.html(b.percent+"%")});a.append(e.internal.select);e.internal.remove=b('<a href="#" class="remove" style="margin-left: 1em;"></a>').html(e.settings.removeText).on("click",function(){e.internal.preview.html("").slideUp(100);
e.internal.state.value="";e.internal.remove.hide();return!1}).hide();a.append(e.internal.remove);var c=b(e.internal.state).val();c?(e.internal.remove.show(),b.telligent.evolution.post({url:e.settings.endpoint,data:{m:"p",Url:c},success:function(a){e.internal.preview.html(a.previewHtml).slideDown(100)}})):e.internal.preview.html("").hide();b(e.internal.state).data("evolutionUserFileTextBox",e).before(a).hide()}})})};b.fn.evolutionUserFileTextBox=function(d){if(d in m)return m[d].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof d&&d)b.error("Method "+d+" does not exist on jQuery.fn.evolutionUserFileTextBox");else return f.apply(this,arguments)};b.extend(b.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",endpoint:""}});return{}},jQuery,window);r("plugin.validation",function(b,e,g){b.telligent||(b.telligent={});b.telligent.evolution||(b.telligent.evolution={});b.telligent.evolution.validation=
{registerExtensions:function(a){b.validator&&(b.validator.addMethod("passwordvalid",function(b,c){return this.optional(c)||b.match(a.passwordRegex)},a.passwordInvalidMessage),b.validator.addMethod("email",function(b,c){return this.optional(c)||b.match(RegExp(a.emailRegex))},a.emailInvalidMessage),b.validator.addMethod("url",function(c,d){return this.optional(d)||c.match(a.urlRegex)?!0:("http://"+c).match(a.urlRegex)?(b(d).val("http://"+c),!0):!1},a.urlInvalidMessage),b.validator.addMethod("emails",
function(b,c){for(var d=b.split(/[;,]/),e=!0,f=RegExp(a.emailRegex),g=0;g<d.length;g++)jQuery.trim(d[g]).match(f)||(e=!1);return this.optional(c)||e},a.emailsInvalidMessage),b.validator.addMethod("username",function(b,c){return this.optional(c)||b.match(a.usernameRegex)},a.usernameInvalidMessage),b.validator.addMethod("usernameexists",function(a,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=
this.settings.messages[c.name].usernameexists;this.settings.messages[c.name].usernameexists=e.message;d="string"==typeof d&&{url:d}||d;var f=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";d.url&&(f=d.url);if(e.old!==a){e.old=a;var g=this;this.startRequest(c);d=JSON.stringify({username:a||"",elementName:c.name});b.telligent.evolution.post({url:f,dataType:"json",contentType:"application/json; charset=utf-8",data:d,success:function(b){c=g.findByName(b.d.ElementName)[0];
g.settings.messages[c.name].usernameexists=e.originalMessage;var d=!0===b.d.IsValid;if(d){var f=g.formSubmitted;g.prepareElement(c);g.formSubmitted=f;g.successList.push(c);g.showErrors()}else f={},b=b.d.ErrorMessage||g.defaultMessage(c,"usernameexists"),f[c.name]=e.message="function"===typeof b?b(a):b,g.showErrors(f);e.valid=d;g.stopRequest(c,d)}});return"pending"}return this.pending[c.name]?"pending":e.valid},void 0),b.validator.addMethod("emailexists",function(a,c,d){if(this.optional(c))return"dependency-mismatch";
var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].emailexists;this.settings.messages[c.name].emailexists=e.message;d="string"==typeof d&&{url:d}||d;var f=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";d.url&&(f=d.url);if(e.old!==a){e.old=a;var g=this;this.startRequest(c);d=JSON.stringify({email:a||"",elementName:c.name});b.telligent.evolution.post({url:f,
dataType:"json",contentType:"application/json; charset=utf-8",data:d,success:function(b){c=g.findByName(b.d.ElementName)[0];g.settings.messages[c.name].emailexists=e.originalMessage;var d=!0===b.d.IsValid;if(d){var f=g.formSubmitted;g.prepareElement(c);g.formSubmitted=f;g.successList.push(c);g.showErrors()}else f={},b=g.customMessage(c.name,"emailexists")||b.d.ErrorMessage||g.defaultMessage(c,"emailexists"),f[c.name]=e.message="function"===typeof b?b(a):b,g.showErrors(f);e.valid=d;g.stopRequest(c,
d)}});return"pending"}return this.pending[c.name]?"pending":e.valid},void 0),b.validator.addMethod("groupnameexists",function(a,c,d){if(this.optional(c))return"dependency-mismatch";var e=encodeURIComponent(b.trim(a));if(0==e.length)return!0;var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].groupnameexists;this.settings.messages[c.name].groupnameexists=f.message;d=d.getParentId();e=JSON.stringify({groupName:e||
"",parentGroupId:d||"",elementName:c.name});if(f.old!==e){f.old=e;var g=this;this.startRequest(c);d=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";b.telligent.evolution.post({url:d,dataType:"json",contentType:"application/json; charset=utf-8",data:e,success:function(b){c=g.findByName(b.d.ElementName)[0];g.settings.messages[c.name].groupnameexists=f.originalMessage;var d=!0===b.d.IsValid;if(d){var e=g.formSubmitted;g.prepareElement(c);g.formSubmitted=
e;g.successList.push(c);g.showErrors()}else e={},b=b.d.ErrorMessage||g.defaultMessage(c,"groupnameexists"),e[c.name]=f.message="function"===typeof b?b(a):b,g.showErrors(e);f.valid=d;g.stopRequest(c,d)}});return"pending"}return this.pending[c.name]?"pending":f.valid},void 0),b.validator.addMethod("wikipageexists",function(a,c,d){if(this.optional(c))return"dependency-mismatch";var e=encodeURIComponent(b.trim(a));if(0==e.length)return!0;var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]=
{});f.originalMessage=this.settings.messages[c.name].wikipageexists;this.settings.messages[c.name].wikipageexists=f.message;d=JSON.stringify({pageName:e||"",wikiId:d.wikiId||"",pageId:d.pageId||"",parentPageId:d.parentPageId()||"",elementName:c.name});if(f.old!==d){f.old=d;var g=this;this.startRequest(c);e=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";b.telligent.evolution.post({url:e,dataType:"json",contentType:"application/json; charset=utf-8",
data:d,success:function(b){c=g.findByName(b.d.ElementName)[0];g.settings.messages[c.name].wikipageexists=f.originalMessage;var d=!0===b.d.IsValid;if(d){var e=g.formSubmitted;g.prepareElement(c);g.formSubmitted=e;g.successList.push(c);g.showErrors()}else e={},b=b.d.ErrorMessage||g.defaultMessage(c,"wikipageexists"),e[c.name]=f.message="function"===typeof b?b(a):b,g.showErrors(e);f.valid=d;g.stopRequest(c,d)}});return"pending"}return this.pending[c.name]?"pending":f.valid},void 0),b.validator.addMethod("mailinglistnameexists",
function(a,c,d){if(""==b.trim(a))return this.optional(c);var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].mailinglistnameexists;this.settings.messages[c.name].mailinglistnameexists=e.message;d="string"==typeof d&&{url:d}||d;var f=b.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";d.url&&(f=d.url);var g;d.id&&(g=d.id);if(e.old!==a){e.old=a;var k=this;
this.startRequest(c);d=JSON.stringify({mailingListName:a||"",existingMailingListId:g||"",elementName:c.name});b.telligent.evolution.post({url:f,dataType:"json",contentType:"application/json; charset=utf-8",data:d,success:function(b){c=k.findByName(b.d.ElementName)[0];k.settings.messages[c.name].mailinglistnameexists=e.originalMessage;var d=!0===b.d.IsValid;if(d){var f=k.formSubmitted;k.prepareElement(c);k.formSubmitted=f;k.successList.push(c);k.showErrors()}else f={},b=b.d.ErrorMessage||k.defaultMessage(c,
"mailinglistnameexists"),f[c.name]=e.message="function"===typeof b?b(a):b,k.showErrors(f);e.valid=d;k.stopRequest(c,d)}});return"pending"}return this.pending[c.name]?"pending":e.valid},void 0),b.validator.addMethod("pattern",function(a,b,c){return this.optional(b)||null!=a.match(c||/.*/)},void 0))}};var m={addField:function(c,d,e,g){var k=this.data("evolutionValidation");if(k&&"undefined"!==typeof k){var l=b(c);f(l,this,!0);k.internal.fields[k.internal.fields.length]={selector:c,messageSelector:e,
isValid:!0,context:g,initialized:!1};l.data("_evolutionValidation",k).data("_evolutionValidationFieldIndex",k.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",d);try{l.on("input",function(){if(k.internal.hasAttemptedSubmit){window.clearTimeout(k.internal.keyPressValidationHandle);var c=this;k.internal.keyPressValidationHandle=window.setTimeout(function(){a(k,b(c))},499)}})}catch(m){}l.on("blur",function(){a(k,b(this))})}return this},addCustomValidation:function(a,
b,c,d,e){var f=this.data("evolutionValidation");if(f&&"undefined"!==typeof f){var g=f.internal.customValidations.length;f.internal.customValidations[g]={id:a,validationFunction:b,message:c,messageSelector:d,isValid:!0,context:e,initialized:!1};return function(){return k(f,g)}}},isValid:function(){var c=this.data("evolutionValidation");if(!c)return this;for(var d=0;d<c.internal.fields.length;d++)c.internal.fields[d].initialized||a(c,b(c.internal.fields[d].selector),!0);for(d=0;d<c.internal.customValidations.length;d++)c.internal.customValidations[d].initialized||
k(c,d);return l(c)},validate:function(){var c=this.data("evolutionValidation");if(!c)return this;for(var d=0;d<c.internal.fields.length;d++)a(c,b(c.internal.fields[d].selector),!0);for(d=0;d<c.internal.customValidations.length;d++)k(c,d);(d=this.closest("form").data("_evolutionValidation"))&&d.showErrors();return m.isValid.apply(b(c.internal.state),[])},validateField:function(c){try{var d=this.data("evolutionValidation"),e=a(d,b(c),!0),f=this.closest("form").data("_evolutionValidation");f&&f.showErrors();
return e}catch(g){}},validateCustom:function(a){var b=this.data("evolutionValidation");if(!b)return this;for(var c=0;c<b.internal.customValidations.length;c++)if(b.internal.customValidations[c].id==a)return k(b,c);return!0},reset:function(){var a=this.data("evolutionValidation");if(!a)return this;for(var c=0;c<a.internal.customValidations.length;c++)b(a.internal.customValidations[c].messageSelector).hide(),a.internal.customValidations[c].isValid=!0,a.internal.customValidations[c].initialized=!1;for(c=
0;c<a.internal.fields.length;c++)b(a.internal.fields[c].messageSelector).hide(),a.internal.fields[c].errorMessage=null,a.internal.fields[c].isValid=!0,a.internal.fields[c].initialized=!1,b(a.internal.fields[c].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$");a.internal.submitButtonClicked=!1;a.internal.hasAttemptedSubmit=!1;window.clearTimeout(a.internal.initialValidationHandle);a.internal.initialValidationHandle=window.setTimeout(function(){d(a)},249)}},n=function(a){return this.each(function(){var c=
{settings:b.extend({},b.fn.evolutionValidation.defaults,a||{}),internal:{state:this,submitButtonClicked:!1,hasAttemptedSubmit:!1,fields:[],customValidations:[],initialValidationHandle:null}};b(this).data("evolutionValidation",c);if(!b.fn.validate)throw"Validation API is not available";f(this,this);b(this).on("click",function(a){return p(c,a)});this._isValid=function(){return p(c,{})};window.clearTimeout(c.internal.initialValidationHandle);c.internal.initialValidationHandle=window.setTimeout(function(){d(c)},
499)})},f=function(a,c,d){a=b(a).closest("form");if(0<a.length){var e=null;null==a.data("_evolutionValidation")&&(d=a.validate({errorPlacement:function(a,c){var d=b(c).data("_evolutionValidation");if(d){var e=parseInt(b(c).data("_evolutionValidationFieldIndex"),10);0>e||e>=d.internal.fields.length||(d.internal.hasAttemptedSubmit?b(d.internal.fields[e].messageSelector).html(a).show():d.internal.fields[e].errorMessage=a)}},highlight:function(a,c,d){if(c=b(a).data("_evolutionValidation"))if(d=l(c),a=
b(a).data("_evolutionValidationFieldIndex"),!(0>a||a>=c.internal.fields.length)&&(c.internal.fields[a].isValid=!1,c.internal.fields[a].initialized=!0,c.internal.hasAttemptedSubmit&&(b(c.internal.fields[a].messageSelector).show(),(c.internal.submitButtonClicked||d)&&c.settings.onValidated)))c.settings.onValidated(!1,c.internal.submitButtonClicked,c.internal.fields[a].context)},unhighlight:function(a,c,d){if(c=b(a).data("_evolutionValidation"))if(a=b(a).data("_evolutionValidationFieldIndex"),!(0>a||
a>=c.internal.fields.length)&&(c.internal.fields[a].isValid=!0,c.internal.fields[a].initialized=!0,c.internal.hasAttemptedSubmit&&(b(c.internal.fields[a].messageSelector).hide(),l(c)&&c.settings.onValidated)))c.settings.onValidated(!0,c.internal.submitButtonClicked,c.internal.fields[a].context)},onsubmit:!1,onkeyup:!1,onfocusout:!1}),a.data("_evolutionValidation",d),a.on("submit",function(){if(null==e||10<(new Date).getTime()-e)return e=(new Date).getTime(),b(c).trigger("click"),!1}))}else if(!0===
d)throw"Validated inputs must exist within form elements.";},d=function(a){window.clearTimeout(a.internal.initialValidationHandle);try{var e=!1;if(!0===a.settings.validateOnLoad)e=!0;else if(!1!==a.settings.validateOnLoad)for(var f=0;f<a.internal.fields.length;f++){var g=b(a.internal.fields[f].selector),k=g.attr("type");if("checkbox"!=k&&"radio"!=k&&"select"!=k&&"submit"!=k&&"button"!=k&&"reset"!=k&&""!=c(a,g)){e=!0;break}}if(e){a.internal.hasAttemptedSubmit=!0;var l=m.validate.apply(b(a.internal.state));
r(a);if(a.settings.onValidated)a.settings.onValidated(l,!1,null)}else if(!a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,!1,null)}catch(n){a.internal.initialValidationHandle=window.setTimeout(function(){d(a)},499)}},l=function(a){for(var b=0;b<a.internal.fields.length;b++)if(!a.internal.fields[b].isValid)return!1;for(b=0;b<a.internal.customValidations.length;b++)if(!a.internal.customValidations[b].isValid)return!1;return!0},a=function(a,d,e){var f=c(a,d);if(f!=d.data("_evolutionValidationOldValue")||
!0===e)return d.data("_evolutionValidationOldValue",f),e=d.valid(),d=d.data("_evolutionValidationFieldIndex"),0<=d&&d<a.internal.fields.length&&((a.internal.fields[d].isValid=e)?b(a.internal.fields[d].messageSelector).hide():b(a.internal.fields[d].messageSelector).show()),e;d=d.data("_evolutionValidationFieldIndex");return 0>d||d>=a.internal.fields.length?!1:a.internal.fields[d].isValid},c=function(a,b){return"checkbox"==b.attr("type")||"radio"==b.attr("type")?b.get(0).checked?b.val():"":b.val()},
k=function(a,c){if(0>c||c>=a.internal.customValidations.length)return!0;var d=a.internal.customValidations[c].validationFunction();a.internal.customValidations[c].initialized=!0;if(!0===d){a.internal.customValidations[c].isValid=!0;b(a.internal.customValidations[c].messageSelector).hide();if(l(a)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!0,a.internal.submitButtonClicked,a.internal.customValidations[c].context);return!0}d=l(a);a.internal.customValidations[c].isValid=
!1;a.internal.hasAttemptedSubmit&&b(a.internal.customValidations[c].messageSelector).html(a.internal.customValidations[c].message).show();if((a.internal.submitButtonClicked||d)&&a.internal.hasAttemptedSubmit&&a.settings.onValidated)a.settings.onValidated(!1,a.internal.submitButtonClicked,a.internal.customValidations[c].context);return!1},p=function(a,c){var d=!a.internal.hasAttemptedSubmit;a.internal.hasAttemptedSubmit=!0;a.internal.submitButtonClicked=!0;m.validate.apply(b(a.internal.state),[]);
var e=m.isValid.apply(b(a.internal.state),[]);d&&!e&&r(a);d=!0;e&&a.settings.onSuccessfulClick&&(d=a.settings.onSuccessfulClick(c));a.internal.submitButtonClicked=!1;!e&&c&&(c.cancelBubble=!0,c.returnValue=!1);return e&&!1!==d},r=function(a){for(var c=0;c<a.internal.fields.length;c++)a.internal.fields[c].isValid||null==a.internal.fields[c].errorMessage||(b(a.internal.fields[c].messageSelector).html(a.internal.fields[c].errorMessage).show(),a.internal.fields[c].errorMessage=null);for(c=0;c<a.internal.customValidations.length;c++)a.internal.customValidations[c].isValid||
b(a.internal.customValidations[c].messageSelector).html(a.internal.customValidations[c].message).show()};b.fn.evolutionValidation=function(a){if(a in m)return m[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.fn.evolutionValidation");else return n.apply(this,arguments)};b.extend(b.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null}});e.Telligent_Validation=function(a,c){this._jq=
b(a);c.onValidatedFunction&&(c.onValidated=c.onValidatedFunction);c.onSuccessfulClickFunction&&(c.onSuccessfulClick=c.onSuccessfulClickFunction);this._jq.evolutionValidation(c)};Telligent_Validation.prototype.AddField=function(a,b,c,d){this._jq.evolutionValidation("addField",a,b,c,d)};Telligent_Validation.prototype.AddCustomValidation=function(a,b,c,d,e){return this._jq.evolutionValidation("addCustomValidation",a,b,c,d,e)};Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};
Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};return{}},jQuery,window);r("plugin.evolutionVote",function(b,e,g){var m=function(a,b,d){if(a.internal.isInitialized&&!a.settings.isReadOnly)if(a.internal.userVote=d,a.settings.allowMultipleSelections||
(a.settings.isReadOnly=!0),a.internal.savingValue=!0,null===b||0==d)a.settings.onDeleteVote();else a.settings.onVote(b,d)},n=function(a){var b=parseInt(a);return isNaN(b)?!0===a||"true"==a?1:!1===a||"false"==a?-1:0:b},f=function(a){return this.each(function(){a&&a.userVote!=g&&(a.userVote=n(a.userVote));var e={settings:b.extend({},b.fn.evolutionUpDownVoting.defaults,a||{}),internal:{state:b(this)}};b(this).data("evolutionUpDownVoting_context",e);e.internal.state.addClass(e.settings.voteClass).css("white-space",
"nowrap").find("a").off(".evolutionUpDownVoting").empty().end();e.internal.state.empty();"true"==e.settings.userVote?e.settings.userVote=!0:"false"==e.settings.userVote&&(e.settings.userVote=!1);e.settings.isReadOnly&&e.internal.state.addClass(e.settings.readOnlyClass);d(e,!0);var f="",l="neutral";0<e.settings.score?(l="positive",f="+"):0>e.settings.score&&(l="negative");f='<div class="vote-score '+l+'">'+f+e.settings.score+"</div>";e.settings.canViewVotes&&(f='<a class="ui-tip" title="'+e.settings.viewVotesMessage+
'" href='+e.settings.voteUrl+">"+f+"</a>");e.internal.state.append('<div class="score-summary">'+f+"</div>");d(e,!1)})},d=function(a,d){(function(){if(!a.settings.isUserRegistered||!a.settings.isUserGroupMember||!1!=d||a.settings.canUserDownVote)if(!a.settings.isUserRegistered||!a.settings.isUserGroupMember||!0!=d||a.settings.canUserUpVote){var e,f="",f=l(a,d);e=!a.settings.isUserRegistered||!0==d&&a.settings.canUserUpVote||!1==d&&a.settings.canUserDownVote?b('<a href="#" >'+f+"</a>").css({textDecoration:"none"}).attr("title",
f).addClass("votingenabled ui-tip"):b('<a disabled="disabled">'+f+"</a>").addClass(a.settings.readOnlyClass).attr("title",f).addClass("votingdisabled ui-tip");e.addClass("vote");1==d?e.addClass("upvote"):e.addClass("downvote");if(!a.settings.isReadOnly)if(!a.settings.isUserRegistered)e.attr("href",a.settings.loginUrl);else if(!0==d&&a.settings.canUserUpVote||!1==d&&a.settings.canUserDownVote)if(a.settings.userVote&&0<a.settings.userVote==d)0<a.settings.userVote==d&&(e.data("rating-value",d).addClass("selected").on("click.evolutionUpDownVoting",
function(b){a.settings.allowMultipleVotes?(b=a.settings.userVote+(d?1:-1),m(a,e.data("rating-value"),b)):m(a,null,0);return!1}),1<Math.abs(a.settings.userVote)?(f=Math.abs(a.settings.userVote),9<f&&(f="9+"),e.addClass("multiple").append('<span class="multiple-value">'+f+"</span>")):e.removeClass("multiple"));else e.data("rating-value",d).on("click.evolutionUpDownVoting",function(b){b=d?1:-1;a.settings.allowMultipleVotes&&(b+=a.settings.userVote);m(a,e.data("rating-value"),b);return!1});a.internal.state.append(e)}})();
a.internal.isInitialized=!0},l=function(a,b){if(a.settings.isReadOnly)return a.settings.readOnlyMessage;if((!b||a.settings.canUserUpVote)&&(b||a.settings.canUserDownVote)||a.settings.isUserRegistered){if(b&&!a.settings.canUserUpVote||!b&&!a.settings.canUserDownVote)return a.settings.isUserGroupMember?a.settings.noPermissionMessage:a.settings.notGroupMemberMessage;if(0<a.settings.userVote&&b||0>a.settings.userVote&&!b)return a.settings.allowMultipleVotes?b?a.settings.voteUpAgainMessage:a.settings.voteDownAgainMessage:
a.settings.deleteMessage;if(b&&0==a.settings.userVote)return a.settings.voteUpMessage;if(b&&0>a.settings.userVote)return a.settings.allowMultipleVotes?a.settings.removeDownVoteMessage:a.settings.switchToUpVoteMessage;if(!b&&0==a.settings.userVote)return a.settings.voteDownMessage;if(!b&&0<a.settings.userVote)return a.settings.allowMultipleVotes?a.settings.removeUpVoteMessage:a.settings.switchToDownVoteMessage}else return a.settings.loginMessage;return""},a={val:function(a){var b=this.data("evolutionUpDownVoting_context");
if(null!==b){if("undefined"!==typeof a)return b.internal.yesVotes=a;a="undefined"!==typeof b.internal.yesVotes?b.internal.yesVotes:b.settings.yesVotes;return a}return 0},readOnly:function(a){var b=this.data("evolutionUpDownVoting_context");if(null!==b)if("undefined"!==typeof a)(b.settings.isReadOnly=a)?b.internal.state.find("a").css({cursor:"default"}):b.internal.state.find("a").css({cursor:"pointer"});else return b.settings.isReadOnly;return!0},option:function(a,d){if("object"===typeof a)return this.each(function(){var d=
b(this).data("evolutionUpDownVoting_context");null!=d&&(a.userVote&&(a.userVote=n(a.userVote)),d.settings=b.extend({},d.settings,a),f.apply(b(this),[d.settings]))});if("undefined"!==typeof a&&"undefined"!==typeof d)return this.each(function(){var e=b(this).data("evolutionUpDownVoting_context");null!=e&&("userVote"==a&&(d=n(d)),e.settings[a]=d,f.apply(b(this),[e.settings]))});if("undefined"!==typeof a){var e=this.data("evolutionUpDownVoting_context");return null!==e?e.settings[a]:null}}};b.fn.evolutionUpDownVoting=
function(c){if(c in a)return a[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof c&&c)b.error("Method "+c+" does not exist on jQuery.fn.evolutionUpDownVoting");else return f.apply(this,arguments)};b.extend(b.fn.evolutionUpDownVoting,{defaults:{yesVotes:0,noVotes:0,voteCount:0,score:0,userVote:0,voteClass:"updownvote",overClass:"active",readOnlyClass:"readonly",isReadOnly:!1,allowMultipleSelections:!0,allowMultipleVotes:!1,canUserUpVote:!1,canUserDownVote:!1,canViewVotes:!1,
isUserRegistered:!0,loginUrl:"",voteUrl:"",isUserGroupMember:!1,voteDownMessage:"Vote against this idea",voteUpMessage:"Vote for this idea",voteDownAgainMessage:"Vote against this idea again",voteUpAgainMessage:"Vote for this idea again",loginMessage:"Sign in to vote on ideas",noPermissionMessage:"You do not have permission to vote for this idea",notGroupMemberMessage:"Join this group to vote on this idea",deleteMessage:"Remove your vote for this idea",removeDownVoteMessage:"Remove a vote against this idea",
removeUpVoteMessage:"Remove a vote for this idea",readOnlyMessage:"Voting has been disabled",switchToDownVoteMessage:"Vote against this idea instead of for it",switchToUpVoteMessage:"Vote for this idea instead of against it",viewVotesMessage:"View votes",onVote:function(a){},onDeleteVote:function(a){}}});return{}},jQuery,window);$.telligent=$.telligent||{};$.telligent.evolution=$.telligent.evolution||{};L("components composers events lib modules plugins lib.messageLinks lib.sheetProvider lib.sheet lib.actionSheet lib.touchEventAdapter lib.reflow lib.storageShim lib.imagePreview lib.legacyFormFilter lib.jsSupport lib.devicePixelRatio module.ui module.scriptRendering module.themePreview module.notifications module.systemNotifications lib.jQueryShim lib.keyboardActive module.shortcuts module.scheduledFile module.navigationConfirmation".split(" "),
function(b,e,g,m,n,f,d,l,a,c,k,p,r,q,h,w,s,v,t,x,y,z,A,C,B,F,H,I,J){I(function(){A.shim();s.setCookie();w.setCookie();r.shim();k.adapt()&&I("body").addClass("touch");B.init();F.init();H.init();v.initiate();t.initiate();x.initiate();y.initiate();z.initiate();p.monitor();l.sheet=new a({parent:I("body"),enablePan:!0,maxHeightPerent:0.8,cssClass:"sheet",backgroundColor:"#333",backgroundOpacity:0.75,animationDuration:250,onOpening:function(){I.telligent.evolution.messaging.publish("sheet.opening")},onClosing:function(){I.telligent.evolution.messaging.publish("sheet.closing")},
onOpened:function(){I.telligent.evolution.messaging.publish("sheet.opened")},onClosed:function(){I.telligent.evolution.messaging.publish("sheet.closed")}});l.actionSheet=new c({sheet:l.sheet});(new d({parent:"body"})).handle("click");h.init();I.telligent.evolution.ui.render();q.register();C.init()})},jQuery,window)})();
